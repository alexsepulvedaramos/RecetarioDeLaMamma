var xD=Object.defineProperty,MD=Object.defineProperties;var RD=Object.getOwnPropertyDescriptors;var Ig=Object.getOwnPropertySymbols;var ND=Object.prototype.hasOwnProperty,PD=Object.prototype.propertyIsEnumerable;var Dg=(t,e,n)=>e in t?xD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||={})ND.call(e,n)&&Dg(t,n,e[n]);if(Ig)for(var n of Ig(e))PD.call(e,n)&&Dg(t,n,e[n]);return t},re=(t,e)=>MD(t,RD(e));var m=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(c){i(c)}},s=u=>{try{a(n.throw(u))}catch(c){i(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var Cg=null;var Ec=1,Tg=Symbol("SIGNAL");function Ve(t){let e=Cg;return Cg=t,e}var bg={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function OD(t){if(!(Cc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ec)){if(!t.producerMustRecompute(t)&&!Ic(t)){t.dirty=!1,t.lastCleanEpoch=Ec;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ec}}function Sg(t){return t&&(t.nextProducerIndex=0),Ve(t)}function Ag(t,e){if(Ve(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Cc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Dc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ic(t){ms(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(OD(n),r!==n.version))return!0}return!1}function xg(t){if(ms(t),Cc(t))for(let e=0;e<t.producerNode.length;e++)Dc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Dc(t,e){if(kD(t),ms(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Dc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ms(i),i.producerIndexOfThis[r]=e}}function Cc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ms(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function kD(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function FD(){throw new Error}var LD=FD;function Mg(t){LD=t}function P(t){return typeof t=="function"}function hr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ys=hr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ti(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var pe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(P(r))try{r()}catch(o){e=o instanceof ys?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Rg(o)}catch(s){e=e??[],s instanceof ys?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ys(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Rg(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ti(n,e)}remove(e){let{_finalizers:n}=this;n&&Ti(n,e),e instanceof t&&e._removeParent(this)}};pe.EMPTY=(()=>{let t=new pe;return t.closed=!0,t})();var Tc=pe.EMPTY;function vs(t){return t instanceof pe||t&&"closed"in t&&P(t.remove)&&P(t.add)&&P(t.unsubscribe)}function Rg(t){P(t)?t():t.unsubscribe()}var it={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var fr={setTimeout(t,e,...n){let{delegate:r}=fr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=fr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ws(t){fr.setTimeout(()=>{let{onUnhandledError:e}=it;if(e)e(t);else throw t})}function bi(){}var Ng=bc("C",void 0,void 0);function Pg(t){return bc("E",void 0,t)}function Og(t){return bc("N",t,void 0)}function bc(t,e,n){return{kind:t,value:e,error:n}}var Mn=null;function pr(t){if(it.useDeprecatedSynchronousErrorHandling){let e=!Mn;if(e&&(Mn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Mn;if(Mn=null,n)throw r}}else t()}function kg(t){it.useDeprecatedSynchronousErrorHandling&&Mn&&(Mn.errorThrown=!0,Mn.error=t)}var Rn=class extends pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vs(e)&&e.add(this)):this.destination=BD}static create(e,n,r){return new gr(e,n,r)}next(e){this.isStopped?Ac(Og(e),this):this._next(e)}error(e){this.isStopped?Ac(Pg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ac(Ng,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},VD=Function.prototype.bind;function Sc(t,e){return VD.call(t,e)}var xc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_s(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_s(r)}else _s(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_s(n)}}},gr=class extends Rn{constructor(e,n,r){super();let i;if(P(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&it.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sc(e.next,o),error:e.error&&Sc(e.error,o),complete:e.complete&&Sc(e.complete,o)}):i=e}this.destination=new xc(i)}};function _s(t){it.useDeprecatedSynchronousErrorHandling?kg(t):ws(t)}function jD(t){throw t}function Ac(t,e){let{onStoppedNotification:n}=it;n&&fr.setTimeout(()=>n(t,e))}var BD={closed:!0,next:bi,error:jD,complete:bi};var mr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function je(t){return t}function Mc(...t){return Rc(t)}function Rc(t){return t.length===0?je:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Z=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=$D(n)?n:new gr(n,r,i);return pr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Fg(r),new r((i,o)=>{let s=new gr({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[mr](){return this}pipe(...n){return Rc(n)(this)}toPromise(n){return n=Fg(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Fg(t){var e;return(e=t??it.Promise)!==null&&e!==void 0?e:Promise}function UD(t){return t&&P(t.next)&&P(t.error)&&P(t.complete)}function $D(t){return t&&t instanceof Rn||UD(t)&&vs(t)}function Nc(t){return P(t?.lift)}function U(t){return e=>{if(Nc(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $(t,e,n,r,i){return new Pc(t,e,n,r,i)}var Pc=class extends Rn{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function yr(){return U((t,e)=>{let n=null;t._refCount++;let r=$(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var vr=class extends Z{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Nc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pe;let n=this.getSubject();e.add(this.source.subscribe($(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pe.EMPTY)}return e}refCount(){return yr()(this)}};var Lg=hr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class t extends Z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Es(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Lg}next(n){pr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){pr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){pr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Tc:(this.currentObservers=null,o.push(n),new pe(()=>{this.currentObservers=null,Ti(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Z;return n.source=this,n}}return t.create=(e,n)=>new Es(e,n),t})(),Es=class extends Be{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tc}};var De=class extends Be{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var We=new Z(t=>t.complete());function Vg(t){return t&&P(t.schedule)}function jg(t){return t[t.length-1]}function Bg(t){return P(jg(t))?t.pop():void 0}function en(t){return Vg(jg(t))?t.pop():void 0}function $g(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function Ug(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nn(t){return this instanceof Nn?(this.v=t,this):new Nn(t)}function Hg(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(w,E){o.push([h,f,w,E])>1||a(h,f)})})}function a(h,f){try{u(r[h](f))}catch(w){d(o[0][3],w)}}function u(h){h.value instanceof Nn?Promise.resolve(h.value.v).then(c,l):d(o[0][2],h)}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function zg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Ug=="function"?Ug(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}}var Is=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ds(t){return P(t?.then)}function Cs(t){return P(t[mr])}function Ts(t){return Symbol.asyncIterator&&P(t?.[Symbol.asyncIterator])}function bs(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function HD(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ss=HD();function As(t){return P(t?.[Ss])}function xs(t){return Hg(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Nn(n.read());if(i)return yield Nn(void 0);yield yield Nn(r)}}finally{n.releaseLock()}})}function Ms(t){return P(t?.getReader)}function ye(t){if(t instanceof Z)return t;if(t!=null){if(Cs(t))return zD(t);if(Is(t))return qD(t);if(Ds(t))return GD(t);if(Ts(t))return qg(t);if(As(t))return WD(t);if(Ms(t))return KD(t)}throw bs(t)}function zD(t){return new Z(e=>{let n=t[mr]();if(P(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function qD(t){return new Z(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function GD(t){return new Z(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ws)})}function WD(t){return new Z(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function qg(t){return new Z(e=>{QD(t,e).catch(n=>e.error(n))})}function KD(t){return qg(xs(t))}function QD(t,e){var n,r,i,o;return $g(this,void 0,void 0,function*(){try{for(n=zg(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Le(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Rs(t,e=0){return U((n,r)=>{n.subscribe($(r,i=>Le(r,t,()=>r.next(i),e),()=>Le(r,t,()=>r.complete(),e),i=>Le(r,t,()=>r.error(i),e)))})}function Ns(t,e=0){return U((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Gg(t,e){return ye(t).pipe(Ns(e),Rs(e))}function Wg(t,e){return ye(t).pipe(Ns(e),Rs(e))}function Kg(t,e){return new Z(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Qg(t,e){return new Z(n=>{let r;return Le(n,e,()=>{r=t[Ss](),Le(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>P(r?.return)&&r.return()})}function Ps(t,e){if(!t)throw new Error("Iterable cannot be null");return new Z(n=>{Le(n,e,()=>{let r=t[Symbol.asyncIterator]();Le(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Yg(t,e){return Ps(xs(t),e)}function Zg(t,e){if(t!=null){if(Cs(t))return Gg(t,e);if(Is(t))return Kg(t,e);if(Ds(t))return Wg(t,e);if(Ts(t))return Ps(t,e);if(As(t))return Qg(t,e);if(Ms(t))return Yg(t,e)}throw bs(t)}function ce(t,e){return e?Zg(t,e):ye(t)}function R(...t){let e=en(t);return ce(t,e)}function wr(t,e){let n=P(t)?t:()=>t,r=i=>i.error(n());return new Z(e?i=>e.schedule(r,0,i):r)}function Oc(t){return!!t&&(t instanceof Z||P(t.lift)&&P(t.subscribe))}var Bt=hr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function H(t,e){return U((n,r)=>{let i=0;n.subscribe($(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:YD}=Array;function ZD(t,e){return YD(e)?t(...e):t(e)}function Xg(t){return H(e=>ZD(t,e))}var{isArray:XD}=Array,{getPrototypeOf:JD,prototype:eC,keys:tC}=Object;function Jg(t){if(t.length===1){let e=t[0];if(XD(e))return{args:e,keys:null};if(nC(e)){let n=tC(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function nC(t){return t&&typeof t=="object"&&JD(t)===eC}function em(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Si(...t){let e=en(t),n=Bg(t),{args:r,keys:i}=Jg(t);if(r.length===0)return ce([],e);let o=new Z(rC(r,e,i?s=>em(i,s):je));return n?o.pipe(Xg(n)):o}function rC(t,e,n=je){return r=>{tm(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)tm(e,()=>{let c=ce(t[u],e),l=!1;c.subscribe($(r,d=>{o[u]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function tm(t,e,n){t?Le(n,t,e):e()}function nm(t,e,n,r,i,o,s,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=E=>c<r?w(E):u.push(E),w=E=>{o&&e.next(E),c++;let C=!1;ye(n(E,l++)).subscribe($(e,M=>{i?.(M),o?f(M):e.next(M)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;u.length&&c<r;){let M=u.shift();s?Le(e,s,()=>w(M)):w(M)}h()}catch(M){e.error(M)}}))};return t.subscribe($(e,f,()=>{d=!0,h()})),()=>{a?.()}}function de(t,e,n=1/0){return P(e)?de((r,i)=>H((o,s)=>e(r,o,i,s))(ye(t(r,i))),n):(typeof e=="number"&&(n=e),U((r,i)=>nm(r,i,t,n)))}function _r(t=1/0){return de(je,t)}function rm(){return _r(1)}function Er(...t){return rm()(ce(t,en(t)))}function Os(t){return new Z(e=>{ye(t()).subscribe(e)})}function Ke(t,e){return U((n,r)=>{let i=0;n.subscribe($(r,o=>t.call(e,o,i++)&&r.next(o)))})}function tn(t){return U((e,n)=>{let r=null,i=!1,o;r=e.subscribe($(n,void 0,void 0,s=>{o=ye(t(s,tn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function im(t,e,n,r,i){return(o,s)=>{let a=n,u=e,c=0;o.subscribe($(s,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Pn(t,e){return P(e)?de(t,e,1):de(t,1)}function nn(t){return U((e,n)=>{let r=!1;e.subscribe($(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ut(t){return t<=0?()=>We:U((e,n)=>{let r=0;e.subscribe($(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function kc(t){return H(()=>t)}function ks(t=iC){return U((e,n)=>{let r=!1;e.subscribe($(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function iC(){return new Bt}function Ai(t){return U((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function yt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ke((i,o)=>t(i,o,r)):je,Ut(1),n?nn(e):ks(()=>new Bt))}function Ir(t){return t<=0?()=>We:U((e,n)=>{let r=[];e.subscribe($(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Fc(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ke((i,o)=>t(i,o,r)):je,Ir(1),n?nn(e):ks(()=>new Bt))}function Lc(t,e){return U(im(t,e,arguments.length>=2,!0))}function Vc(...t){let e=en(t);return U((n,r)=>{(e?Er(t,n,e):Er(t,n)).subscribe(r)})}function Qe(t,e){return U((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe($(r,u=>{i?.unsubscribe();let c=0,l=o++;ye(t(u,l)).subscribe(i=$(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function jc(t){return U((e,n)=>{ye(t).subscribe($(n,()=>n.complete(),bi)),!n.closed&&e.subscribe(n)})}function ve(t,e,n){let r=P(t)||e||n?{next:t,error:e,complete:n}:t;return r?U((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe($(o,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),o.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):je}var A=class extends Error{constructor(e,n){super(Al(e,n)),this.code=e}};function Al(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function Ue(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ue).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function om(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var oC=J({__forward_ref__:J});function jm(t){return t.__forward_ref__=jm,t.toString=function(){return Ue(this())},t}function Ze(t){return Bm(t)?t():t}function Bm(t){return typeof t=="function"&&t.hasOwnProperty(oC)&&t.__forward_ref__===jm}function Um(t){return t&&!!t.\u0275providers}var sC=J({\u0275cmp:J}),aC=J({\u0275dir:J}),uC=J({\u0275pipe:J}),cC=J({\u0275mod:J}),Hs=J({\u0275fac:J}),xi=J({__NG_ELEMENT_ID__:J}),sm=J({__NG_ENV_ID__:J});function lC(t){return typeof t=="string"?t:t==null?"":String(t)}function dC(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():lC(t)}function hC(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new A(-200,`Circular dependency in DI detected for ${t}${n}`)}function xl(t,e){throw new A(-201,!1)}function fC(t,e){t==null&&pC(e,t,null,"!=")}function pC(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function T(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function at(t){return{providers:t.providers||[],imports:t.imports||[]}}function sa(t){return am(t,Hm)||am(t,zm)}function $m(t){return sa(t)!==null}function am(t,e){return t.hasOwnProperty(e)?t[e]:null}function gC(t){let e=t&&(t[Hm]||t[zm]);return e||null}function um(t){return t&&(t.hasOwnProperty(cm)||t.hasOwnProperty(mC))?t[cm]:null}var Hm=J({\u0275prov:J}),cm=J({\u0275inj:J}),zm=J({ngInjectableDef:J}),mC=J({ngInjectorDef:J}),j=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(j||{}),Qc;function qm(){return Qc}function Ye(t){let e=Qc;return Qc=t,e}function Gm(t,e,n){let r=sa(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&j.Optional)return null;if(e!==void 0)return e;xl(t,"Injector")}var $e=globalThis;var O=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=T({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var yC={},Ri=yC,Yc="__NG_DI_FLAG__",zs="ngTempTokenPath",vC="ngTokenPath",wC=/\n/gm,_C="\u0275",lm="__source",Sr;function EC(){return Sr}function rn(t){let e=Sr;return Sr=t,e}function IC(t,e=j.Default){if(Sr===void 0)throw new A(-203,!1);return Sr===null?Gm(t,void 0,e):Sr.get(t,e&j.Optional?null:void 0,e)}function b(t,e=j.Default){return(qm()||IC)(Ze(t),e)}function _(t,e=j.Default){return b(t,aa(e))}function aa(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zc(t){let e=[];for(let n=0;n<t.length;n++){let r=Ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new A(900,!1);let i,o=j.Default;for(let s=0;s<r.length;s++){let a=r[s],u=DC(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(b(i,o))}else e.push(b(r))}return e}function Wm(t,e){return t[Yc]=e,t.prototype[Yc]=e,t}function DC(t){return t[Yc]}function CC(t,e,n,r){let i=t[zs];throw e[lm]&&i.unshift(e[lm]),t.message=TC(`
`+t.message,i,n,r),t[vC]=i,t[zs]=null,t}function TC(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==_C?t.slice(2):t;let i=Ue(e);if(Array.isArray(e))i=e.map(Ue).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ue(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(wC,`
  `)}`}function Ui(t){return{toString:t}.toString()}var Km=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Km||{}),_t=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(_t||{}),Ni={},vt=[],an=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(an||{});function Qm(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Xc(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];SC(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function bC(t){return t===3||t===4||t===6}function SC(t){return t.charCodeAt(0)===64}function Ml(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?dm(t,n,i,null,e[++r]):dm(t,n,i,null,null))}}return t}function dm(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Ym="ng-template";function AC(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&Qm(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function Zm(t){return t.type===4&&t.value!==Ym}function xC(t,e,n){let r=t.type===4&&!n?Ym:t.value;return e===r}function MC(t,e,n){let r=4,i=t.attrs||[],o=PC(i),s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!ot(r)&&!ot(u))return!1;if(s&&ot(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!xC(t,u,n)||u===""&&e.length===1){if(ot(r))return!1;s=!0}}else{let c=r&8?u:e[++a];if(r&8&&t.attrs!==null){if(!AC(t.attrs,c,n)){if(ot(r))return!1;s=!0}continue}let l=r&8?"class":u,d=RC(l,i,Zm(t),n);if(d===-1){if(ot(r))return!1;s=!0;continue}if(c!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&Qm(f,c,0)!==-1||r&2&&c!==h){if(ot(r))return!1;s=!0}}}}return ot(r)||s}function ot(t){return(t&1)===0}function RC(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return OC(e,t)}function NC(t,e,n=!1){for(let r=0;r<e.length;r++)if(MC(t,e[r],n))return!0;return!1}function PC(t){for(let e=0;e<t.length;e++){let n=t[e];if(bC(n))return e}return t.length}function OC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function hm(t,e){return t?":not("+e.trim()+")":e}function kC(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ot(s)&&(e+=hm(o,i),i=""),r=s,o=o||!ot(r);n++}return i!==""&&(e+=hm(o,i)),e}function FC(t){return t.map(kC).join(",")}function LC(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!ot(i))break;i=o}r++}return{attrs:e,classes:n}}function Ct(t){return Ui(()=>{let e=ny(t),n=re(I({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Km.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||_t.Emulated,styles:t.styles||vt,_:null,schemas:t.schemas||null,tView:null,id:""});ry(n);let r=t.dependencies;return n.directiveDefs=pm(r,!1),n.pipeDefs=pm(r,!0),n.id=BC(n),n})}function VC(t){return un(t)||Xm(t)}function jC(t){return t!==null}function ut(t){return Ui(()=>({type:t.type,bootstrap:t.bootstrap||vt,declarations:t.declarations||vt,imports:t.imports||vt,exports:t.exports||vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function fm(t,e){if(t==null)return Ni;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=an.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==an.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Rl(t){return Ui(()=>{let e=ny(t);return ry(e),e})}function un(t){return t[sC]||null}function Xm(t){return t[aC]||null}function Jm(t){return t[uC]||null}function ey(t){let e=un(t)||Xm(t)||Jm(t);return e!==null?e.standalone:!1}function ty(t,e){let n=t[cC]||null;if(!n&&e===!0)throw new Error(`Type ${Ue(t)} does not have '\u0275mod' property.`);return n}function ny(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ni,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||vt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fm(t.inputs,e),outputs:fm(t.outputs),debugInfo:null}}function ry(t){t.features?.forEach(e=>e(t))}function pm(t,e){if(!t)return null;let n=e?Jm:VC;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(jC)}function BC(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Ht=0,z=1,L=2,Ae=3,st=4,ct=5,qs=6,gm=7,cn=8,Mr=9,ln=10,$t=11,Pi=12,mm=13,$i=14,Et=15,Nl=16,Dr=17,Pl=18,ua=19,iy=20,sn=21,Bc=22,kn=23,Rr=25,oy=1;var Fn=7,Gs=8,Ws=9,Xe=10,Ol=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ol||{});function Ar(t){return Array.isArray(t)&&typeof t[oy]=="object"}function zt(t){return Array.isArray(t)&&t[oy]===!0}function sy(t){return(t.flags&4)!==0}function kl(t){return t.componentOffset>-1}function UC(t){return(t.flags&1)===1}function Hi(t){return!!t.template}function $C(t){return(t[L]&512)!==0}function Nr(t,e){let n=t.hasOwnProperty(Hs);return n?t[Hs]:null}var Jc=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ay(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ca(){return uy}function uy(t){return t.type.prototype.ngOnChanges&&(t.setInput=zC),HC}ca.ngInherit=!0;function HC(){let t=ly(this),e=t?.current;if(e){let n=t.previous;if(n===Ni)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function zC(t,e,n,r,i){let o=this.declaredInputs[r],s=ly(t)||qC(t,{previous:Ni,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new Jc(c&&c.currentValue,n,u===Ni),ay(t,e,i,n)}var cy="__ngSimpleChanges__";function ly(t){return t[cy]||null}function qC(t,e){return t[cy]=e}var ym=null;var on=function(t,e,n){ym?.(t,e,n)},GC="svg",WC="math",KC=!1;function QC(){return KC}function dn(t){for(;Array.isArray(t);)t=t[Ht];return t}function qt(t,e){return dn(e[t.index])}function YC(t,e){return t.data[e]}function zi(t,e){let n=e[t];return Ar(n)?n:n[Ht]}function Fl(t){return(t[L]&128)===128}function ZC(t){return zt(t[Ae])}function vm(t,e){return e==null?null:t[e]}function dy(t){t[Dr]=0}function XC(t){t[L]&1024||(t[L]|=1024,Fl(t)&&Oi(t))}function hy(t){return t[L]&9216||t[kn]?.dirty}function el(t){hy(t)?Oi(t):t[L]&64&&(QC()?(t[L]|=1024,Oi(t)):t[ln].changeDetectionScheduler?.notify())}function Oi(t){t[ln].changeDetectionScheduler?.notify();let e=ki(t);for(;e!==null&&!(e[L]&8192||(e[L]|=8192,!Fl(e)));)e=ki(e)}function fy(t,e){if((t[L]&256)===256)throw new A(911,!1);t[sn]===null&&(t[sn]=[]),t[sn].push(e)}function JC(t,e){if(t[sn]===null)return;let n=t[sn].indexOf(e);n!==-1&&t[sn].splice(n,1)}function ki(t){let e=t[Ae];return zt(e)?e[Ae]:e}var X={lFrame:Ey(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function e0(){return X.lFrame.elementDepthCount}function t0(){X.lFrame.elementDepthCount++}function n0(){X.lFrame.elementDepthCount--}function py(){return X.bindingsEnabled}function r0(){return X.skipHydrationRootTNode!==null}function i0(t){return X.skipHydrationRootTNode===t}function o0(){X.skipHydrationRootTNode=null}function It(){return X.lFrame.lView}function gy(){return X.lFrame.tView}function fn(){let t=my();for(;t!==null&&t.type===64;)t=t.parent;return t}function my(){return X.lFrame.currentTNode}function s0(){let t=X.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ll(t,e){let n=X.lFrame;n.currentTNode=t,n.isParent=e}function yy(){return X.lFrame.isParent}function a0(){X.lFrame.isParent=!1}function u0(t){return X.lFrame.bindingIndex=t}function c0(){return X.lFrame.inI18n}function l0(t,e){let n=X.lFrame;n.bindingIndex=n.bindingRootIndex=t,tl(e)}function d0(){return X.lFrame.currentDirectiveIndex}function tl(t){X.lFrame.currentDirectiveIndex=t}function vy(t){X.lFrame.currentQueryIndex=t}function h0(t){let e=t[z];return e.type===2?e.declTNode:e.type===1?t[ct]:null}function wy(t,e,n){if(n&j.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&j.Host);)if(i=h0(o),i===null||(o=o[$i],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=X.lFrame=_y();return r.currentTNode=e,r.lView=t,!0}function Vl(t){let e=_y(),n=t[z];X.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _y(){let t=X.lFrame,e=t===null?null:t.child;return e===null?Ey(t):e}function Ey(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Iy(){let t=X.lFrame;return X.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Dy=Iy;function jl(){let t=Iy();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function f0(){return X.lFrame.selectedIndex}function Ln(t){X.lFrame.selectedIndex=t}function p0(){return X.lFrame.currentNamespace}var Cy=!0;function g0(){return Cy}function m0(t){Cy=t}function y0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=uy(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Ty(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Vs(t,e,n){by(t,e,3,n)}function js(t,e,n,r){(t[L]&3)===n&&by(t,e,n,r)}function Uc(t,e){let n=t[L];(n&3)===e&&(n&=16383,n+=1,t[L]=n)}function by(t,e,n,r){let i=r!==void 0?t[Dr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Dr]+=65536),(a<o||o==-1)&&(v0(t,n,e,u),t[Dr]=(t[Dr]&4294901760)+u+2),u++}function wm(t,e){on(4,t,e);let n=Ve(null);try{e.call(t)}finally{Ve(n),on(5,t,e)}}function v0(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[L]>>14<t[Dr]>>16&&(t[L]&3)===e&&(t[L]+=16384,wm(a,o)):wm(a,o)}var xr=-1,Fi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function w0(t){return t instanceof Fi}function _0(t){return(t.flags&8)!==0}function E0(t){return(t.flags&16)!==0}function Sy(t){return t!==xr}function Ks(t){return t&32767}function I0(t){return t>>16}function Qs(t,e){let n=I0(t),r=e;for(;n>0;)r=r[$i],n--;return r}var nl=!0;function _m(t){let e=nl;return nl=t,e}var D0=256,Ay=D0-1,xy=5,C0=0,wt={};function T0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(xi)&&(r=n[xi]),r==null&&(r=n[xi]=C0++);let i=r&Ay,o=1<<i;e.data[t+(i>>xy)]|=o}function My(t,e){let n=Ry(t,e);if(n!==-1)return n;let r=e[z];r.firstCreatePass&&(t.injectorIndex=e.length,$c(r.data,t),$c(e,null),$c(r.blueprint,null));let i=Bl(t,e),o=t.injectorIndex;if(Sy(i)){let s=Ks(i),a=Qs(i,e),u=a[z].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function $c(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ry(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Bl(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Fy(i),r===null)return xr;if(n++,i=i[$i],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return xr}function b0(t,e,n){T0(t,e,n)}function Ny(t,e,n){if(n&j.Optional||t!==void 0)return t;xl(e,"NodeInjector")}function Py(t,e,n,r){if(n&j.Optional&&r===void 0&&(r=null),!(n&(j.Self|j.Host))){let i=t[Mr],o=Ye(void 0);try{return i?i.get(e,r,n&j.Optional):Gm(e,r,n&j.Optional)}finally{Ye(o)}}return Ny(r,e,n)}function Oy(t,e,n,r=j.Default,i){if(t!==null){if(e[L]&2048&&!(r&j.Self)){let s=R0(t,e,n,r,wt);if(s!==wt)return s}let o=ky(t,e,n,r,wt);if(o!==wt)return o}return Py(e,n,r,i)}function ky(t,e,n,r,i){let o=x0(n);if(typeof o=="function"){if(!wy(e,t,r))return r&j.Host?Ny(i,n,r):Py(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&j.Optional))xl(n);else return s}finally{Dy()}}else if(typeof o=="number"){let s=null,a=Ry(t,e),u=xr,c=r&j.Host?e[Et][ct]:null;for((a===-1||r&j.SkipSelf)&&(u=a===-1?Bl(t,e):e[a+8],u===xr||!Im(r,!1)?a=-1:(s=e[z],a=Ks(u),e=Qs(u,e)));a!==-1;){let l=e[z];if(Em(o,a,l.data)){let d=S0(a,e,n,s,r,c);if(d!==wt)return d}u=e[a+8],u!==xr&&Im(r,e[z].data[a+8]===c)&&Em(o,a,e)?(s=l,a=Ks(u),e=Qs(u,e)):a=-1}}return i}function S0(t,e,n,r,i,o){let s=e[z],a=s.data[t+8],u=r==null?kl(a)&&nl:r!=s&&(a.type&3)!==0,c=i&j.Host&&o===a,l=A0(a,s,n,u,c);return l!==null?Li(e,s,l,a):wt}function A0(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,c=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let w=s[f];if(f<u&&n===w||f>=u&&w.type===n)return f}if(i){let f=s[u];if(f&&Hi(f)&&f.type===n)return u}return null}function Li(t,e,n,r){let i=t[n],o=e.data;if(w0(i)){let s=i;s.resolving&&hC(dC(o[n]));let a=_m(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?Ye(s.injectImpl):null,l=wy(t,r,j.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&y0(n,o[n],e)}finally{c!==null&&Ye(c),_m(a),s.resolving=!1,Dy()}}return i}function x0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(xi)?t[xi]:void 0;return typeof e=="number"?e>=0?e&Ay:M0:e}function Em(t,e,n){let r=1<<t;return!!(n[e+(t>>xy)]&r)}function Im(t,e){return!(t&j.Self)&&!(t&j.Host&&e)}var On=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Oy(this._tNode,this._lView,e,aa(r),n)}};function M0(){return new On(fn(),It())}function Ul(t){return Ui(()=>{let e=t.prototype.constructor,n=e[Hs]||rl(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Hs]||rl(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function rl(t){return Bm(t)?()=>{let e=rl(Ze(t));return e&&e()}:Nr(t)}function R0(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[L]&2048&&!(s[L]&512);){let a=ky(o,s,n,r|j.Self,wt);if(a!==wt)return a;let u=o.parent;if(!u){let c=s[iy];if(c){let l=c.get(n,wt,r);if(l!==wt)return l}u=Fy(s),s=s[$i]}o=u}return i}function Fy(t){let e=t[z],n=e.type;return n===2?e.declTNode:n===1?t[ct]:null}var Fs="__parameters__";function N0(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Ly(t,e,n){return Ui(()=>{let r=N0(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,c,l){let d=u.hasOwnProperty(Fs)?u[Fs]:Object.defineProperty(u,Fs,{value:[]})[Fs];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function P0(t){let e=$e.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function O0(t){return typeof t=="function"}function $l(t,e){t.forEach(n=>Array.isArray(n)?$l(n,e):e(n))}function Vy(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ys(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Hl=Wm(Ly("Optional"),8);var jy=Wm(Ly("SkipSelf"),4);function k0(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(j0))}return o}return Zs.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(c=>{i.template=c}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let c=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[c+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(c=>{a.push(c),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>B0(o));e.push(u)}),L0(),Promise.all(e).then(()=>{})}var Zs=new Map,F0=new Set;function L0(){let t=Zs;return Zs=new Map,t}function V0(){return Zs.size===0}function j0(t){return typeof t=="string"?t:t.text()}function B0(t){F0.delete(t)}var Pr=new O("ENVIRONMENT_INITIALIZER"),By=new O("INJECTOR",-1),Uy=new O("INJECTOR_DEF_TYPES"),Xs=class{get(e,n=Ri){if(n===Ri){let r=new Error(`NullInjectorError: No provider for ${Ue(e)}!`);throw r.name="NullInjectorError",r}return n}};function U0(...t){return{\u0275providers:$y(!0,t),\u0275fromNgModule:!0}}function $y(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return $l(e,s=>{let a=s;il(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Hy(i,o),n}function Hy(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];zl(i,o=>{e(o,r)})}}function il(t,e,n,r){if(t=Ze(t),!t)return!1;let i=null,o=um(t),s=!o&&un(t);if(!o&&!s){let u=t.ngModule;if(o=um(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)il(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{$l(o.imports,l=>{il(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&Hy(c,e)}if(!a){let c=Nr(i)||(()=>new i);e({provide:i,useFactory:c,deps:vt},i),e({provide:Uy,useValue:i,multi:!0},i),e({provide:Pr,useValue:()=>b(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let c=t;zl(u,l=>{e(l,c)})}}else return!1;return i!==t&&t.providers!==void 0}function zl(t,e){for(let n of t)Um(n)&&(n=n.\u0275providers),Array.isArray(n)?zl(n,e):e(n)}var $0=J({provide:String,useValue:J});function zy(t){return t!==null&&typeof t=="object"&&$0 in t}function H0(t){return!!(t&&t.useExisting)}function z0(t){return!!(t&&t.useFactory)}function ol(t){return typeof t=="function"}var la=new O("Set Injector scope."),Bs={},q0={},Hc;function ql(){return Hc===void 0&&(Hc=new Xs),Hc}var He=class{},Vi=class extends He{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,al(e,s=>this.processProvider(s)),this.records.set(By,Cr(void 0,this)),i.has("environment")&&this.records.set(He,Cr(void 0,this));let o=this.records.get(la);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Uy,vt,j.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=rn(this),r=Ye(void 0),i;try{return e()}finally{rn(n),Ye(r)}}get(e,n=Ri,r=j.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(sm))return e[sm](this);r=aa(r);let i,o=rn(this),s=Ye(void 0);try{if(!(r&j.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=Z0(e)&&sa(e);c&&this.injectableDefInScope(c)?u=Cr(sl(e),Bs):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&j.Self?ql():this.parent;return n=r&j.Optional&&n===Ri?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[zs]=a[zs]||[]).unshift(Ue(e)),o)throw a;return CC(a,e,"R3InjectorError",this.source)}else throw a}finally{Ye(s),rn(o)}}resolveInjectorInitializers(){let e=rn(this),n=Ye(void 0),r;try{let i=this.get(Pr,vt,j.Self);for(let o of i)o()}finally{rn(e),Ye(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ue(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new A(205,!1)}processProvider(e){e=Ze(e);let n=ol(e)?e:Ze(e&&e.provide),r=W0(e);if(!ol(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Cr(void 0,Bs,!0),i.factory=()=>Zc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Bs&&(n.value=q0,n.value=n.factory()),typeof n.value=="object"&&n.value&&Y0(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function sl(t){let e=sa(t),n=e!==null?e.factory:Nr(t);if(n!==null)return n;if(t instanceof O)throw new A(204,!1);if(t instanceof Function)return G0(t);throw new A(204,!1)}function G0(t){if(t.length>0)throw new A(204,!1);let n=gC(t);return n!==null?()=>n.factory(t):()=>new t}function W0(t){if(zy(t))return Cr(void 0,t.useValue);{let e=K0(t);return Cr(e,Bs)}}function K0(t,e,n){let r;if(ol(t)){let i=Ze(t);return Nr(i)||sl(i)}else if(zy(t))r=()=>Ze(t.useValue);else if(z0(t))r=()=>t.useFactory(...Zc(t.deps||[]));else if(H0(t))r=()=>b(Ze(t.useExisting));else{let i=Ze(t&&(t.useClass||t.provide));if(Q0(t))r=()=>new i(...Zc(t.deps));else return Nr(i)||sl(i)}return r}function Cr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Q0(t){return!!t.deps}function Y0(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Z0(t){return typeof t=="function"||typeof t=="object"&&t instanceof O}function al(t,e){for(let n of t)Array.isArray(n)?al(n,e):n&&Um(n)?al(n.\u0275providers,e):e(n)}function pn(t,e){t instanceof Vi&&t.assertNotDestroyed();let n,r=rn(t),i=Ye(void 0);try{return e()}finally{rn(r),Ye(i)}}function X0(t){if(!qm()&&!EC())throw new A(-203,!1)}function Dm(t,e=null,n=null,r){let i=qy(t,e,n,r);return i.resolveInjectorInitializers(),i}function qy(t,e=null,n=null,r,i=new Set){let o=[n||vt,U0(t)];return r=r||(typeof t=="object"?void 0:Ue(t)),new Vi(o,e||ql(),r||null,i)}var lt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Dm({name:""},i,r,"");{let o=r.name??"";return Dm({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Ri,e.NULL=new Xs,e.\u0275prov=T({token:e,providedIn:"any",factory:()=>b(By)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var ul;function Gy(t){ul=t}function J0(){if(ul!==void 0)return ul;if(typeof document<"u")return document;throw new A(210,!1)}var da=new O("AppId",{providedIn:"root",factory:()=>eT}),eT="ng",Gl=new O("Platform Initializer"),gn=new O("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Wl=new O("CSP nonce",{providedIn:"root",factory:()=>J0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Wy(t){return t instanceof Function?t():t}function tT(t){return(t??_(lt)).get(gn)==="browser"}function Ky(t){return(t.flags&128)===128}var Vn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Vn||{});var Qy=new Map,nT=0;function rT(){return nT++}function iT(t){Qy.set(t[ua],t)}function oT(t){Qy.delete(t[ua])}var Cm="__ngContext__";function Or(t,e){Ar(e)?(t[Cm]=e[ua],iT(e)):t[Cm]=e}var sT;function Kl(t,e){return sT(t,e)}function Tr(t,e,n,r,i){if(r!=null){let o,s=!1;zt(r)?o=r:Ar(r)&&(s=!0,r=r[Ht]);let a=dn(r);t===0&&n!==null?i==null?ev(e,n,a):Js(e,n,a,i||null,!0):t===1&&n!==null?Js(e,n,a,i||null,!0):t===2?IT(e,a,s):t===3&&e.destroyNode(a),o!=null&&CT(e,t,o,n,i)}}function Yy(t,e,n){return t.createElement(e,n)}function aT(t,e){Zy(t,e),e[Ht]=null,e[ct]=null}function uT(t,e,n,r,i,o){r[Ht]=i,r[ct]=e,ha(t,r,n,1,i,o)}function Zy(t,e){ha(t,e,e[$t],2,null,null)}function cT(t){let e=t[Pi];if(!e)return zc(t[z],t);for(;e;){let n=null;if(Ar(e))n=e[Pi];else{let r=e[Xe];r&&(n=r)}if(!n){for(;e&&!e[st]&&e!==t;)Ar(e)&&zc(e[z],e),e=e[Ae];e===null&&(e=t),Ar(e)&&zc(e[z],e),n=e&&e[st]}e=n}}function lT(t,e,n,r){let i=Xe+r,o=n.length;r>0&&(n[i-1][st]=e),r<o-Xe?(e[st]=n[i],Vy(n,Xe+r,e)):(n.push(e),e[st]=null),e[Ae]=n;let s=e[Nl];s!==null&&n!==s&&dT(s,e);let a=e[Pl];a!==null&&a.insertView(t),el(e),e[L]|=128}function dT(t,e){let n=t[Ws],i=e[Ae][Ae][Et];e[Et]!==i&&(t[L]|=Ol.HasTransplantedViews),n===null?t[Ws]=[e]:n.push(e)}function Xy(t,e){let n=t[Ws],r=n.indexOf(e);n.splice(r,1)}function cl(t,e){if(t.length<=Xe)return;let n=Xe+e,r=t[n];if(r){let i=r[Nl];i!==null&&i!==t&&Xy(i,r),e>0&&(t[n-1][st]=r[st]);let o=Ys(t,Xe+e);aT(r[z],r);let s=o[Pl];s!==null&&s.detachView(o[z]),r[Ae]=null,r[st]=null,r[L]&=-129}return r}function Jy(t,e){if(!(e[L]&256)){let n=e[$t];n.destroyNode&&ha(t,e,n,3,null,null),cT(e)}}function zc(t,e){if(!(e[L]&256)){e[L]&=-129,e[L]|=256,e[kn]&&xg(e[kn]),fT(t,e),hT(t,e),e[z].type===1&&e[$t].destroy();let n=e[Nl];if(n!==null&&zt(e[Ae])){n!==e[Ae]&&Xy(n,e);let r=e[Pl];r!==null&&r.detachView(t)}oT(e)}}function hT(t,e){let n=t.cleanup,r=e[gm];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[gm]=null);let i=e[sn];if(i!==null){e[sn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function fT(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Fi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];on(4,a,u);try{u.call(a)}finally{on(5,a,u)}}else{on(4,i,o);try{o.call(i)}finally{on(5,i,o)}}}}}function pT(t,e,n){return gT(t,e.parent,n)}function gT(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Ht];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===_t.None||o===_t.Emulated)return null}return qt(r,n)}}function Js(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ev(t,e,n){t.appendChild(e,n)}function Tm(t,e,n,r,i){r!==null?Js(t,e,n,r,i):ev(t,e,n)}function mT(t,e,n,r){t.removeChild(e,n,r)}function Ql(t,e){return t.parentNode(e)}function yT(t,e){return t.nextSibling(e)}function vT(t,e,n){return _T(t,e,n)}function wT(t,e,n){return t.type&40?qt(t,n):null}var _T=wT,bm;function ET(t,e,n,r){let i=pT(t,r,e),o=e[$t],s=r.parent||e[ct],a=vT(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Tm(o,i,n[u],a,!1);else Tm(o,i,n,a,!1);bm!==void 0&&bm(o,r,e,n,i)}function Us(t,e){if(e!==null){let n=e.type;if(n&3)return qt(e,t);if(n&4)return ll(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Us(t,r);{let i=t[e.index];return zt(i)?ll(-1,i):dn(i)}}else{if(n&32)return Kl(e,t)()||dn(t[e.index]);{let r=tv(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ki(t[Et]);return Us(i,r)}else return Us(t,e.next)}}}return null}function tv(t,e){if(e!==null){let r=t[Et][ct],i=e.projection;return r.projection[i]}return null}function ll(t,e){let n=Xe+t+1;if(n<e.length){let r=e[n],i=r[z].firstChild;if(i!==null)return Us(r,i)}return e[Fn]}function IT(t,e,n){let r=Ql(t,e);r&&mT(t,r,e,n)}function Yl(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Or(dn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Yl(t,e,n.child,r,i,o,!1),Tr(e,t,i,a,o);else if(u&32){let c=Kl(n,r),l;for(;l=c();)Tr(e,t,i,l,o);Tr(e,t,i,a,o)}else u&16?DT(t,e,r,n,i,o):Tr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ha(t,e,n,r,i,o){Yl(n,r,t.firstChild,e,i,o,!1)}function DT(t,e,n,r,i,o){let s=n[Et],u=s[ct].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];Tr(e,t,i,l,o)}else{let c=u,l=s[Ae];Ky(r)&&(c.flags|=128),Yl(t,e,c,l,i,o,!0)}}function CT(t,e,n,r,i){let o=n[Fn],s=dn(n);o!==s&&Tr(e,t,r,o,i);for(let a=Xe;a<n.length;a++){let u=n[a];ha(u[z],u,t,e,r,o)}}function TT(t,e,n){t.setAttribute(e,"style",n)}function nv(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function rv(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Xc(t,e,r),i!==null&&nv(t,e,i),o!==null&&TT(t,e,o)}var dl=class{};var bT="h",ST="b";var AT=()=>null;function Zl(t,e,n=!1){return AT(t,e,n)}var hl=class{},ea=class{};function xT(t){let e=Error(`No component factory found for ${Ue(t)}.`);return e[MT]=t,e}var MT="ngComponent";var fl=class{resolveComponentFactory(e){throw xT(e)}},fa=(()=>{let e=class e{};e.NULL=new fl;let t=e;return t})();function RT(){return Xl(fn(),It())}function Xl(t,e){return new pa(qt(t,e))}var pa=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=RT;let t=e;return t})();var ji=class{};var NT=(()=>{let e=class e{};e.\u0275prov=T({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),qc={};function ta(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(dn(o)),zt(o)&&PT(o,r);let s=n.type;if(s&8)ta(t,e,n.child,r);else if(s&32){let a=Kl(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=tv(e,n);if(Array.isArray(a))r.push(...a);else{let u=ki(e[Et]);ta(u[z],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function PT(t,e){for(let n=Xe;n<t.length;n++){let r=t[n],i=r[z].firstChild;i!==null&&ta(r[z],r,i,e)}t[Fn]!==t[Ht]&&e.push(t[Fn])}var iv=[];function OT(t){return t[kn]??kT(t)}function kT(t){let e=iv.pop()??Object.create(LT);return e.lView=t,e}function FT(t){t.lView[kn]!==t&&(t.lView=null,iv.push(t))}var LT=re(I({},bg),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Oi(t.lView)},consumerOnSignalRead(){this.lView[kn]=this}});function ov(t){return av(t[Pi])}function sv(t){return av(t[st])}function av(t){for(;t!==null&&!zt(t);)t=t[st];return t}var VT="ngOriginalError";function Gc(t){return t[VT]}var Dt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Gc(e);for(;n&&Gc(n);)n=Gc(n);return n||null}},uv=new O("",{providedIn:"root",factory:()=>_(Dt).handleError.bind(void 0)});var cv=!1,jT=new O("",{providedIn:"root",factory:()=>cv});var lv={};function BT(t,e,n,r){if(!r)if((e[L]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Vs(e,o,n)}else{let o=t.preOrderHooks;o!==null&&js(e,o,0,n)}Ln(n)}function qi(t,e=j.Default){let n=It();if(n===null)return b(t,e);let r=fn();return Oy(r,n,Ze(t),e)}function dv(){let t="invalid";throw new Error(t)}function hv(t,e,n,r,i,o){let s=Ve(null);try{let a=null;i&an.SignalBased&&(a=e[r][Tg]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&an.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):ay(e,a,r,o)}finally{Ve(s)}}function UT(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ln(~i);else{let o=i,s=n[++r],a=n[++r];l0(s,o);let u=e[o];a(2,u)}}}finally{Ln(-1)}}function Jl(t,e,n,r,i,o,s,a,u,c,l){let d=e.blueprint.slice();return d[Ht]=i,d[L]=r|4|128|8|64,(c!==null||t&&t[L]&2048)&&(d[L]|=2048),dy(d),d[Ae]=d[$i]=t,d[cn]=n,d[ln]=s||t&&t[ln],d[$t]=a||t&&t[$t],d[Mr]=u||t&&t[Mr]||null,d[ct]=o,d[ua]=rT(),d[qs]=l,d[iy]=c,d[Et]=e.type==2?t[Et]:d,d}function fv(t,e,n,r,i){let o=t.data[e];if(o===null)o=$T(t,e,n,r,i),c0()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=s0();o.injectorIndex=s===null?-1:s.injectorIndex}return Ll(o,!0),o}function $T(t,e,n,r,i){let o=my(),s=yy(),a=s?o:o&&o.parent,u=t.data[e]=QT(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function pv(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gv(t,e,n,r,i){let o=f0(),s=r&2;try{Ln(-1),s&&e.length>Rr&&BT(t,e,Rr,!1),on(s?2:0,i),n(r,i)}finally{Ln(o),on(s?3:1,i)}}function mv(t,e,n){if(sy(e)){let r=Ve(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Ve(r)}}}function HT(t,e,n){py()&&(eb(t,e,n,qt(n,e)),(n.flags&64)===64&&_v(t,e,n))}function zT(t,e,n=qt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function yv(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=vv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function vv(t,e,n,r,i,o,s,a,u,c,l){let d=Rr+r,h=d+i,f=qT(d,h),w=typeof c=="function"?c():c;return f[z]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:l}}function qT(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:lv);return n}function GT(t,e,n,r){let o=r.get(jT,cv)||n===_t.ShadowDom,s=t.selectRootElement(e,o);return WT(s),s}function WT(t){KT(t)}var KT=()=>null;function QT(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return r0()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Sm(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=an.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?Am(r,n,c,a,u):Am(r,n,c,a)}return r}function Am(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function YT(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,c=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,w=h?h.outputs:null;u=Sm(0,d.inputs,l,u,f),c=Sm(1,d.outputs,l,c,w);let E=u!==null&&s!==null&&!Zm(e)?cb(u,l,s):null;a.push(E)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function ZT(t,e,n,r){if(py()){let i=r===null?null:{"":-1},o=nb(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&wv(t,e,n,s,i,a),i&&rb(n,r,i)}n.mergedAttrs=Ml(n.mergedAttrs,n.attrs)}function wv(t,e,n,r,i,o){for(let c=0;c<r.length;c++)b0(My(n,e),t,r[c].type);ob(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=pv(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=Ml(n.mergedAttrs,l.hostAttrs),sb(t,n,e,u,l),ib(u,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}YT(t,n,o)}function XT(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;JT(s)!=a&&s.push(a),s.push(n,r,o)}}function JT(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function eb(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;kl(n)&&ab(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||My(n,e),Or(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],c=Li(e,t,a,n);if(Or(c,e),s!==null&&ub(e,a-i,c,u,n,s),Hi(u)){let l=zi(n.index,e);l[cn]=Li(e,t,a,n)}}}function _v(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=d0();try{Ln(o);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];tl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&tb(u,c)}}finally{Ln(-1),tl(s)}}function tb(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function nb(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(NC(e,s.selectors,!1))if(r||(r=[]),Hi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;pl(t,e,u)}else r.unshift(s),pl(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function pl(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function rb(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new A(-301,!1);r.push(e[i],o)}}}function ib(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Hi(e)&&(n[""]=t)}}function ob(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function sb(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Nr(i.type,!0)),s=new Fi(o,Hi(i),qi);t.blueprint[r]=s,n[r]=s,XT(t,e,r,pv(t,n,i.hostVars,lv),i)}function ab(t,e,n){let r=qt(e,t),i=yv(n),o=t[ln].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ed(t,Jl(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function ub(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],l=s[a++],d=s[a++];hv(r,n,u,c,l,d)}}function cb(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function lb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Ev(t,e){let n=t.contentQueries;if(n!==null){let r=Ve(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];vy(o),a.contentQueries(2,e[s],s)}}}finally{Ve(r)}}}function ed(t,e){return t[Pi]?t[mm][st]=e:t[Pi]=e,t[mm]=e,e}function gl(t,e,n){vy(0);let r=Ve(null);try{e(t,n)}finally{Ve(r)}}function db(t,e){let n=t[Mr],r=n?n.get(Dt,null):null;r&&r.handleError(e)}function Iv(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],c=e[s],l=t.data[s];hv(l,c,r,a,u,i)}}var hb=100;function fb(t,e=!0){let n=t[ln],r=n.rendererFactory,i=!1;i||r.begin?.();try{pb(t)}catch(o){throw e&&db(t,o),o}finally{i||(r.end?.(),n.inlineEffectRunner?.flush())}}function pb(t){ml(t,0);let e=0;for(;hy(t);){if(e===hb)throw new A(103,!1);e++,ml(t,1)}}function gb(t,e,n,r){let i=e[L];if((i&256)===256)return;let o=!1;!o&&e[ln].inlineEffectRunner?.flush(),Vl(e);let s=null,a=null;!o&&mb(t)&&(a=OT(e),s=Sg(a));try{dy(e),u0(t.bindingStartIndex),n!==null&&gv(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let d=t.preOrderCheckHooks;d!==null&&Vs(e,d,null)}else{let d=t.preOrderHooks;d!==null&&js(e,d,0,null),Uc(e,0)}if(yb(e),Dv(e,0),t.contentQueries!==null&&Ev(t,e),!o)if(u){let d=t.contentCheckHooks;d!==null&&Vs(e,d)}else{let d=t.contentHooks;d!==null&&js(e,d,1),Uc(e,1)}UT(t,e);let c=t.components;c!==null&&Tv(e,c,0);let l=t.viewQuery;if(l!==null&&gl(2,l,r),!o)if(u){let d=t.viewCheckHooks;d!==null&&Vs(e,d)}else{let d=t.viewHooks;d!==null&&js(e,d,2),Uc(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Bc]){for(let d of e[Bc])d();e[Bc]=null}o||(e[L]&=-73)}catch(u){throw Oi(e),u}finally{a!==null&&(Ag(a,s),FT(a)),jl()}}function mb(t){return t.type!==2}function Dv(t,e){for(let n=ov(t);n!==null;n=sv(n))for(let r=Xe;r<n.length;r++){let i=n[r];Cv(i,e)}}function yb(t){for(let e=ov(t);e!==null;e=sv(e)){if(!(e[L]&Ol.HasTransplantedViews))continue;let n=e[Ws];for(let r=0;r<n.length;r++){let i=n[r],o=i[Ae];XC(i)}}}function vb(t,e,n){let r=zi(e,t);Cv(r,n)}function Cv(t,e){Fl(t)&&ml(t,e)}function ml(t,e){let r=t[z],i=t[L],o=t[kn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ic(o)),o&&(o.dirty=!1),t[L]&=-9217,s)gb(r,t,r.template,t[cn]);else if(i&8192){Dv(t,1);let a=r.components;a!==null&&Tv(t,a,1)}}function Tv(t,e,n){for(let r=0;r<e.length;r++)vb(t,e[r],n)}function bv(t){for(t[ln].changeDetectionScheduler?.notify();t;){t[L]|=64;let e=ki(t);if($C(t)&&!e)return t;t=e}return null}var kr=class{get rootNodes(){let e=this._lView,n=e[z];return ta(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[cn]}set context(e){this._lView[cn]=e}get destroyed(){return(this._lView[L]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ae];if(zt(e)){let n=e[Gs],r=n?n.indexOf(this):-1;r>-1&&(cl(e,r),Ys(n,r))}this._attachedToViewContainer=!1}Jy(this._lView[z],this._lView)}onDestroy(e){fy(this._lView,e)}markForCheck(){bv(this._cdRefInjectingView||this._lView)}detach(){this._lView[L]&=-129}reattach(){el(this._lView),this._lView[L]|=128}detectChanges(){this._lView[L]|=1024,fb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new A(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Zy(this._lView[z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new A(902,!1);this._appRef=e,el(this._lView)}},ga=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wb;let t=e;return t})();function wb(t){return _b(fn(),It(),(t&16)===16)}function _b(t,e,n){if(kl(t)&&!n){let r=zi(t.index,e);return new kr(r,r)}else if(t.type&47){let r=e[Et];return new kr(r,e)}return null}var Sv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Eb,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),yl=class extends Sv{constructor(e){super(),this._lView=e}onDestroy(e){return fy(this._lView,e),()=>JC(this._lView,e)}};function Eb(){return new yl(It())}var xm=new Set;function td(t){xm.has(t)||(xm.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var vl=class extends Be{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Wc(o),i&&(i=Wc(i)),s&&(s=Wc(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof pe&&e.add(a),a}};function Wc(t){return e=>{setTimeout(t,void 0,e)}}var Pe=vl;function Mm(...t){}function Ib(){let t=typeof $e.requestAnimationFrame=="function",e=$e[t?"requestAnimationFrame":"setTimeout"],n=$e[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ee=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pe(!1),this.onMicrotaskEmpty=new Pe(!1),this.onStable=new Pe(!1),this.onError=new Pe(!1),typeof Zone>"u")throw new A(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Ib().nativeRequestAnimationFrame,Tb(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new A(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new A(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Db,Mm,Mm);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Db={};function nd(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Cb(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call($e,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,wl(t),t.isCheckStableRunning=!0,nd(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),wl(t))}function Tb(t){let e=()=>{Cb(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(bb(a))return n.invokeTask(i,o,s,a);try{return Rm(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Nm(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Rm(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Nm(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,wl(t),nd(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function wl(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Rm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nm(t){t._nesting--,nd(t)}var _l=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pe,this.onMicrotaskEmpty=new Pe,this.onStable=new Pe,this.onError=new Pe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function bb(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function Sb(t="zone.js",e){return t==="noop"?new _l:t==="zone.js"?new ee(e):t}var br=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(br||{}),Ab={destroy(){}};function rd(t,e){!e&&X0(rd);let n=e?.injector??_(lt);if(!tT(n))return Ab;td("NgAfterNextRender");let r=n.get(id),i=r.handler??=new Il,o=e?.phase??br.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(Sv).onDestroy(s),u=new El(n,o,()=>{s(),t()});return i.register(u),{destroy:s}}var El=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(ee),this.errorHandler=e.get(Dt,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Il=class{constructor(){this.executingCallbacks=!1,this.buckets={[br.EarlyRead]:new Set,[br.Write]:new Set,[br.MixedReadWrite]:new Set,[br.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){let e=!1;this.executingCallbacks=!0;for(let n of Object.values(this.buckets))for(let r of n)e=!0,r.invoke();this.executingCallbacks=!1;for(let n of this.deferredCallbacks)this.buckets[n.phase].add(n);return this.deferredCallbacks.clear(),e}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},id=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of r)o();return!!this.handler?.execute()||r.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=T({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function xb(t,e){let n=zi(e,t),r=n[z];Mb(r,n);let i=n[Ht];i!==null&&n[qs]===null&&(n[qs]=Zl(i,n[Mr])),Av(r,n,n[cn])}function Mb(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Av(t,e,n){Vl(e);try{let r=t.viewQuery;r!==null&&gl(1,r,n);let i=t.template;i!==null&&gv(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ev(t,e),t.staticViewQueries&&gl(2,t.viewQuery,n);let o=t.components;o!==null&&Rb(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[L]&=-5,jl()}}function Rb(t,e){for(let n=0;n<e.length;n++)xb(t,e[n])}function Dl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=om(i,a);else if(o==2){let u=a,c=e[++s];r=om(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var na=class extends fa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=un(e);return new Fr(n,this.ngModule)}};function Pm(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function Nb(t){let e=t.toLowerCase();return e==="svg"?GC:e==="math"?WC:null}var Cl=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=aa(r);let i=this.injector.get(e,qc,r);return i!==qc||n===qc?i:this.parentInjector.get(e,n,r)}},Fr=class extends ea{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Pm(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Pm(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=FC(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof He?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new Cl(e,o):e,a=s.get(ji,null);if(a===null)throw new A(407,!1);let u=s.get(NT,null),c=s.get(id,null),l=s.get(dl,null),d={rendererFactory:a,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",w=r?GT(h,r,this.componentDef.encapsulation,s):Yy(h,f,Nb(f)),E=512;this.componentDef.signals?E|=4096:this.componentDef.onPush||(E|=16);let C=null;w!==null&&(C=Zl(w,s,!0));let M=vv(0,null,null,1,0,null,null,null,null,null,null),W=Jl(null,M,null,E,null,null,d,h,s,null,C);Vl(W);let le,me;try{let Se=this.componentDef,ue,mt=null;Se.findHostDirectiveDefs?(ue=[],mt=new Map,Se.findHostDirectiveDefs(Se,ue,mt),ue.push(Se)):ue=[Se];let dr=Pb(W,w),_c=Ob(dr,w,Se,ue,W,d,h);me=YC(M,Rr),w&&Lb(h,Se,w,r),n!==void 0&&Vb(me,this.ngContentSelectors,n),le=Fb(_c,Se,ue,mt,W,[jb]),Av(M,W,null)}finally{jl()}return new Tl(this.componentType,le,Xl(me,W),W,me)}},Tl=class extends hl{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new kr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Iv(o[z],o,i,e,n),this.previousInputValues.set(e,n);let s=zi(this._tNode.index,o);bv(s)}}get injector(){return new On(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Pb(t,e){let n=t[z],r=Rr;return t[r]=e,fv(n,r,2,"#host",null)}function Ob(t,e,n,r,i,o,s){let a=i[z];kb(r,t,e,s);let u=null;e!==null&&(u=Zl(e,i[Mr]));let c=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Jl(i,yv(n),null,l,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&pl(a,t,r.length-1),ed(i,d),i[t.index]=d}function kb(t,e,n,r){for(let i of t)e.mergedAttrs=Ml(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Dl(e,e.mergedAttrs,!0),n!==null&&rv(r,n,e))}function Fb(t,e,n,r,i,o){let s=fn(),a=i[z],u=qt(s,i);wv(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=Li(i,a,d,s);Or(h,i)}_v(a,i,s),u&&Or(u,i);let c=Li(i,a,s.directiveStart+s.componentOffset,s);if(t[cn]=i[cn]=c,o!==null)for(let l of o)l(c,e);return mv(a,s,t),c}function Lb(t,e,n,r){if(r)Xc(t,n,["ng-version","17.1.1"]);else{let{attrs:i,classes:o}=LC(e.selectors[0]);i&&Xc(t,n,i),o&&o.length>0&&nv(t,n,o.join(" "))}}function Vb(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function jb(){let t=fn();Ty(It()[z],t)}var LV=new RegExp(`^(\\d+)*(${ST}|${bT})*(.*)`);var Bb=()=>null;function Om(t,e){return Bb(t,e)}function km(t,e){return!e||e.firstChild===null||Ky(t)}function Ub(t,e,n,r=!0){let i=e[z];if(lT(i,e,t,n),r){let s=ll(n,t),a=e[$t],u=Ql(a,t[Fn]);u!==null&&uT(i,t[ct],a,e,u,s)}let o=e[qs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var ma=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$b;let t=e;return t})();function $b(){let t=fn();return zb(t,It())}var Hb=ma,xv=class extends Hb{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Xl(this._hostTNode,this._hostLView)}get injector(){return new On(this._hostTNode,this._hostLView)}get parentInjector(){let e=Bl(this._hostTNode,this._hostLView);if(Sy(e)){let n=Qs(e,this._hostLView),r=Ks(e),i=n[z].data[r+8];return new On(i,n)}else return new On(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Fm(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Xe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Om(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,km(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!O0(e),a;if(s)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let u=s?e:new Fr(un(e)),c=r||this.parentInjector;if(!o&&u.ngModule==null){let E=(s?c:this.parentInjector).get(He,null);E&&(o=E)}let l=un(u.componentType??{}),d=Om(this._lContainer,l?.id??null),h=d?.firstChild??null,f=u.create(c,i,h,o);return this.insertImpl(f.hostView,a,km(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(ZC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ae],c=new xv(u,u[ct],u[Ae]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ub(s,i,o,r),e.attachToViewContainerRef(),Vy(Kc(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Fm(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=cl(this._lContainer,n);r&&(Ys(Kc(this._lContainer),n),Jy(r[z],r))}detach(e){let n=this._adjustIndex(e,-1),r=cl(this._lContainer,n);return r&&Ys(Kc(this._lContainer),n)!=null?new kr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Fm(t){return t[Gs]}function Kc(t){return t[Gs]||(t[Gs]=[])}function zb(t,e){let n,r=e[t.index];return zt(r)?n=r:(n=lb(r,e,null,t),e[t.index]=n,ed(e,n)),Gb(n,e,t,r),new xv(n,t,e)}function qb(t,e){let n=t[$t],r=n.createComment(""),i=qt(e,t),o=Ql(n,i);return Js(n,o,r,yT(n,i),!1),r}var Gb=Wb;function Wb(t,e,n,r){if(t[Fn])return;let i;n.type&8?i=dn(r):i=qb(e,n),t[Fn]=i}function Lm(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Iv(t,n,o[s],s,r)}function Kb(t,e,n,r,i,o){let s=e.consts,a=vm(s,i),u=fv(e,t,2,r,a);return ZT(e,n,u,vm(s,o)),u.attrs!==null&&Dl(u,u.attrs,!1),u.mergedAttrs!==null&&Dl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ya(t,e,n,r){let i=It(),o=gy(),s=Rr+t,a=i[$t],u=o.firstCreatePass?Kb(s,o,i,e,n,r):o.data[s],c=Qb(o,i,u,a,e,t);i[s]=c;let l=UC(u);return Ll(u,!0),rv(a,c,u),(u.flags&32)!==32&&g0()&&ET(o,i,c,u),e0()===0&&Or(c,i),t0(),l&&(HT(o,i,u),mv(o,u,i)),r!==null&&zT(i,u),ya}function va(){let t=fn();yy()?a0():(t=t.parent,Ll(t,!1));let e=t;i0(e)&&o0(),n0();let n=gy();return n.firstCreatePass&&(Ty(n,t),sy(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&_0(e)&&Lm(n,e,It(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&E0(e)&&Lm(n,e,It(),e.stylesWithoutHost,!1),va}function dt(t,e,n,r){return ya(t,e,n,r),va(),dt}var Qb=(t,e,n,r,i,o)=>(m0(!0),Yy(r,i,p0()));var ra="en-US";var Yb=ra;function Zb(t){fC(t,"Expected localeId to be defined"),typeof t=="string"&&(Yb=t.toLowerCase().replace(/_/g,"-"))}function Gi(t){return!!t&&typeof t.then=="function"}function Mv(t){return!!t&&typeof t.subscribe=="function"}var hn=class{},Bi=class{};var ia=class extends hn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new na(this);let i=ty(e);this._bootstrapComponents=Wy(i.bootstrap),this._r3Injector=qy(e,n,[{provide:hn,useValue:this},{provide:fa,useValue:this.componentFactoryResolver},...r],Ue(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},oa=class extends Bi{constructor(e){super(),this.moduleType=e}create(e){return new ia(this.moduleType,e,[])}};function Xb(t,e,n){return new ia(t,e,n)}var bl=class extends hn{constructor(e){super(),this.componentFactoryResolver=new na(this),this.instance=null;let n=new Vi([...e.providers,{provide:hn,useValue:this},{provide:fa,useValue:this.componentFactoryResolver}],e.parent||ql(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function wa(t,e,n=null){return new bl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Jb=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=$y(!1,r.type),o=i.length>0?wa([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=T({token:e,providedIn:"environment",factory:()=>new e(b(He))});let t=e;return t})();function Rv(t){td("NgStandalone"),t.getStandaloneInjector=e=>e.get(Jb).getOrCreateStandaloneInjector(t)}var Ls=null;function eS(t){Ls!==null&&(t.defaultEncapsulation!==Ls.defaultEncapsulation||t.preserveWhitespaces!==Ls.preserveWhitespaces)||(Ls=t)}var _a=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Sl=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ea=(()=>{let e=class e{compileModuleSync(r){return new oa(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=ty(r),s=Wy(o.declarations).reduce((a,u)=>{let c=un(u);return c&&a.push(new Fr(c)),a},[]);return new Sl(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tS=new O("compilerOptions");var Ia=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new De(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var od=new O(""),Wi=new O(""),Da=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,sd||(nS(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ee.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(b(ee),b(Ca),b(Wi))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Ca=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return sd?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function nS(t){sd=t}var sd,Ta=new O("Application Initializer"),Nv=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=_(Ta,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Gi(s))r.push(s);else if(Mv(s)){let a=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ad=new O("appBootstrapListener");function rS(t,e,n){let r=new oa(n);return Promise.resolve(r)}function iS(){Mg(()=>{throw new A(600,!1)})}function oS(t){return t.isBoundToModule}function sS(t,e,n){try{let r=n();return Gi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function Pv(t,e){return Array.isArray(e)?e.reduce(Pv,t):I(I({},t),e)}var Lr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_(uv),this.afterRenderEffectManager=_(id),this.componentTypes=[],this.components=[],this.isStable=_(Ia).hasPendingTasks.pipe(H(r=>!r)),this._injector=_(He)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof ea;if(!this._injector.get(Nv).done){let f=!o&&ey(r),w=!1;throw new A(405,w)}let a;o?a=r:a=this._injector.get(fa).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=oS(a)?void 0:this._injector.get(hn),c=i||a.selector,l=a.create(lt.NULL,[],c,u),d=l.location.nativeElement,h=l.injector.get(od,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),$s(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new A(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{try{let r=this.afterRenderEffectManager.execute()}catch(r){this.internalErrorHandler(r)}this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;$s(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ad,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>$s(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new A(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $s(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Vm(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var aS=(()=>{let e=class e{constructor(){this.zone=_(ee),this.applicationRef=_(Lr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uS(t){return[{provide:ee,useFactory:t},{provide:Pr,multi:!0,useFactory:()=>{let e=_(aS,{optional:!0});return()=>e.initialize()}},{provide:Pr,multi:!0,useFactory:()=>{let e=_(dS);return()=>{e.initialize()}}},{provide:uv,useFactory:cS}]}function cS(){let t=_(ee),e=_(Dt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function lS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var dS=(()=>{let e=class e{constructor(){this.subscription=new pe,this.initialized=!1,this.zone=_(ee),this.pendingTasks=_(Ia)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ee.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ee.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hS(){return typeof $localize<"u"&&$localize.locale||ra}var ud=new O("LocaleId",{providedIn:"root",factory:()=>_(ud,j.Optional|j.SkipSelf)||hS()});var Ov=new O("PlatformDestroyListeners"),kv=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=Sb(i?.ngZone,lS({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=Xb(r.moduleType,this.injector,uS(()=>o)),a=s.injector.get(Dt,null);return o.runOutsideAngular(()=>{let u=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{$s(this._modules,s),u.unsubscribe()})}),sS(a,o,()=>{let u=s.injector.get(Nv);return u.runInitializers(),u.donePromise.then(()=>{let c=s.injector.get(ud,ra);return Zb(c||ra),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=Pv({},i);return rS(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Lr);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new A(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new A(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(Ov,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(b(lt))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Mi=null,Fv=new O("AllowMultipleToken");function fS(t){if(Mi&&!Mi.get(Fv,!1))throw new A(400,!1);iS(),Mi=t;let e=t.get(kv);return mS(t),e}function cd(t,e,n=[]){let r=`Platform: ${e}`,i=new O(r);return(o=[])=>{let s=Lv();if(!s||s.injector.get(Fv,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):fS(pS(a,r))}return gS(i)}}function pS(t=[],e){return lt.create({name:e,providers:[{provide:la,useValue:"platform"},{provide:Ov,useValue:new Set([()=>Mi=null])},...t]})}function gS(t){let e=Lv();if(!e)throw new A(401,!1);return e}function Lv(){return Mi?.get(kv)??null}function mS(t){t.get(Gl,null)?.forEach(n=>n())}var Vv=cd(null,"core",[]),jv=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(b(Lr))},e.\u0275mod=ut({type:e}),e.\u0275inj=at({});let t=e;return t})();function Bv(t){let e=un(t);if(!e)return null;let n=new Fr(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ld=null;function jn(){return ld}function qv(t){ld||(ld=t)}var ba=class{},Oe=new O("DocumentToken"),fd=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>_(ES),providedIn:"platform"});let t=e;return t})(),Gv=new O("Location Initialized"),ES=(()=>{let e=class e extends fd{constructor(){super(),this._doc=_(Oe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jn().getBaseHref(this._doc)}onPopState(r){let i=jn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=jn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function pd(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Uv(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Gt(t){return t&&t[0]!=="?"?"?"+t:t}var Bn=(()=>{let e=class e{historyGo(r){throw new Error("Not implemented")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>_(gd),providedIn:"root"});let t=e;return t})(),Wv=new O("appBaseHref"),gd=(()=>{let e=class e extends Bn{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??_(Oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return pd(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Gt(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Gt(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Gt(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(fd),b(Wv,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kv=(()=>{let e=class e extends Bn{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash;return i==null&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=pd(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Gt(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Gt(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(b(fd),b(Wv,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Vr=(()=>{let e=class e{constructor(r){this._subject=new Pe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=CS(Uv($v(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Gt(i))}normalize(r){return e.stripTrailingSlash(DS(this._basePath,$v(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Gt(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Gt(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Gt,e.joinWithSlash=pd,e.stripTrailingSlash=Uv,e.\u0275fac=function(i){return new(i||e)(b(Bn))},e.\u0275prov=T({token:e,factory:()=>IS(),providedIn:"root"});let t=e;return t})();function IS(){return new Vr(b(Bn))}function DS(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function $v(t){return t.replace(/\/index.html$/,"")}function CS(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Qv(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Yv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=at({});let t=e;return t})(),md="browser",TS="server";function bS(t){return t===md}function yd(t){return t===TS}var Zv=(()=>{let e=class e{};e.\u0275prov=T({token:e,providedIn:"root",factory:()=>bS(_(gn))?new dd(_(Oe),window):new hd});let t=e;return t})(),dd=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=SS(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function SS(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var hd=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Sa=class{};var _d=class extends ba{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ed=class t extends _d{static makeCurrent(){qv(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=xS();return n==null?null:MS(n)}resetBaseElement(){Ki=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qv(document.cookie,e)}},Ki=null;function xS(){return Ki=Ki||document.querySelector("base"),Ki?Ki.getAttribute("href"):null}function MS(t){return new URL(t,document.baseURI).pathname}var Id=class{addToWindow(e){$e.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new A(5103,!1);return o},$e.getAllAngularTestabilities=()=>e.getAllTestabilities(),$e.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=$e.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};$e.frameworkStabilizers||($e.frameworkStabilizers=[]),$e.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?jn().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},RS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Dd=new O("EventManagerPlugins"),tw=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new A(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(b(Dd),b(ee))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Aa=class{constructor(e){this._doc=e}},vd="ng-app-id",nw=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yd(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${vd}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(vd),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(vd,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(b(Oe),b(da),b(Wl,8),b(gn))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),wd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Td=/%COMP%/g,rw="%COMP%",NS=`_nghost-${rw}`,PS=`_ngcontent-${rw}`,OS=!0,kS=new O("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>OS});function FS(t){return PS.replace(Td,t)}function LS(t){return NS.replace(Td,t)}function iw(t,e){return e.map(n=>n.replace(Td,t))}var Xv=(()=>{let e=class e{constructor(r,i,o,s,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=yd(u),this.defaultRenderer=new Qi(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===_t.ShadowDom&&(i=re(I({},i),{encapsulation:_t.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof xa?o.applyToHost(r):o instanceof Yi&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case _t.Emulated:s=new xa(c,l,i,this.appId,d,a,u,h);break;case _t.ShadowDom:return new Cd(c,l,r,i,a,u,this.nonce,h);default:s=new Yi(c,l,i,d,a,u,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(b(tw),b(nw),b(da),b(kS),b(Oe),b(gn),b(ee),b(Wl))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Qi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(wd[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Jv(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Jv(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new A(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=wd[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=wd[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Vn.DashCase|Vn.Important)?e.style.setProperty(n,r,i&Vn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Vn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=jn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Jv(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Cd=class extends Qi{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=iw(i.id,i.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Yi=class extends Qi{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?iw(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xa=class extends Yi{constructor(e,n,r,i,o,s,a,u){let c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=FS(c),this.hostAttr=LS(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},VS=(()=>{let e=class e extends Aa{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(b(Oe))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),ew=["alt","control","meta","shift"],jS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},US=(()=>{let e=class e extends Aa{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jn().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),ew.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=jS[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),ew.forEach(a=>{if(a!==o){let u=BS[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(b(Oe))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function $S(){Ed.makeCurrent()}function HS(){return new Dt}function zS(){return Gy(document),document}var qS=[{provide:gn,useValue:md},{provide:Gl,useValue:$S,multi:!0},{provide:Oe,useFactory:zS,deps:[]}],ow=cd(Vv,"browser",qS),GS=new O(""),WS=[{provide:Wi,useClass:Id,deps:[]},{provide:od,useClass:Da,deps:[ee,Ca,Wi]},{provide:Da,useClass:Da,deps:[ee,Ca,Wi]}],KS=[{provide:la,useValue:"root"},{provide:Dt,useFactory:HS,deps:[]},{provide:Dd,useClass:VS,multi:!0,deps:[Oe,ee,gn]},{provide:Dd,useClass:US,multi:!0,deps:[Oe]},Xv,nw,tw,{provide:ji,useExisting:Xv},{provide:Sa,useClass:RS,deps:[]},[]],sw=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:da,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(b(GS,12))},e.\u0275mod=ut({type:e}),e.\u0275inj=at({providers:[...KS,...WS],imports:[Yv,jv]});let t=e;return t})();function QS(){return new bd(b(Oe))}var bd=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(b(Oe))},e.\u0275prov=T({token:e,factory:function(i){let o=null;return i?o=new i:o=QS(),o},providedIn:"root"});let t=e;return t})();var V="primary",ho=Symbol("RouteTitle"),Rd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Hr(t){return new Rd(t)}function YS(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ZS(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!bt(t[n],e[n]))return!1;return!0}function bt(t,e){let n=t?Nd(t):void 0,r=e?Nd(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!mw(t[i],e[i]))return!1;return!0}function Nd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function mw(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function yw(t){return t.length>0?t[t.length-1]:null}function wn(t){return Oc(t)?t:Gi(t)?ce(Promise.resolve(t)):R(t)}var XS={exact:ww,subset:_w},vw={exact:JS,subset:eA,ignored:()=>!0};function uw(t,e,n){return XS[n.paths](t.root,e.root,n.matrixParams)&&vw[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function JS(t,e){return bt(t,e)}function ww(t,e,n){if(!$n(t.segments,e.segments)||!Na(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!ww(t.children[r],e.children[r],n))return!1;return!0}function eA(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>mw(t[n],e[n]))}function _w(t,e,n){return Ew(t,e,e.segments,n)}function Ew(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!$n(i,n)||e.hasChildren()||!Na(i,n,r))}else if(t.segments.length===n.length){if(!$n(t.segments,n)||!Na(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!_w(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!$n(t.segments,i)||!Na(t.segments,i,r)||!t.children[V]?!1:Ew(t.children[V],e,o,r)}}function Na(t,e,n){return e.every((r,i)=>vw[n](t[i].parameters,r.parameters))}var mn=class{constructor(e=new Q([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Hr(this.queryParams),this._queryParamMap}toString(){return rA.serialize(this)}},Q=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pa(this)}},Un=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Hr(this.parameters),this._parameterMap}toString(){return Dw(this)}};function tA(t,e){return $n(t,e)&&t.every((n,r)=>bt(n.parameters,e[r].parameters))}function $n(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function nA(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===V&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==V&&(n=n.concat(e(i,r)))}),n}var fo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>new ro,providedIn:"root"});let t=e;return t})(),ro=class{parse(e){let n=new Od(e);return new mn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Zi(e.root,!0)}`,r=sA(e.queryParams),i=typeof e.fragment=="string"?`#${iA(e.fragment)}`:"";return`${n}${r}${i}`}},rA=new ro;function Pa(t){return t.segments.map(e=>Dw(e)).join("/")}function Zi(t,e){if(!t.hasChildren())return Pa(t);if(e){let n=t.children[V]?Zi(t.children[V],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==V&&r.push(`${i}:${Zi(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=nA(t,(r,i)=>i===V?[Zi(t.children[V],!1)]:[`${i}:${Zi(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[V]!=null?`${Pa(t)}/${n[0]}`:`${Pa(t)}/(${n.join("//")})`}}function Iw(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ma(t){return Iw(t).replace(/%3B/gi,";")}function iA(t){return encodeURI(t)}function Pd(t){return Iw(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Oa(t){return decodeURIComponent(t)}function cw(t){return Oa(t.replace(/\+/g,"%20"))}function Dw(t){return`${Pd(t.path)}${oA(t.parameters)}`}function oA(t){return Object.entries(t).map(([e,n])=>`;${Pd(e)}=${Pd(n)}`).join("")}function sA(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ma(n)}=${Ma(i)}`).join("&"):`${Ma(n)}=${Ma(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var aA=/^[^\/()?;#]+/;function Sd(t){let e=t.match(aA);return e?e[0]:""}var uA=/^[^\/()?;=#]+/;function cA(t){let e=t.match(uA);return e?e[0]:""}var lA=/^[^=?&#]+/;function dA(t){let e=t.match(lA);return e?e[0]:""}var hA=/^[^&#]+/;function fA(t){let e=t.match(hA);return e?e[0]:""}var Od=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Q([],{}):new Q([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[V]=new Q(e,n)),r}parseSegment(){let e=Sd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(e),new Un(Oa(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=cA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Sd(this.remaining);i&&(r=i,this.capture(r))}e[Oa(n)]=Oa(r)}parseQueryParam(e){let n=dA(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=fA(this.remaining);s&&(r=s,this.capture(r))}let i=cw(n),o=cw(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Sd(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new A(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=V);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[V]:new Q([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new A(4011,!1)}};function Cw(t){return t.segments.length>0?new Q([],{[V]:t}):t}function Tw(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Tw(i);if(r===V&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Q(t.segments,e);return pA(n)}function pA(t){if(t.numberOfChildren===1&&t.children[V]){let e=t.children[V];return new Q(t.segments.concat(e.segments),e.children)}return t}function zr(t){return t instanceof mn}function gA(t,e,n=null,r=null){let i=bw(t);return Sw(i,e,n,r)}function bw(t){let e;function n(o){let s={};for(let u of o.children){let c=n(u);s[u.outlet]=c}let a=new Q(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=Cw(r);return e??i}function Sw(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ad(i,i,i,n,r);let o=mA(e);if(o.toRoot())return Ad(i,i,new Q([],{}),n,r);let s=yA(o,i,t),a=s.processChildren?eo(s.segmentGroup,s.index,o.commands):xw(s.segmentGroup,s.index,o.commands);return Ad(i,s.segmentGroup,a,n,r)}function ka(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function io(t){return typeof t=="object"&&t!=null&&t.outlets}function Ad(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let s;t===e?s=n:s=Aw(t,e,n);let a=Cw(Tw(s));return new mn(a,o,i)}function Aw(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Aw(o,e,n)}),new Q(t.segments,r)}var Fa=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ka(r[0]))throw new A(4003,!1);let i=r.find(io);if(i&&i!==yw(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function mA(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Fa(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Fa(n,e,r)}var Ur=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function yA(t,e,n){if(t.isAbsolute)return new Ur(e,!0,0);if(!n)return new Ur(e,!1,NaN);if(n.parent===null)return new Ur(n,!0,0);let r=ka(t.commands[0])?0:1,i=n.segments.length-1+r;return vA(n,i,t.numberOfDoubleDots)}function vA(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new A(4005,!1);i=r.segments.length}return new Ur(r,!1,i-o)}function wA(t){return io(t[0])?t[0].outlets:{[V]:t}}function xw(t,e,n){if(t??=new Q([],{}),t.segments.length===0&&t.hasChildren())return eo(t,e,n);let r=_A(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Q(t.segments.slice(0,r.pathIndex),{});return o.children[V]=new Q(t.segments.slice(r.pathIndex),t.children),eo(o,0,i)}else return r.match&&i.length===0?new Q(t.segments,{}):r.match&&!t.hasChildren()?kd(t,e,n):r.match?eo(t,0,i):kd(t,e,n)}function eo(t,e,n){if(n.length===0)return new Q(t.segments,{});{let r=wA(n),i={};if(Object.keys(r).some(o=>o!==V)&&t.children[V]&&t.numberOfChildren===1&&t.children[V].segments.length===0){let o=eo(t.children[V],e,n);return new Q(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=xw(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Q(t.segments,i)}}function _A(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(io(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!dw(u,c,s))return o;r+=2}else{if(!dw(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function kd(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(io(o)){let u=EA(o.outlets);return new Q(r,u)}if(i===0&&ka(n[0])){let u=t.segments[e];r.push(new Un(u.path,lw(n[0]))),i++;continue}let s=io(o)?o.outlets[V]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ka(a)?(r.push(new Un(s,lw(a))),i+=2):(r.push(new Un(s,{})),i++)}return new Q(r,{})}function EA(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=kd(new Q([],{}),0,r))}),e}function lw(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function dw(t,e,n){return t==n.path&&bt(e,n.parameters)}var to="imperative",we=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(we||{}),et=class{constructor(e,n){this.id=e,this.url=n}},qr=class extends et{constructor(e,n,r="imperative",i=null){super(e,n),this.type=we.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Wt=class extends et{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=we.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Je=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Je||{}),La=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(La||{}),yn=class extends et{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=we.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},vn=class extends et{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=we.NavigationSkipped}},oo=class extends et{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=we.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Va=class extends et{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fd=class extends et{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ld=class extends et{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=we.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vd=class extends et{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jd=class extends et{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=we.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bd=class{constructor(e){this.route=e,this.type=we.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ud=class{constructor(e){this.route=e,this.type=we.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$d=class{constructor(e){this.snapshot=e,this.type=we.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hd=class{constructor(e){this.snapshot=e,this.type=we.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zd=class{constructor(e){this.snapshot=e,this.type=we.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qd=class{constructor(e){this.snapshot=e,this.type=we.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ja=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=we.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},so=class{},ao=class{constructor(e){this.url=e}};var Gd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new po,this.attachRef=null}},po=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Gd,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ba=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Wd(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Wd(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Kd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Kd(e,this._root).map(n=>n.value)}};function Wd(t,e){if(t===e.value)return e;for(let n of e.children){let r=Wd(t,n);if(r)return r}return null}function Kd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Kd(t,n);if(r.length)return r.unshift(e),r}return[]}var ze=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Br(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ua=class extends Ba{constructor(e,n){super(e),this.snapshot=n,ih(this,e)}toString(){return this.snapshot.toString()}};function Mw(t){let e=IA(t),n=new De([new Un("",{})]),r=new De({}),i=new De({}),o=new De({}),s=new De(""),a=new Gr(n,r,o,s,i,V,t,e.root);return a.snapshot=e.root,new Ua(new ze(a,[]),e)}function IA(t){let e={},n={},r={},i="",o=new uo([],e,r,i,n,V,t,null,{});return new $a("",new ze(o,[]))}var Gr=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(H(c=>c[ho]))??R(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(H(e=>Hr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(H(e=>Hr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),i?.data),t._resolvedData)}:r={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},i&&Nw(i)&&(r.resolve[ho]=i.title),r}var uo=class{get title(){return this.data?.[ho]}constructor(e,n,r,i,o,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},$a=class extends Ba{constructor(e,n){super(n),this.url=e,ih(this,n)}toString(){return Rw(this._root)}};function ih(t,e){e.value._routerState=t,e.children.forEach(n=>ih(t,n))}function Rw(t){let e=t.children.length>0?` { ${t.children.map(Rw).join(", ")} } `:"";return`${t.value}${e}`}function xd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,bt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),bt(e.params,n.params)||t.paramsSubject.next(n.params),ZS(e.url,n.url)||t.urlSubject.next(n.url),bt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Qd(t,e){let n=bt(t.params,e.params)&&tA(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Qd(t.parent,e.parent))}function Nw(t){return typeof t.title=="string"||t.title===null}var oh=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=V,this.activateEvents=new Pe,this.deactivateEvents=new Pe,this.attachEvents=new Pe,this.detachEvents=new Pe,this.parentContexts=_(po),this.location=_(ma),this.changeDetector=_(ga),this.environmentInjector=_(He),this.inputBinder=_(Wa,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Yd(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Rl({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ca]});let t=e;return t})(),Yd=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Gr?this.route:e===po?this.childContexts:this.parent.get(e,n)}},Wa=new O(""),hw=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Si([i.queryParams,i.params,i.data]).pipe(Qe(([s,a,u],c)=>(u=I(I(I({},s),a),u),c===0?R(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Bv(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function DA(t,e,n){let r=co(t,e._root,n?n._root:void 0);return new Ua(r,e)}function co(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=CA(t,e,n);return new ze(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>co(t,a)),s}}let r=TA(e.value),i=e.children.map(o=>co(t,o));return new ze(r,i)}}function CA(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return co(t,r,i);return co(t,r)})}function TA(t){return new Gr(new De(t.url),new De(t.params),new De(t.queryParams),new De(t.fragment),new De(t.data),t.outlet,t.component,t)}var Pw="ngNavigationCancelingError";function Ow(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=zr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kw(!1,Je.Redirect,e);return i.url=n,i.navigationBehaviorOptions=r,i}function kw(t,e,n){let r=new Error("NavigationCancelingError: "+(t||""));return r[Pw]=!0,r.cancellationCode=e,n&&(r.url=n),r}function bA(t){return Fw(t)&&zr(t.url)}function Fw(t){return t&&t[Pw]}var SA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ct({type:e,selectors:[["ng-component"]],standalone:!0,features:[Rv],decls:1,vars:0,template:function(i,o){i&1&&dt(0,"router-outlet")},dependencies:[oh],encapsulation:2});let t=e;return t})();function AA(t,e){return t.providers&&!t._injector&&(t._injector=wa(t.providers,e,`Route: ${t.path}`)),t._injector??e}function sh(t){let e=t.children&&t.children.map(sh),n=e?re(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==V&&(n.component=SA),n}function St(t){return t.outlet||V}function xA(t,e){let n=t.filter(r=>St(r)===e);return n.push(...t.filter(r=>St(r)!==e)),n}function go(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var MA=(t,e,n,r)=>H(i=>(new Zd(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Zd=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),xd(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Br(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Br(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Br(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Br(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new qd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(xd(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),xd(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=go(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Ha=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$r=class{constructor(e,n){this.component=e,this.route=n}};function RA(t,e,n){let r=t._root,i=e?e._root:null;return Xi(r,i,n,[r.value])}function NA(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Kr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!$m(t)?t:e.get(t):r}function Xi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Br(e);return t.children.forEach(s=>{PA(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>no(a,n.getContext(s),i)),i}function PA(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=OA(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ha(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Xi(t,e,a?a.children:null,r,i):Xi(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $r(a.outlet.component,s))}else s&&no(e,a,i),i.canActivateChecks.push(new Ha(r)),o.component?Xi(t,null,a?a.children:null,r,i):Xi(t,null,n,r,i);return i}function OA(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!$n(t.url,e.url);case"pathParamsOrQueryParamsChange":return!$n(t.url,e.url)||!bt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qd(t,e)||!bt(t.queryParams,e.queryParams);case"paramsChange":default:return!Qd(t,e)}}function no(t,e,n){let r=Br(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?no(s,e.children.getContext(o),n):no(s,null,n):no(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new $r(e.outlet.component,i)):n.canDeactivateChecks.push(new $r(null,i)):n.canDeactivateChecks.push(new $r(null,i))}function mo(t){return typeof t=="function"}function kA(t){return typeof t=="boolean"}function FA(t){return t&&mo(t.canLoad)}function LA(t){return t&&mo(t.canActivate)}function VA(t){return t&&mo(t.canActivateChild)}function jA(t){return t&&mo(t.canDeactivate)}function BA(t){return t&&mo(t.canMatch)}function Lw(t){return t instanceof Bt||t?.name==="EmptyError"}var Ra=Symbol("INITIAL_VALUE");function Wr(){return Qe(t=>Si(t.map(e=>e.pipe(Ut(1),Vc(Ra)))).pipe(H(e=>{for(let n of e)if(n!==!0){if(n===Ra)return Ra;if(n===!1||n instanceof mn)return n}return!0}),Ke(e=>e!==Ra),Ut(1)))}function UA(t,e){return de(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?R(re(I({},n),{guardsResult:!0})):$A(s,r,i,t).pipe(de(a=>a&&kA(a)?HA(r,o,t,e):R(a)),H(a=>re(I({},n),{guardsResult:a})))})}function $A(t,e,n,r){return ce(t).pipe(de(i=>KA(i.component,i.route,n,e,r)),yt(i=>i!==!0,!0))}function HA(t,e,n,r){return ce(e).pipe(Pn(i=>Er(qA(i.route.parent,r),zA(i.route,r),WA(t,i.path,n),GA(t,i.route,n))),yt(i=>i!==!0,!0))}function zA(t,e){return t!==null&&e&&e(new zd(t)),R(!0)}function qA(t,e){return t!==null&&e&&e(new $d(t)),R(!0)}function GA(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return R(!0);let i=r.map(o=>Os(()=>{let s=go(e)??n,a=Kr(o,s),u=LA(a)?a.canActivate(e,t):pn(s,()=>a(e,t));return wn(u).pipe(yt())}));return R(i).pipe(Wr())}function WA(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>NA(s)).filter(s=>s!==null).map(s=>Os(()=>{let a=s.guards.map(u=>{let c=go(s.node)??n,l=Kr(u,c),d=VA(l)?l.canActivateChild(r,t):pn(c,()=>l(r,t));return wn(d).pipe(yt())});return R(a).pipe(Wr())}));return R(o).pipe(Wr())}function KA(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return R(!0);let s=o.map(a=>{let u=go(e)??i,c=Kr(a,u),l=jA(c)?c.canDeactivate(t,e,n,r):pn(u,()=>c(t,e,n,r));return wn(l).pipe(yt())});return R(s).pipe(Wr())}function QA(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return R(!0);let o=i.map(s=>{let a=Kr(s,t),u=FA(a)?a.canLoad(e,n):pn(t,()=>a(e,n));return wn(u)});return R(o).pipe(Wr(),Vw(r))}function Vw(t){return Mc(ve(e=>{if(zr(e))throw Ow(t,e)}),H(e=>e===!0))}function YA(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return R(!0);let o=i.map(s=>{let a=Kr(s,t),u=BA(a)?a.canMatch(e,n):pn(t,()=>a(e,n));return wn(u)});return R(o).pipe(Wr(),Vw(r))}var lo=class{constructor(e){this.segmentGroup=e||null}},za=class extends Error{constructor(e){super(),this.urlTree=e}};function jr(t){return wr(new lo(t))}function ZA(t){return wr(new A(4e3,!1))}function XA(t){return wr(kw(!1,Je.GuardRejected))}var Xd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return R(r);if(i.numberOfChildren>1||!i.children[V])return ZA(e.redirectTo);i=i.children[V]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new za(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new mn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Q(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new A(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Jd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JA(t,e,n,r,i){let o=ah(t,e,n);return o.matched?(r=AA(e,r),YA(r,e,n,i).pipe(H(s=>s===!0?o:I({},Jd)))):R(o)}function ah(t,e,n){if(e.path==="**")return ex(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},Jd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||YS)(n,t,e);if(!i)return I({},Jd);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?I(I({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function ex(t){return{matched:!0,parameters:t.length>0?yw(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function fw(t,e,n,r){return n.length>0&&rx(t,n,r)?{segmentGroup:new Q(e,nx(r,new Q(n,t.children))),slicedSegments:[]}:n.length===0&&ix(t,n,r)?{segmentGroup:new Q(t.segments,tx(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Q(t.segments,t.children),slicedSegments:n}}function tx(t,e,n,r){let i={};for(let o of n)if(Ka(t,e,o)&&!r[St(o)]){let s=new Q([],{});i[St(o)]=s}return I(I({},r),i)}function nx(t,e){let n={};n[V]=e;for(let r of t)if(r.path===""&&St(r)!==V){let i=new Q([],{});n[St(r)]=i}return n}function rx(t,e,n){return n.some(r=>Ka(t,e,r)&&St(r)!==V)}function ix(t,e,n){return n.some(r=>Ka(t,e,r))}function Ka(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function ox(t,e,n,r){return St(t)!==r&&(r===V||!Ka(e,n,t))?!1:ah(e,t,n).matched}function sx(t,e,n){return e.length===0&&!t.children[n]}var eh=class{};function ax(t,e,n,r,i,o,s="emptyOnly"){return new th(t,e,n,r,i,s,o).recognize()}var ux=31,th=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Xd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new A(4002,`'${e.segmentGroup}'`)}recognize(){let e=fw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(H(n=>{let r=new uo([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,{},V,this.rootComponentType,null,{}),i=new ze(r,n),o=new $a("",i),s=gA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,V).pipe(tn(r=>{if(r instanceof za)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=rh(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(H(o=>o instanceof ze?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ce(i).pipe(Pn(o=>{let s=r.children[o],a=xA(n,o);return this.processSegmentGroup(e,a,s,o)}),Lc((o,s)=>(o.push(...s),o)),nn(null),Fc(),de(o=>{if(o===null)return jr(r);let s=jw(o);return cx(s),R(s)}))}processSegment(e,n,r,i,o,s){return ce(n).pipe(Pn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(tn(u=>{if(u instanceof lo)return R(null);throw u}))),yt(a=>!!a),tn(a=>{if(Lw(a))return sx(r,i,o)?R(new eh):jr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return ox(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):jr(i):jr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=ah(n,i,o);if(!a)return jr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ux&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(de(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=JA(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Qe(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Qe(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new uo(l,h,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,dx(r),St(r),r.component??r._loadedComponent??null,r,hx(r)),{segmentGroup:w,slicedSegments:E}=fw(n,l,d,u);if(E.length===0&&w.hasChildren())return this.processChildren(c,u,w).pipe(H(M=>M===null?null:new ze(f,M)));if(u.length===0&&E.length===0)return R(new ze(f,[]));let C=St(r)===o;return this.processSegment(c,u,w,E,C?V:o,!0).pipe(H(M=>new ze(f,M instanceof ze?[M]:[])))}))):jr(n)))}getChildConfig(e,n,r){return n.children?R({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?R({routes:n._loadedRoutes,injector:n._loadedInjector}):QA(e,n,r,this.urlSerializer).pipe(de(i=>i?this.configLoader.loadChildren(e,n).pipe(ve(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):XA(n))):R({routes:[],injector:e})}};function cx(t){t.sort((e,n)=>e.value.outlet===V?-1:n.value.outlet===V?1:e.value.outlet.localeCompare(n.value.outlet))}function lx(t){let e=t.value.routeConfig;return e&&e.path===""}function jw(t){let e=[],n=new Set;for(let r of t){if(!lx(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=jw(r.children);e.push(new ze(r.value,i))}return e.filter(r=>!n.has(r))}function dx(t){return t.data||{}}function hx(t){return t.resolve||{}}function fx(t,e,n,r,i,o){return de(s=>ax(t,e,n,r,s.extractedUrl,i,o).pipe(H(({state:a,tree:u})=>re(I({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function px(t,e){return de(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return R(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of Bw(u))s.add(c);let a=0;return ce(s).pipe(Pn(u=>o.has(u)?gx(u,r,t,e):(u.data=rh(u,u.parent,t).resolve,R(void 0))),ve(()=>a++),Ir(1),de(u=>a===s.size?R(n):We))})}function Bw(t){let e=t.children.map(n=>Bw(n)).flat();return[t,...e]}function gx(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Nw(i)&&(o[ho]=i.title),mx(o,t,e,r).pipe(H(s=>(t._resolvedData=s,t.data=rh(t,t.parent,n).resolve,null)))}function mx(t,e,n,r){let i=Nd(t);if(i.length===0)return R({});let o={};return ce(i).pipe(de(s=>yx(t[s],e,n,r).pipe(yt(),ve(a=>{o[s]=a}))),Ir(1),kc(o),tn(s=>Lw(s)?We:wr(s)))}function yx(t,e,n,r){let i=go(e)??r,o=Kr(t,i),s=o.resolve?o.resolve(e,n):pn(i,()=>o(e,n));return wn(s)}function Md(t){return Qe(e=>{let n=t(e);return n?ce(n).pipe(H(()=>e)):R(e)})}var Uw=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===V);return i}getResolvedTitleForRoute(r){return r.data[ho]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>_(vx),providedIn:"root"});let t=e;return t})(),vx=(()=>{let e=class e extends Uw{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(b(bd))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yo=new O("",{providedIn:"root",factory:()=>({})}),qa=new O("ROUTES"),uh=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_(Ea)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return R(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=wn(r.loadComponent()).pipe(H($w),ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ai(()=>{this.componentLoaders.delete(r)})),o=new vr(i,()=>new Be).pipe(yr());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return R({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=wx(i,this.compiler,r,this.onLoadEndListener).pipe(Ai(()=>{this.childrenLoaders.delete(i)})),a=new vr(s,()=>new Be).pipe(yr());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wx(t,e,n,r){return wn(t.loadChildren()).pipe(H($w),de(i=>i instanceof Bi||Array.isArray(i)?R(i):ce(e.compileModuleAsync(i))),H(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(qa,[],{optional:!0,self:!0}).flat()),{routes:s.map(sh),injector:o}}))}function _x(t){return t&&typeof t=="object"&&"default"in t}function $w(t){return _x(t)?t.default:t}var ch=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>_(Ex),providedIn:"root"});let t=e;return t})(),Ex=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hw=new O(""),zw=new O("");function Ix(t,e,n){let r=t.get(zw),i=t.get(Oe);return t.get(ee).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),Dx(t))),{onViewTransitionCreated:u}=r;return u&&pn(t,()=>u({transition:a,from:e,to:n})),s})}function Dx(t){return new Promise(e=>{rd(e,{injector:t})})}var lh=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Be,this.transitionAbortSubject=new Be,this.configLoader=_(uh),this.environmentInjector=_(He),this.urlSerializer=_(fo),this.rootContexts=_(po),this.location=_(Vr),this.inputBindingEnabled=_(Wa,{optional:!0})!==null,this.titleStrategy=_(Uw),this.options=_(yo,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_(ch),this.createViewTransition=_(Hw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>R(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Bd(o)),i=o=>this.events.next(new Ud(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(re(I(I({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new De({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:to,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ke(s=>s.id!==0),H(s=>re(I({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Qe(s=>{this.currentTransition=s;let a=!1,u=!1;return R(s).pipe(ve(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?re(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qe(c=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new vn(c.id,this.urlSerializer.serialize(c.rawUrl),h,La.IgnoredSameUrlNavigation)),c.resolve(null),We}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return R(c).pipe(Qe(h=>{let f=this.transitions?.getValue();return this.events.next(new qr(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?We:Promise.resolve(h)}),fx(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ve(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=re(I({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Va(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:w,restoredState:E,extras:C}=c,M=new qr(h,this.urlSerializer.serialize(f),w,E);this.events.next(M);let W=Mw(this.rootComponentType).snapshot;return this.currentTransition=s=re(I({},c),{targetSnapshot:W,urlAfterRedirects:f,extras:re(I({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,R(s)}else{let h="";return this.events.next(new vn(c.id,this.urlSerializer.serialize(c.extractedUrl),h,La.IgnoredByUrlHandlingStrategy)),c.resolve(null),We}}),ve(c=>{let l=new Fd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),H(c=>(this.currentTransition=s=re(I({},c),{guards:RA(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),UA(this.environmentInjector,c=>this.events.next(c)),ve(c=>{if(s.guardsResult=c.guardsResult,zr(c.guardsResult))throw Ow(this.urlSerializer,c.guardsResult);let l=new Ld(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ke(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Je.GuardRejected),!1)),Md(c=>{if(c.guards.canActivateChecks.length)return R(c).pipe(ve(l=>{let d=new Vd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Qe(l=>{let d=!1;return R(l).pipe(px(this.paramsInheritanceStrategy,this.environmentInjector),ve({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Je.NoDataFromResolver)}}))}),ve(l=>{let d=new jd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Md(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(ve(f=>{d.component=f}),H(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Si(l(c.targetSnapshot.root)).pipe(nn(null),Ut(1))}),Md(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?ce(d).pipe(H(()=>s)):R(s)}),H(c=>{let l=DA(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=re(I({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),ve(()=>{this.events.next(new so)}),MA(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ut(1),ve({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Wt(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),jc(this.transitionAbortSubject.pipe(ve(c=>{throw c}))),Ai(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Je.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),tn(c=>{if(u=!0,Fw(c))this.events.next(new yn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),bA(c)?this.events.next(new ao(c.url)):s.resolve(!1);else{this.events.next(new oo(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return We}))}))}cancelNavigationTransition(r,i,o){let s=new yn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Cx(t){return t!==to}var Tx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>_(bx),providedIn:"root"});let t=e;return t})(),nh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},bx=(()=>{let e=class e extends nh{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ul(e)))(o||e)}})(),e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:()=>_(Sx),providedIn:"root"});let t=e;return t})(),Sx=(()=>{let e=class e extends qw{constructor(){super(...arguments),this.location=_(Vr),this.urlSerializer=_(fo),this.options=_(yo,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_(ch),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Mw(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof qr)this.stateMemento=this.createStateMemento();else if(r instanceof vn)this.rawUrlTree=i.initialUrl;else if(r instanceof Va){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof so?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof yn&&(r.code===Je.GuardRejected||r.code===Je.NoDataFromResolver)?this.restoreHistory(i):r instanceof oo?this.restoreHistory(i,!0):r instanceof Wt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=I(I({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=I(I({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Ul(e)))(o||e)}})(),e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ji=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ji||{});function Gw(t,e){t.events.pipe(Ke(n=>n instanceof Wt||n instanceof yn||n instanceof oo||n instanceof vn),H(n=>n instanceof Wt||n instanceof vn?Ji.COMPLETE:(n instanceof yn?n.code===Je.Redirect||n.code===Je.SupersededByNewNavigation:!1)?Ji.REDIRECTING:Ji.FAILED),Ke(n=>n!==Ji.REDIRECTING),Ut(1)).subscribe(()=>{e()})}function Ax(t){throw t}var xx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Mx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=_(_a),this.stateManager=_(qw),this.options=_(yo,{optional:!0})||{},this.pendingTasks=_(Ia),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_(lh),this.urlSerializer=_(fo),this.location=_(Vr),this.urlHandlingStrategy=_(ch),this._events=new Be,this.errorHandler=this.options.errorHandler||Ax,this.navigated=!1,this.routeReuseStrategy=_(Tx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_(qa,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_(Wa,{optional:!0}),this.eventsSubscription=new pe,this.isNgZoneEnabled=_(ee)instanceof ee&&ee.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof yn&&i.code!==Je.Redirect&&i.code!==Je.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Wt)this.navigated=!0;else if(i instanceof ao){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Cx(o.source)};this.scheduleNavigation(a,to,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Nx(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),to,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=I({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(sh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=I(I({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=bw(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return Sw(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=zr(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,to,null,i)}navigate(r,i={skipLocationChange:!1}){return Rx(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=I({},xx):i===!1?o=I({},Mx):o=i,zr(r))return uw(this.currentUrlTree,r,o);let s=this.parseUrl(r);return uw(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return Gw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Rx(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new A(4008,!1)}function Nx(t){return!(t instanceof so)&&!(t instanceof ao)}var Ga=class{};var Px=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ke(r=>r instanceof Wt),Pn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=wa(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return ce(o).pipe(_r())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=R(null);let s=o.pipe(de(a=>a===null?R(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ce([s,a]).pipe(_r())}else return s})}};e.\u0275fac=function(i){return new(i||e)(b(Hn),b(Ea),b(He),b(Ga),b(uh))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ww=new O(""),Ox=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof qr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Wt?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof vn&&r.code===La.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ja&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ja(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){dv()},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function kx(t){return t.routerState.root}function vo(t,e){return{\u0275kind:t,\u0275providers:e}}function Fx(){let t=_(lt);return e=>{let n=t.get(Lr);if(e!==n.components[0])return;let r=t.get(Hn),i=t.get(Kw);t.get(dh)===1&&r.initialNavigation(),t.get(Qw,null,j.Optional)?.setUpPreloading(),t.get(Ww,null,j.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Kw=new O("",{factory:()=>new Be}),dh=new O("",{providedIn:"root",factory:()=>1});function Lx(){return vo(2,[{provide:dh,useValue:0},{provide:Ta,multi:!0,deps:[lt],useFactory:e=>{let n=e.get(Gv,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Hn),o=e.get(Kw);Gw(i,()=>{r(!0)}),e.get(lh).afterPreactivation=()=>(r(!0),o.closed?R(void 0):o),i.initialNavigation()}))}}])}function Vx(){return vo(3,[{provide:Ta,multi:!0,useFactory:()=>{let e=_(Hn);return()=>{e.setUpLocationChangeListener()}}},{provide:dh,useValue:2}])}var Qw=new O("");function jx(t){return vo(0,[{provide:Qw,useExisting:Px},{provide:Ga,useExisting:t}])}function Bx(){return vo(8,[hw,{provide:Wa,useExisting:hw}])}function Ux(t){let e=[{provide:Hw,useValue:Ix},{provide:zw,useValue:I({skipNextTransition:!!t?.skipInitialTransition},t)}];return vo(9,e)}var pw=new O("ROUTER_FORROOT_GUARD"),$x=[Vr,{provide:fo,useClass:ro},Hn,po,{provide:Gr,useFactory:kx,deps:[Hn]},uh,[]],hh=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[$x,[],{provide:qa,multi:!0,useValue:r},{provide:pw,useFactory:Gx,deps:[[Hn,new Hl,new jy]]},{provide:yo,useValue:i||{}},i?.useHash?zx():qx(),Hx(),i?.preloadingStrategy?jx(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Wx(i):[],i?.bindToComponentInputs?Bx().\u0275providers:[],i?.enableViewTransitions?Ux().\u0275providers:[],Kx()]}}static forChild(r){return{ngModule:e,providers:[{provide:qa,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(b(pw,8))},e.\u0275mod=ut({type:e}),e.\u0275inj=at({});let t=e;return t})();function Hx(){return{provide:Ww,useFactory:()=>{let t=_(Zv),e=_(ee),n=_(yo),r=_(lh),i=_(fo);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Ox(i,r,t,e,n)}}}function zx(){return{provide:Bn,useClass:Kv}}function qx(){return{provide:Bn,useClass:gd}}function Gx(t){return"guarded"}function Wx(t){return[t.initialNavigation==="disabled"?Vx().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Lx().\u0275providers:[]]}var gw=new O("");function Kx(){return[{provide:gw,useFactory:Fx},{provide:ad,multi:!0,useExisting:gw}]}var Yw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ct({type:e,selectors:[["app-recipe-form"]],decls:1,vars:0,consts:[[1,""]],template:function(i,o){i&1&&dt(0,"div",0)}});let t=e;return t})();var Zw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ct({type:e,selectors:[["app-add-recipe"]],decls:1,vars:0,template:function(i,o){i&1&&dt(0,"app-recipe-form")},dependencies:[Yw]});let t=e;return t})();var Xw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ct({type:e,selectors:[["app-recipe-list"]],decls:2,vars:0,template:function(i,o){i&1&&(ya(0,"div"),dt(1,"span"),va())}});let t=e;return t})();var Zx=[{path:"addRecipe",component:Zw},{path:"recipeList",component:Xw},{path:"**",redirectTo:"recipeList"}],Jw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=at({imports:[hh.forRoot(Zx),hh]});let t=e;return t})();var t_=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Xx=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},n_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,d=(o&3)<<4|a>>4,h=(a&15)<<2|c>>6,f=c&63;u||(f=64,s||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(t_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Xx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let c=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||d==null)throw new fh;let h=o<<2|a>>4;if(r.push(h),c!==64){let f=a<<4&240|c>>2;if(r.push(f),d!==64){let w=c<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},fh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Jx=function(t){let e=t_(t);return n_.encodeByteArray(e,!0)},wo=function(t){return Jx(t).replace(/\./g,"")},eM=function(t){try{return n_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var nM=()=>tM().__FIREBASE_DEFAULTS__,rM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&eM(t[1]);return e&&JSON.parse(e)},ph=()=>{try{return nM()||rM()||iM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oM=t=>{var e,n;return(n=(e=ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},r_=t=>{let e=oM(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gh=()=>{var t;return(t=ph())===null||t===void 0?void 0:t.config};var Qa=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function i_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wo(JSON.stringify(n)),wo(JSON.stringify(s)),""].join(".")}function Eo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sM(){var t;let e=(t=ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o_(){return!sM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ya(){try{return typeof indexedDB=="object"}catch{return!1}}function s_(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var aM="FirebaseError",Kt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aM,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_o.prototype.create)}},_o=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?uM(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Kt(i,a,r)}};function uM(t,e){return t.replace(cM,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var cM=/\{\$([^}]+)}/g;function Io(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(e_(o)&&e_(s)){if(!Io(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function e_(t){return t!==null&&typeof t=="object"}var dj=4*60*60*1e3;function Qr(t){return t&&t._delegate?t._delegate:t}var Qt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zn="[DEFAULT]";var mh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Qa;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dM(e))try{this.getOrInitializeService({instanceIdentifier:zn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=zn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return m(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=zn){return this.instances.has(e)}getOptions(e=zn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zn){return this.component?this.component.multipleInstances?e:zn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function lM(t){return t===zn?void 0:t}function dM(t){return t.instantiationMode==="EAGER"}var Za=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new mh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var hM=[],G=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(G||{}),fM={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},pM=G.INFO,gM={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},mM=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=gM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yr=class{constructor(e){this.name=e,this._logLevel=pM,this._logHandler=mM,this._userLogHandler=null,hM.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...e),this._logHandler(this,G.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...e),this._logHandler(this,G.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,G.INFO,...e),this._logHandler(this,G.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,G.WARN,...e),this._logHandler(this,G.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...e),this._logHandler(this,G.ERROR,...e)}};var yM=(t,e)=>e.some(n=>t instanceof n),a_,u_;function vM(){return a_||(a_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wM(){return u_||(u_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var c_=new WeakMap,vh=new WeakMap,l_=new WeakMap,yh=new WeakMap,_h=new WeakMap;function _M(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(At(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&c_.set(n,t)}).catch(()=>{}),_h.set(e,t),e}function EM(t){if(vh.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});vh.set(t,e)}var wh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||l_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return At(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function d_(t){wh=t(wh)}function IM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xa(this),e,...n);return l_.set(r,e.sort?e.sort():[e]),At(r)}:wM().includes(t)?function(...e){return t.apply(Xa(this),e),At(c_.get(this))}:function(...e){return At(t.apply(Xa(this),e))}}function DM(t){return typeof t=="function"?IM(t):(t instanceof IDBTransaction&&EM(t),yM(t,vM())?new Proxy(t,wh):t)}function At(t){if(t instanceof IDBRequest)return _M(t);if(yh.has(t))return yh.get(t);let e=DM(t);return e!==t&&(yh.set(t,e),_h.set(e,t)),e}var Xa=t=>_h.get(t);function f_(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=At(s);return r&&s.addEventListener("upgradeneeded",u=>{r(At(s.result),u.oldVersion,u.newVersion,At(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var CM=["get","getKey","getAll","getAllKeys","count"],TM=["put","add","delete","clear"],Eh=new Map;function h_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Eh.get(e))return Eh.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=TM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||CM.includes(n)))return;let o=function(s,...a){return m(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),c=u.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),i&&u.done]))[0]})};return Eh.set(e,o),o}d_(t=>re(I({},t),{get:(e,n,r)=>h_(e,n)||t.get(e,n,r),has:(e,n)=>!!h_(e,n)||t.has(e,n)}));var Dh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bM(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function bM(t){let e=t.getComponent();return e?.type==="VERSION"}var Ch="@firebase/app",p_="0.9.27";var qn=new Yr("@firebase/app"),SM="@firebase/app-compat",AM="@firebase/analytics-compat",xM="@firebase/analytics",MM="@firebase/app-check-compat",RM="@firebase/app-check",NM="@firebase/auth",PM="@firebase/auth-compat",OM="@firebase/database",kM="@firebase/database-compat",FM="@firebase/functions",LM="@firebase/functions-compat",VM="@firebase/installations",jM="@firebase/installations-compat",BM="@firebase/messaging",UM="@firebase/messaging-compat",$M="@firebase/performance",HM="@firebase/performance-compat",zM="@firebase/remote-config",qM="@firebase/remote-config-compat",GM="@firebase/storage",WM="@firebase/storage-compat",KM="@firebase/firestore",QM="@firebase/firestore-compat",YM="firebase",ZM="10.8.0";var Th="[DEFAULT]",XM={[Ch]:"fire-core",[SM]:"fire-core-compat",[xM]:"fire-analytics",[AM]:"fire-analytics-compat",[RM]:"fire-app-check",[MM]:"fire-app-check-compat",[NM]:"fire-auth",[PM]:"fire-auth-compat",[OM]:"fire-rtdb",[kM]:"fire-rtdb-compat",[FM]:"fire-fn",[LM]:"fire-fn-compat",[VM]:"fire-iid",[jM]:"fire-iid-compat",[BM]:"fire-fcm",[UM]:"fire-fcm-compat",[$M]:"fire-perf",[HM]:"fire-perf-compat",[zM]:"fire-rc",[qM]:"fire-rc-compat",[GM]:"fire-gcs",[WM]:"fire-gcs-compat",[KM]:"fire-fst",[QM]:"fire-fst-compat","fire-js":"fire-js",[YM]:"fire-js-all"};var Ja=new Map,bh=new Map;function JM(t,e){try{t.container.addComponent(e)}catch(n){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Do(t){let e=t.name;if(bh.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;bh.set(e,t);for(let n of Ja.values())JM(n,t);return!0}function v_(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var eR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},_n=new _o("app","Firebase",eR);var Sh=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}};var w_=ZM;function Mh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Th,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _n.create("bad-app-name",{appName:String(i)});if(n||(n=gh()),!n)throw _n.create("no-options");let o=Ja.get(i);if(o){if(Io(n,o.options)&&Io(r,o.config))return o;throw _n.create("duplicate-app",{appName:i})}let s=new Za(i);for(let u of bh.values())s.addComponent(u);let a=new Sh(n,r,s);return Ja.set(i,a),a}function __(t=Th){let e=Ja.get(t);if(!e&&t===Th&&gh())return Mh();if(!e)throw _n.create("no-app",{appName:t});return e}function En(t,e,n){var r;let i=(r=XM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(a.join(" "));return}Do(new Qt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var tR="firebase-heartbeat-database",nR=1,Co="firebase-heartbeat-store",Ih=null;function E_(){return Ih||(Ih=f_(tR,nR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Co)}catch(n){console.warn(n)}}}}).catch(t=>{throw _n.create("idb-open",{originalErrorMessage:t.message})})),Ih}function rR(t){return m(this,null,function*(){try{let n=(yield E_()).transaction(Co),r=yield n.objectStore(Co).get(I_(t));return yield n.done,r}catch(e){if(e instanceof Kt)qn.warn(e.message);else{let n=_n.create("idb-get",{originalErrorMessage:e?.message});qn.warn(n.message)}}})}function g_(t,e){return m(this,null,function*(){try{let r=(yield E_()).transaction(Co,"readwrite");yield r.objectStore(Co).put(e,I_(t)),yield r.done}catch(n){if(n instanceof Kt)qn.warn(n.message);else{let r=_n.create("idb-set",{originalErrorMessage:n?.message});qn.warn(r.message)}}})}function I_(t){return`${t.name}!${t.options.appId}`}var iR=1024,oR=30*24*60*60*1e3,Ah=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new xh(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return m(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=m_();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=oR}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return m(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=m_(),{heartbeatsToSend:r,unsentEntries:i}=sR(this._heartbeatsCache.heartbeats),o=wo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function m_(){return new Date().toISOString().substring(0,10)}function sR(t,e=iR){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),y_(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),y_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var xh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(this,null,function*(){return Ya()?s_().then(()=>!0).catch(()=>!1):!1})}read(){return m(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield rR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return g_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return m(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return g_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function y_(t){return wo(JSON.stringify({version:2,heartbeats:t})).length}function aR(t){Do(new Qt("platform-logger",e=>new Dh(e),"PRIVATE")),Do(new Qt("heartbeat",e=>new Ah(e),"PRIVATE")),En(Ch,p_,t),En(Ch,p_,"esm2017"),En("fire-js","")}aR("");var uR="firebase",cR="10.8.0";En(uR,cR,"app");var lR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ft={},y,Xh=Xh||{},N=lR||self;function fu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Vo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function dR(t){return Object.prototype.hasOwnProperty.call(t,Rh)&&t[Rh]||(t[Rh]=++hR)}var Rh="closure_uid_"+(1e9*Math.random()>>>0),hR=0;function fR(t,e,n){return t.call.apply(t.bind,arguments)}function pR(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function xe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xe=fR:xe=pR,xe.apply(null,arguments)}function eu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ee(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function In(){this.s=this.s,this.o=this.o}var gR=0;In.prototype.s=!1;In.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),gR!=0)&&dR(this)};In.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var k_=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Jh(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function D_(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(fu(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Me(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Me.prototype.h=function(){this.defaultPrevented=!0};var mR=function(){if(!N.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};N.addEventListener("test",n,e),N.removeEventListener("test",n,e)}catch{}return t}();function Mo(t){return/^[\s\xa0]*$/.test(t)}function pu(){var t=N.navigator;return t&&(t=t.userAgent)?t:""}function xt(t){return pu().indexOf(t)!=-1}function ef(t){return ef[" "](t),t}ef[" "]=function(){};function yR(t,e){var n=oN;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var vR=xt("Opera"),ei=xt("Trident")||xt("MSIE"),F_=xt("Edge"),Fh=F_||ei,L_=xt("Gecko")&&!(pu().toLowerCase().indexOf("webkit")!=-1&&!xt("Edge"))&&!(xt("Trident")||xt("MSIE"))&&!xt("Edge"),wR=pu().toLowerCase().indexOf("webkit")!=-1&&!xt("Edge");function V_(){var t=N.document;return t?t.documentMode:void 0}var Lh;e:{if(tu="",nu=function(){var t=pu();if(L_)return/rv:([^\);]+)(\)|;)/.exec(t);if(F_)return/Edge\/([\d\.]+)/.exec(t);if(ei)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(wR)return/WebKit\/(\S+)/.exec(t);if(vR)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),nu&&(tu=nu?nu[1]:""),ei&&(ru=V_(),ru!=null&&ru>parseFloat(tu))){Lh=String(ru);break e}Lh=tu}var tu,nu,ru,Vh;N.document&&ei?(Nh=V_(),Vh=Nh||parseInt(Lh,10)||void 0):Vh=void 0;var Nh,_R=Vh;function Ro(t,e){if(Me.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(L_){e:{try{ef(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ER[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ro.$.h.call(this)}}Ee(Ro,Me);var ER={2:"touch",3:"pen",4:"mouse"};Ro.prototype.h=function(){Ro.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var jo="closure_listenable_"+(1e6*Math.random()|0),IR=0;function DR(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++IR,this.fa=this.ia=!1}function gu(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function tf(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function CR(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function j_(t){let e={};for(let n in t)e[n]=t[n];return e}var C_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B_(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<C_.length;o++)n=C_[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mu(t){this.src=t,this.g={},this.h=0}mu.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Bh(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new DR(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function jh(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=k_(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(gu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Bh(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var nf="closure_lm_"+(1e6*Math.random()|0),Ph={};function U_(t,e,n,r,i){if(r&&r.once)return H_(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)U_(t,e[o],n,r,i);return null}return n=sf(n),t&&t[jo]?t.O(e,n,Vo(r)?!!r.capture:!!r,i):$_(t,e,n,!1,r,i)}function $_(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Vo(i)?!!i.capture:!!i,a=of(t);if(a||(t[nf]=a=new mu(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=TR(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)mR||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(q_(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function TR(){function t(n){return e.call(t.src,t.listener,n)}let e=bR;return t}function H_(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)H_(t,e[o],n,r,i);return null}return n=sf(n),t&&t[jo]?t.P(e,n,Vo(r)?!!r.capture:!!r,i):$_(t,e,n,!0,r,i)}function z_(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)z_(t,e[o],n,r,i);else r=Vo(r)?!!r.capture:!!r,n=sf(n),t&&t[jo]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Bh(o,n,r,i),-1<n&&(gu(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=of(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Bh(e,n,r,i)),(n=-1<t?e[t]:null)&&rf(n))}function rf(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[jo])jh(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(q_(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=of(e))?(jh(n,t),n.h==0&&(n.src=null,e[nf]=null)):gu(t)}}}function q_(t){return t in Ph?Ph[t]:Ph[t]="on"+t}function bR(t,e){if(t.fa)t=!0;else{e=new Ro(e,this);var n=t.listener,r=t.la||t.src;t.ia&&rf(t),t=n.call(r,e)}return t}function of(t){return t=t[nf],t instanceof mu?t:null}var Oh="__closure_events_fn_"+(1e9*Math.random()>>>0);function sf(t){return typeof t=="function"?t:(t[Oh]||(t[Oh]=function(e){return t.handleEvent(e)}),t[Oh])}function _e(){In.call(this),this.i=new mu(this),this.S=this,this.J=null}Ee(_e,In);_e.prototype[jo]=!0;_e.prototype.removeEventListener=function(t,e,n,r){z_(this,t,e,n,r)};function Te(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Me(e,t);else if(e instanceof Me)e.target=e.target||t;else{var i=e;e=new Me(r,t),B_(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=iu(s,r,!0,e)&&i}if(s=e.g=t,i=iu(s,r,!0,e)&&i,i=iu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=iu(s,r,!1,e)&&i}_e.prototype.N=function(){if(_e.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gu(n[r]);delete t.g[e],t.h--}}this.J=null};_e.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};_e.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function iu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&jh(t.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var af=N.JSON.stringify,Uh=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function SR(){var t=uf;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var $h=class{constructor(){this.h=this.g=null}add(e,n){let r=G_.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},G_=new Uh(()=>new Hh,t=>t.reset()),Hh=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function AR(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function xR(t){N.setTimeout(()=>{throw t},0)}var No,Po=!1,uf=new $h,W_=()=>{let t=N.Promise.resolve(void 0);No=()=>{t.then(MR)}},MR=()=>{for(var t;t=SR();){try{t.h.call(t.g)}catch(n){xR(n)}var e=G_;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Po=!1};function yu(t,e){_e.call(this),this.h=t||1,this.g=e||N,this.j=xe(this.qb,this),this.l=Date.now()}Ee(yu,_e);y=yu.prototype;y.ga=!1;y.T=null;y.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Te(this,"tick"),this.ga&&(cf(this),this.start()))}};y.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function cf(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}y.N=function(){yu.$.N.call(this),cf(this),delete this.g};function lf(t,e,n){if(typeof t=="function")n&&(t=xe(t,n));else if(t&&typeof t.handleEvent=="function")t=xe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:N.setTimeout(t,e||0)}function K_(t){t.g=lf(()=>{t.g=null,t.i&&(t.i=!1,K_(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var zh=class extends In{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:K_(this)}N(){super.N(),this.g&&(N.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Oo(t){In.call(this),this.h=t,this.g={}}Ee(Oo,In);var T_=[];function Q_(t,e,n,r){Array.isArray(n)||(n&&(T_[0]=n.toString()),n=T_);for(var i=0;i<n.length;i++){var o=U_(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Y_(t){tf(t.g,function(e,n){this.g.hasOwnProperty(n)&&rf(e)},t),t.g={}}Oo.prototype.N=function(){Oo.$.N.call(this),Y_(this)};Oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vu(){this.g=!0}vu.prototype.Ea=function(){this.g=!1};function RR(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+c+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function NR(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Xr(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+OR(t,n)+(r?" "+r:"")})}function PR(t,e){t.info(function(){return"TIMEOUT: "+e})}vu.prototype.info=function(){};function OR(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return af(n)}catch{return e}}var Qn={},b_=null;function wu(){return b_=b_||new _e}Qn.Ta="serverreachability";function Z_(t){Me.call(this,Qn.Ta,t)}Ee(Z_,Me);function ko(t){let e=wu();Te(e,new Z_(e))}Qn.STAT_EVENT="statevent";function X_(t,e){Me.call(this,Qn.STAT_EVENT,t),this.stat=e}Ee(X_,Me);function ke(t){let e=wu();Te(e,new X_(e,t))}Qn.Ua="timingevent";function J_(t,e){Me.call(this,Qn.Ua,t),this.size=e}Ee(J_,Me);function Bo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return N.setTimeout(function(){t()},e)}var _u={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},eE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function df(){}df.prototype.h=null;function S_(t){return t.h||(t.h=t.i())}function tE(){}var Uo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function hf(){Me.call(this,"d")}Ee(hf,Me);function ff(){Me.call(this,"c")}Ee(ff,Me);var qh;function Eu(){}Ee(Eu,df);Eu.prototype.g=function(){return new XMLHttpRequest};Eu.prototype.i=function(){return{}};qh=new Eu;function $o(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Oo(this),this.P=kR,t=Fh?125:void 0,this.V=new yu(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new nE}function nE(){this.i=null,this.g="",this.h=!1}var kR=45e3,rE={},Gh={};y=$o.prototype;y.setTimeout=function(t){this.P=t};function Wh(t,e,n){t.L=1,t.A=Du(Zt(e)),t.u=n,t.S=!0,iE(t,null)}function iE(t,e){t.G=Date.now(),Ho(t),t.B=Zt(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),hE(n.i,"t",r),t.o=0,n=t.l.J,t.h=new nE,t.g=PE(t.l,n?e:null,!t.u),0<t.O&&(t.M=new zh(xe(t.Pa,t,t.g),t.O)),Q_(t.U,t.g,"readystatechange",t.nb),e=t.I?j_(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ko(),RR(t.j,t.v,t.B,t.m,t.W,t.u)}y.nb=function(t){t=t.target;let e=this.M;e&&Mt(t)==3?e.l():this.Pa(t)};y.Pa=function(t){try{if(t==this.g)e:{let l=Mt(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Fh||this.g&&(this.h.h||this.g.ja()||R_(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?ko(3):ko(2)),Iu(this);var n=this.g.da();this.ca=n;t:if(oE(this)){var r=R_(this.g);t="";var i=r.length,o=Mt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),xo(this);var s="";break t}this.h.i=new N.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,NR(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mo(a)){var c=a;break t}}c=null}if(n=c)Xr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kh(this,n);else{this.i=!1,this.s=3,ke(12),Gn(this),xo(this);break e}}this.S?(sE(this,l,s),Fh&&this.i&&l==3&&(Q_(this.U,this.V,"tick",this.mb),this.V.start())):(Xr(this.j,this.m,s,null),Kh(this,s)),l==4&&Gn(this),this.i&&!this.J&&(l==4?xE(this.l,this):(this.i=!1,Ho(this)))}else nN(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Gn(this),xo(this)}}}catch{}finally{}};function oE(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function sE(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=FR(t,n),i==Gh){e==4&&(t.s=4,ke(14),r=!1),Xr(t.j,t.m,null,"[Incomplete Response]");break}else if(i==rE){t.s=4,ke(15),Xr(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Xr(t.j,t.m,i,null),Kh(t,i);oE(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,ke(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),wf(e),e.M=!0,ke(11))):(Xr(t.j,t.m,n,"[Invalid Chunked Response]"),Gn(t),xo(t))}y.mb=function(){if(this.g){var t=Mt(this.g),e=this.g.ja();this.o<e.length&&(Iu(this),sE(this,t,e),this.i&&t!=4&&Ho(this))}};function FR(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Gh:(n=Number(e.substring(n,r)),isNaN(n)?rE:(r+=1,r+n>e.length?Gh:(e=e.slice(r,r+n),t.o=r+n,e)))}y.cancel=function(){this.J=!0,Gn(this)};function Ho(t){t.Y=Date.now()+t.P,aE(t,t.P)}function aE(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Bo(xe(t.lb,t),e)}function Iu(t){t.C&&(N.clearTimeout(t.C),t.C=null)}y.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(PR(this.j,this.B),this.L!=2&&(ko(),ke(17)),Gn(this),this.s=2,xo(this)):aE(this,this.Y-t)};function xo(t){t.l.H==0||t.J||xE(t.l,t)}function Gn(t){Iu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,cf(t.V),Y_(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Kh(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Qh(n.i,t))){if(!t.K&&Qh(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)cu(n),bu(n);else break e;vf(n),ke(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Bo(xe(n.ib,n),6e3));if(1>=gE(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Wn(n,11)}else if((t.K||n.g==t)&&cu(n),!Mo(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let w=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var o=r.i;o.g||w.indexOf("spdy")==-1&&w.indexOf("quic")==-1&&w.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(pf(o,o.h),o.h=null))}if(r.F){let E=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,ne(r.I,r.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=NE(r,r.J?r.pa:null,r.Y),s.K){mE(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Iu(a),Ho(a)),r.g=s}else SE(r);0<n.j.length&&Su(n)}else c[0]!="stop"&&c[0]!="close"||Wn(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Wn(n,7):yf(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}ko(4)}catch{}}function LR(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(fu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function VR(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(fu(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function uE(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(fu(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=VR(t),r=LR(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var cE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jR(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Kn(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Kn){this.h=t.h,au(this,t.j),this.s=t.s,this.g=t.g,uu(this,t.m),this.l=t.l;var e=t.i,n=new Fo;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),A_(this,n),this.o=t.o}else t&&(e=String(t).match(cE))?(this.h=!1,au(this,e[1]||"",!0),this.s=So(e[2]||""),this.g=So(e[3]||"",!0),uu(this,e[4]),this.l=So(e[5]||"",!0),A_(this,e[6]||"",!0),this.o=So(e[7]||"")):(this.h=!1,this.i=new Fo(null,this.h))}Kn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ao(e,x_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ao(e,x_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ao(n,n.charAt(0)=="/"?$R:UR,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ao(n,zR)),t.join("")};function Zt(t){return new Kn(t)}function au(t,e,n){t.j=n?So(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function uu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function A_(t,e,n){e instanceof Fo?(t.i=e,qR(t.i,t.h)):(n||(e=Ao(e,HR)),t.i=new Fo(e,t.h))}function ne(t,e,n){t.i.set(e,n)}function Du(t){return ne(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function So(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ao(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,BR),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function BR(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var x_=/[#\/\?@]/g,UR=/[#\?:]/g,$R=/[#\?]/g,HR=/[#\?@]/g,zR=/#/g;function Fo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Dn(t){t.g||(t.g=new Map,t.h=0,t.i&&jR(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}y=Fo.prototype;y.add=function(t,e){Dn(this),this.i=null,t=ti(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function lE(t,e){Dn(t),e=ti(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function dE(t,e){return Dn(t),e=ti(t,e),t.g.has(e)}y.forEach=function(t,e){Dn(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};y.ta=function(){Dn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};y.Z=function(t){Dn(this);let e=[];if(typeof t=="string")dE(this,t)&&(e=e.concat(this.g.get(ti(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};y.set=function(t,e){return Dn(this),this.i=null,t=ti(this,t),dE(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};y.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function hE(t,e,n){lE(t,e),0<n.length&&(t.i=null,t.g.set(ti(t,e),Jh(n)),t.h+=n.length)}y.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function ti(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function qR(t,e){e&&!t.j&&(Dn(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(lE(this,r),hE(this,i,n))},t)),t.j=e}var GR=class{constructor(t,e){this.g=t,this.map=e}};function fE(t){this.l=t||WR,N.PerformanceNavigationTiming?(t=N.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(N.g&&N.g.Ka&&N.g.Ka()&&N.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var WR=10;function pE(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function gE(t){return t.h?1:t.g?t.g.size:0}function Qh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function pf(t,e){t.g?t.g.add(e):t.h=e}function mE(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}fE.prototype.cancel=function(){if(this.i=yE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function yE(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Jh(t.i)}var KR=class{stringify(t){return N.JSON.stringify(t,void 0)}parse(t){return N.JSON.parse(t,void 0)}};function QR(){this.g=new KR}function YR(t,e,n){let r=n||"";try{uE(t,function(i,o){let s=i;Vo(i)&&(s=af(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ZR(t,e){let n=new vu;if(N.Image){let r=new Image;r.onload=eu(ou,n,r,"TestLoadImage: loaded",!0,e),r.onerror=eu(ou,n,r,"TestLoadImage: error",!1,e),r.onabort=eu(ou,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=eu(ou,n,r,"TestLoadImage: timeout",!1,e),N.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ou(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function zo(t){this.l=t.ec||null,this.j=t.ob||!1}Ee(zo,df);zo.prototype.g=function(){return new Cu(this.l,this.j)};zo.prototype.i=function(t){return function(){return t}}({});function Cu(t,e){_e.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=gf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ee(Cu,_e);var gf=0;y=Cu.prototype;y.open=function(t,e){if(this.readyState!=gf)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Lo(this)};y.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||N).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qo(this)),this.readyState=gf};y.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof N.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vE(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function vE(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}y.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qo(this):Lo(this),this.readyState==3&&vE(this)}};y.Za=function(t){this.g&&(this.response=this.responseText=t,qo(this))};y.Ya=function(t){this.g&&(this.response=t,qo(this))};y.ka=function(){this.g&&qo(this)};function qo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Lo(t)}y.setRequestHeader=function(t,e){this.v.append(t,e)};y.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};y.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Lo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var XR=N.JSON.parse;function ie(t){_e.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wE,this.L=this.M=!1}Ee(ie,_e);var wE="",JR=/^https?$/i,eN=["POST","PUT"];y=ie.prototype;y.Oa=function(t){this.M=t};y.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():qh.g(),this.C=this.u?S_(this.u):S_(qh),this.g.onreadystatechange=xe(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){M_(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=N.FormData&&t instanceof N.FormData,!(0<=k_(eN,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{IE(this),0<this.B&&((this.L=tN(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xe(this.ua,this)):this.A=lf(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){M_(this,o)}};function tN(t){return ei&&typeof t.timeout=="number"&&t.ontimeout!==void 0}y.ua=function(){typeof Xh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Te(this,"timeout"),this.abort(8))};function M_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,_E(t),Tu(t)}function _E(t){t.F||(t.F=!0,Te(t,"complete"),Te(t,"error"))}y.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Te(this,"complete"),Te(this,"abort"),Tu(this))};y.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tu(this,!0)),ie.$.N.call(this)};y.La=function(){this.s||(this.G||this.v||this.l?EE(this):this.kb())};y.kb=function(){EE(this)};function EE(t){if(t.h&&typeof Xh<"u"&&(!t.C[1]||Mt(t)!=4||t.da()!=2)){if(t.v&&Mt(t)==4)lf(t.La,0,t);else if(Te(t,"readystatechange"),Mt(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(cE)[1]||null;!i&&N.self&&N.self.location&&(i=N.self.location.protocol.slice(0,-1)),r=!JR.test(i?i.toLowerCase():"")}n=r}if(n)Te(t,"complete"),Te(t,"success");else{t.m=6;try{var o=2<Mt(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",_E(t)}}finally{Tu(t)}}}}function Tu(t,e){if(t.g){IE(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Te(t,"ready");try{n.onreadystatechange=r}catch{}}}function IE(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(N.clearTimeout(t.A),t.A=null)}y.isActive=function(){return!!this.g};function Mt(t){return t.g?t.g.readyState:0}y.da=function(){try{return 2<Mt(this)?this.g.status:-1}catch{return-1}};y.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};y.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),XR(e)}};function R_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case wE:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function nN(t){let e={};t=(t.g&&2<=Mt(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Mo(t[r]))continue;var n=AR(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}CR(e,function(r){return r.join(", ")})}y.Ia=function(){return this.m};y.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function DE(t){let e="";return tf(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function mf(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=DE(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ne(t,e,n))}function To(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function CE(t){this.Ga=0,this.j=[],this.l=new vu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=To("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=To("baseRetryDelayMs",5e3,t),this.hb=To("retryDelaySeedMs",1e4,t),this.eb=To("forwardChannelMaxRetries",2,t),this.xa=To("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new fE(t&&t.concurrentRequestLimit),this.Ja=new QR,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}y=CE.prototype;y.ra=8;y.H=1;function yf(t){if(TE(t),t.H==3){var e=t.W++,n=Zt(t.I);if(ne(n,"SID",t.K),ne(n,"RID",e),ne(n,"TYPE","terminate"),Go(t,n),e=new $o(t,t.l,e),e.L=2,e.A=Du(Zt(n)),n=!1,N.navigator&&N.navigator.sendBeacon)try{n=N.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&N.Image&&(new Image().src=e.A,n=!0),n||(e.g=PE(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ho(e)}RE(t)}function bu(t){t.g&&(wf(t),t.g.cancel(),t.g=null)}function TE(t){bu(t),t.u&&(N.clearTimeout(t.u),t.u=null),cu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&N.clearTimeout(t.m),t.m=null)}function Su(t){if(!pE(t.i)&&!t.m){t.m=!0;var e=t.Na;No||W_(),Po||(No(),Po=!0),uf.add(e,t),t.C=0}}function rN(t,e){return gE(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Bo(xe(t.Na,t,e),ME(t,t.C)),t.C++,!0)}y.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new $o(this,this.l,t),o=this.s;if(this.U&&(o?(o=j_(o),B_(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=bE(this,i,e),n=Zt(this.I),ne(n,"RID",t),ne(n,"CVER",22),this.F&&ne(n,"X-HTTP-Session-Id",this.F),Go(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(DE(o)))+"&"+e:this.o&&mf(n,this.o,o)),pf(this.i,i),this.bb&&ne(n,"TYPE","init"),this.P?(ne(n,"$req",e),ne(n,"SID","null"),i.aa=!0,Wh(i,n,null)):Wh(i,n,e),this.H=2}}else this.H==3&&(t?N_(this,t):this.j.length==0||pE(this.i)||N_(this))};function N_(t,e){var n;e?n=e.m:n=t.W++;let r=Zt(t.I);ne(r,"SID",t.K),ne(r,"RID",n),ne(r,"AID",t.V),Go(t,r),t.o&&t.s&&mf(r,t.o,t.s),n=new $o(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=bE(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),pf(t.i,n),Wh(n,r,e)}function Go(t,e){t.na&&tf(t.na,function(n,r){ne(e,r,n)}),t.h&&uE({},function(n,r){ne(e,r,n)})}function bE(t,e,n){n=Math.min(t.j.length,n);var r=t.h?xe(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{YR(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function SE(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;No||W_(),Po||(No(),Po=!0),uf.add(e,t),t.A=0}}function vf(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Bo(xe(t.Ma,t),ME(t,t.A)),t.A++,!0)}y.Ma=function(){if(this.u=null,AE(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Bo(xe(this.jb,this),t)}};y.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ke(10),bu(this),AE(this))};function wf(t){t.B!=null&&(N.clearTimeout(t.B),t.B=null)}function AE(t){t.g=new $o(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Zt(t.wa);ne(e,"RID","rpc"),ne(e,"SID",t.K),ne(e,"AID",t.V),ne(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ne(e,"TO",t.qa),ne(e,"TYPE","xmlhttp"),Go(t,e),t.o&&t.s&&mf(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Du(Zt(e)),n.u=null,n.S=!0,iE(n,t)}y.ib=function(){this.v!=null&&(this.v=null,bu(this),vf(this),ke(19))};function cu(t){t.v!=null&&(N.clearTimeout(t.v),t.v=null)}function xE(t,e){var n=null;if(t.g==e){cu(t),wf(t),t.g=null;var r=2}else if(Qh(t.i,e))n=e.F,mE(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=wu(),Te(r,new J_(r,n)),Su(t)}else SE(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&rN(t,e)||r==2&&vf(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Wn(t,5);break;case 4:Wn(t,10);break;case 3:Wn(t,6);break;default:Wn(t,2)}}}function ME(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Wn(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=xe(t.pb,t);n||(n=new Kn("//www.google.com/images/cleardot.gif"),N.location&&N.location.protocol=="http"||au(n,"https"),Du(n)),ZR(n.toString(),r)}else ke(2);t.H=0,t.h&&t.h.za(e),RE(t),TE(t)}y.pb=function(t){t?(this.l.info("Successfully pinged google.com"),ke(2)):(this.l.info("Failed to ping google.com"),ke(1))};function RE(t){if(t.H=0,t.ma=[],t.h){let e=yE(t.i);(e.length!=0||t.j.length!=0)&&(D_(t.ma,e),D_(t.ma,t.j),t.i.i.length=0,Jh(t.j),t.j.length=0),t.h.ya()}}function NE(t,e,n){var r=n instanceof Kn?Zt(n):new Kn(n);if(r.g!="")e&&(r.g=e+"."+r.g),uu(r,r.m);else{var i=N.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Kn(null);r&&au(o,r),e&&(o.g=e),i&&uu(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&ne(r,n,e),ne(r,"VER",t.ra),Go(t,r),r}function PE(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new ie(new zo({ob:n})):new ie(t.va),e.Oa(t.J),e}y.isActive=function(){return!!this.h&&this.h.isActive(this)};function OE(){}y=OE.prototype;y.Ba=function(){};y.Aa=function(){};y.za=function(){};y.ya=function(){};y.isActive=function(){return!0};y.Va=function(){};function lu(){if(ei&&!(10<=Number(_R)))throw Error("Environmental error: no available transport.")}lu.prototype.g=function(t,e){return new qe(t,e)};function qe(t,e){_e.call(this),this.g=new CE(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Mo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mo(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ni(this)}Ee(qe,_e);qe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;ke(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=NE(t,null,t.Y),Su(t)};qe.prototype.close=function(){yf(this.g)};qe.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=af(t),t=n);e.j.push(new GR(e.fb++,t)),e.H==3&&Su(e)};qe.prototype.N=function(){this.g.h=null,delete this.j,yf(this.g),delete this.g,qe.$.N.call(this)};function kE(t){hf.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ee(kE,hf);function FE(){ff.call(this),this.status=1}Ee(FE,ff);function ni(t){this.g=t}Ee(ni,OE);ni.prototype.Ba=function(){Te(this.g,"a")};ni.prototype.Aa=function(t){Te(this.g,new kE(t))};ni.prototype.za=function(t){Te(this.g,new FE)};ni.prototype.ya=function(){Te(this.g,"b")};function iN(){this.blockSize=-1}function ht(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ee(ht,iN);ht.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function kh(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}ht.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)kh(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){kh(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){kh(this,r),i=0;break}}this.h=i,this.i+=e};ht.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Y(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var oN={};function _f(t){return-128<=t&&128>t?yR(t,function(e){return new Y([e|0],0>e?-1:0)}):new Y([t|0],0>t?-1:0)}function Rt(t){if(isNaN(t)||!isFinite(t))return Jr;if(0>t)return Ce(Rt(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Yh;return new Y(e,0)}function LE(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ce(LE(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Rt(Math.pow(e,8)),r=Jr,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Rt(Math.pow(e,o)),r=r.R(o).add(Rt(s))):(r=r.R(n),r=r.add(Rt(s)))}return r}var Yh=4294967296,Jr=_f(0),Zh=_f(1),P_=_f(16777216);y=Y.prototype;y.ea=function(){if(tt(this))return-Ce(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Yh+r)*e,e*=Yh}return t};y.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Yt(this))return"0";if(tt(this))return"-"+Ce(this).toString(t);for(var e=Rt(Math.pow(t,6)),n=this,r="";;){var i=hu(n,e).g;n=du(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Yt(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};y.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Yt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function tt(t){return t.h==-1}y.X=function(t){return t=du(this,t),tt(t)?-1:Yt(t)?0:1};function Ce(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Y(n,~t.h).add(Zh)}y.abs=function(){return tt(this)?Ce(this):this};y.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Y(n,n[n.length-1]&-2147483648?-1:0)};function du(t,e){return t.add(Ce(e))}y.R=function(t){if(Yt(this)||Yt(t))return Jr;if(tt(this))return tt(t)?Ce(this).R(Ce(t)):Ce(Ce(this).R(t));if(tt(t))return Ce(this.R(Ce(t)));if(0>this.X(P_)&&0>t.X(P_))return Rt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=s*u,su(n,2*r+2*i),n[2*r+2*i+1]+=o*u,su(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,su(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,su(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Y(n,0)};function su(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function bo(t,e){this.g=t,this.h=e}function hu(t,e){if(Yt(e))throw Error("division by zero");if(Yt(t))return new bo(Jr,Jr);if(tt(t))return e=hu(Ce(t),e),new bo(Ce(e.g),Ce(e.h));if(tt(e))return e=hu(t,Ce(e)),new bo(Ce(e.g),e.h);if(30<t.g.length){if(tt(t)||tt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Zh,r=e;0>=r.X(t);)n=O_(n),r=O_(r);var i=Zr(n,1),o=Zr(r,1);for(r=Zr(r,2),n=Zr(n,2);!Yt(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Zr(r,1),n=Zr(n,1)}return e=du(t,i.R(e)),new bo(i,e)}for(i=Jr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Rt(n),s=o.R(e);tt(s)||0<s.X(t);)n-=r,o=Rt(n),s=o.R(e);Yt(o)&&(o=Zh),i=i.add(o),t=du(t,s)}return new bo(i,t)}y.gb=function(t){return hu(this,t).h};y.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Y(n,this.h&t.h)};y.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Y(n,this.h|t.h)};y.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Y(n,this.h^t.h)};function O_(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Y(n,t.h)}function Zr(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Y(i,t.h)}lu.prototype.createWebChannel=lu.prototype.g;qe.prototype.send=qe.prototype.u;qe.prototype.open=qe.prototype.m;qe.prototype.close=qe.prototype.close;_u.NO_ERROR=0;_u.TIMEOUT=8;_u.HTTP_ERROR=6;eE.COMPLETE="complete";tE.EventType=Uo;Uo.OPEN="a";Uo.CLOSE="b";Uo.ERROR="c";Uo.MESSAGE="d";_e.prototype.listen=_e.prototype.O;ie.prototype.listenOnce=ie.prototype.P;ie.prototype.getLastError=ie.prototype.Sa;ie.prototype.getLastErrorCode=ie.prototype.Ia;ie.prototype.getStatus=ie.prototype.da;ie.prototype.getResponseJson=ie.prototype.Wa;ie.prototype.getResponseText=ie.prototype.ja;ie.prototype.send=ie.prototype.ha;ie.prototype.setWithCredentials=ie.prototype.Oa;ht.prototype.digest=ht.prototype.l;ht.prototype.reset=ht.prototype.reset;ht.prototype.update=ht.prototype.j;Y.prototype.add=Y.prototype.add;Y.prototype.multiply=Y.prototype.R;Y.prototype.modulo=Y.prototype.gb;Y.prototype.compare=Y.prototype.X;Y.prototype.toNumber=Y.prototype.ea;Y.prototype.toString=Y.prototype.toString;Y.prototype.getBits=Y.prototype.D;Y.fromNumber=Rt;Y.fromString=LE;var VE=ft.createWebChannelTransport=function(){return new lu},jE=ft.getStatEventTarget=function(){return wu()},Au=ft.ErrorCode=_u,BE=ft.EventType=eE,UE=ft.Event=Qn,Ef=ft.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Oj=ft.FetchXmlHttpFactory=zo,Wo=ft.WebChannel=tE,$E=ft.XhrIo=ie,HE=ft.Md5=ht,Yn=ft.Integer=Y;var zE="@firebase/firestore";var Ie=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ie.UNAUTHENTICATED=new Ie(null),Ie.GOOGLE_CREDENTIALS=new Ie("google-credentials-uid"),Ie.FIRST_PARTY=new Ie("first-party-uid"),Ie.MOCK_USER=new Ie("mock-user");var Ii="10.8.0";var nr=new Yr("@firebase/firestore");function Ko(){return nr.logLevel}function v(t,...e){if(nr.logLevel<=G.DEBUG){let n=e.map(rg);nr.debug(`Firestore (${Ii}): ${t}`,...n)}}function Lt(t,...e){if(nr.logLevel<=G.ERROR){let n=e.map(rg);nr.error(`Firestore (${Ii}): ${t}`,...n)}}function ci(t,...e){if(nr.logLevel<=G.WARN){let n=e.map(rg);nr.warn(`Firestore (${Ii}): ${t}`,...n)}}function rg(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function x(t="Unexpected state"){let e=`FIRESTORE (${Ii}) INTERNAL ASSERTION FAILED: `+t;throw Lt(e),new Error(e)}function te(t,e){t||x()}function F(t,e){return t}var p={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=class extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Pu=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},bf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ie.UNAUTHENTICATED))}shutdown(){}},Sf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Af=class{constructor(e){this.t=e,this.currentUser=Ie.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new nt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>m(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{v("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(v("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nt)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(v("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(te(typeof r.accessToken=="string"),new Pu(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string"),new Ie(e)}},xf=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ie.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Mf=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xf(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ie.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Rf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Nf=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&v("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,v("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{v("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):v("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(te(typeof n.token=="string"),this.R=n.token,new Rf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function sN(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ou=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=sN(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function K(t,e){return t<e?-1:t>e?1:0}function li(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var be=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new D(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var k=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new be(0,0))}static max(){return new t(new be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ku=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&x(),r===void 0?r=e.length-n:r>e.length-n&&x(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},se=class t extends ku{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new D(p.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},aN=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ge=class t extends ku{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return aN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new D(p.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new D(p.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new D(p.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new D(p.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var S=class t{constructor(e){this.path=e}static fromPath(e){return new t(se.fromString(e))}static fromName(e){return new t(se.fromString(e).popFirst(5))}static empty(){return new t(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new se(e.slice()))}};var Pf=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Pf.UNKNOWN_ID=-1;function uN(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=k.fromTimestamp(r===1e9?new be(n+1,0):new be(n,r));return new rr(i,S.empty(),e)}function cN(t){return new rr(t.readTime,t.key,-1)}var rr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(k.min(),S.empty(),-1)}static max(){return new t(k.max(),S.empty(),-1)}};function lN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=S.comparator(t.documentKey,e.documentKey),n!==0?n:K(t.largestBatchId,e.largestBatchId))}var dN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Of=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ds(t){return m(this,null,function*(){if(t.code!==p.FAILED_PRECONDITION||t.message!==dN)throw t;v("LocalStore","Unexpectedly lost primary lease")})}var g=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&x(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let c=u;n(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var kf=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new nt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new tr(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=ig(r.target.error);this.V.reject(new tr(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new tr(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(v("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Lf(n)}},Fu=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Eo())===12.2&&Lt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return v("SimpleDb","Removing database:",e),Zn(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ya())return!1;if(t.C())return!0;let e=Eo(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return m(this,null,function*(){return this.db||(v("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new tr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new D(p.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new D(p.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new tr(e,s))},i.onupgradeneeded=o=>{v("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{v("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return m(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=kf.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),g.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&s<3;if(v("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Ff=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Zn(this.k.delete())}},tr=class extends D{constructor(e,n){super(p.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function hs(t){return t.name==="IndexedDbTransactionError"}var Lf=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(v("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(v("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zn(r)}add(e){return v("SimpleDb","ADD",this.store.name,e,e),Zn(this.store.add(e))}get(e){return Zn(this.store.get(e)).next(n=>(n===void 0&&(n=null),v("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return v("SimpleDb","DELETE",this.store.name,e),Zn(this.store.delete(e))}count(){return v("SimpleDb","COUNT",this.store.name),Zn(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new g((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new g((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){v("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new g((r,i)=>{n.onerror=o=>{let s=ig(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new g((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Ff(a),c=n(a.primaryKey,a.value,u);if(c instanceof g){let l=c.catch(d=>(u.done(),g.reject(d)));r.push(l)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>g.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Zn(t){return new g((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=ig(r.target.error);n(i)}})}var qE=!1;function ig(t){let e=Fu.S(Eo());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new D("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qE||(qE=!0,setTimeout(()=>{throw r},0)),r}}return t}var vI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function hc(t){return t==null}function es(t){return t===0&&1/t==-1/0}function hN(t){return typeof t=="number"&&Number.isInteger(t)&&!es(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var fN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qj=[...fN,"documentOverlays"],pN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gN=pN,Gj=[...gN,"indexConfiguration","indexState","indexEntries"];function GE(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Di(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wI(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ae=class t{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new si(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new si(this.root,e,this.comparator,!1)}getReverseIterator(){return new si(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new si(this.root,e,this.comparator,!0)}},si=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ot=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw x();let e=this.left.check();if(e!==this.right.check())throw x();return e+(this.isRed()?0:1)}};Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw x()}get value(){throw x()}get color(){throw x()}get left(){throw x()}get right(){throw x()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ne=class t{constructor(e){this.comparator=e,this.data=new ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lu(this.data.getIterator())}getIteratorFrom(e){return new Lu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Lu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pt=class t{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ne(Ge.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return li(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Vu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Fe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Vu("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Fe.EMPTY_BYTE_STRING=new Fe("");var mN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bn(t){if(te(!!t),typeof t=="string"){let e=0,n=mN.exec(t);if(te(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:oe(t.seconds),nanos:oe(t.nanos)}}function oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sn(t){return typeof t=="string"?Fe.fromBase64String(t):Fe.fromUint8Array(t)}function og(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sg(t){let e=t.mapValue.fields.__previous_value__;return og(e)?sg(e):e}function ts(t){let e=bn(t.mapValue.fields.__local_write_time__.timestampValue);return new be(e.seconds,e.nanos)}var Vf=class{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},ju=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ir(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?og(t)?4:_I(t)?9007199254740991:10:x()}function Vt(t,e){if(t===e)return!0;let n=ir(t);if(n!==ir(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ts(t).isEqual(ts(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=bn(i.timestampValue),a=bn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Sn(i.bytesValue).isEqual(Sn(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return oe(i.geoPointValue.latitude)===oe(o.geoPointValue.latitude)&&oe(i.geoPointValue.longitude)===oe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return oe(i.integerValue)===oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=oe(i.doubleValue),a=oe(o.doubleValue);return s===a?es(s)===es(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return li(t.arrayValue.values||[],e.arrayValue.values||[],Vt);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(GE(s)!==GE(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Vt(s[u],a[u])))return!1;return!0}(t,e);default:return x()}}function ns(t,e){return(t.values||[]).find(n=>Vt(n,e))!==void 0}function di(t,e){if(t===e)return 0;let n=ir(t),r=ir(e);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=oe(o.integerValue||o.doubleValue),u=oe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return WE(t.timestampValue,e.timestampValue);case 4:return WE(ts(t),ts(e));case 5:return K(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Sn(o),u=Sn(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=K(a[c],u[c]);if(l!==0)return l}return K(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=K(oe(o.latitude),oe(s.latitude));return a!==0?a:K(oe(o.longitude),oe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=di(a[c],u[c]);if(l)return l}return K(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===xu.mapValue&&s===xu.mapValue)return 0;if(o===xu.mapValue)return 1;if(s===xu.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){let h=K(u[d],l[d]);if(h!==0)return h;let f=di(a[u[d]],c[l[d]]);if(f!==0)return f}return K(u.length,l.length)}(t.mapValue,e.mapValue);default:throw x()}}function WE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return K(t,e);let n=bn(t),r=bn(e),i=K(n.seconds,r.seconds);return i!==0?i:K(n.nanos,r.nanos)}function hi(t){return jf(t)}function jf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=bn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return S.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=jf(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${jf(n.fields[s])}`;return i+"}"}(t.mapValue):x()}function Bf(t){return!!t&&"integerValue"in t}function ag(t){return!!t&&"arrayValue"in t}function KE(t){return!!t&&"nullValue"in t}function QE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ru(t){return!!t&&"mapValue"in t}function Yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Di(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yo(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _I(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var pt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(n)}setAll(e){let n=Ge.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Yo(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ru(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Di(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Yo(this.value))}};function EI(t){let e=[];return Di(t.fields,(n,r)=>{let i=new Ge([n]);if(Ru(r)){let o=EI(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Pt(e)}var gt=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,k.min(),k.min(),k.min(),pt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,k.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,k.min(),k.min(),pt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,k.min(),k.min(),pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(k.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=k.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var fi=class{constructor(e,n){this.position=e,this.inclusive=n}};function YE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=S.comparator(S.fromName(s.referenceValue),n.key):r=di(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vt(t.position[n],e.position[n]))return!1;return!0}var pi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function yN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Bu=class{},ge=class t extends Bu{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $f(e,n,r):n==="array-contains"?new qf(e,r):n==="in"?new Gf(e,r):n==="not-in"?new Wf(e,r):n==="array-contains-any"?new Kf(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Hf(e,r):new zf(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(di(n,this.value)):n!==null&&ir(this.value)===ir(n)&&this.matchesComparison(di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return x()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},jt=class t extends Bu{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return II(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function II(t){return t.op==="and"}function DI(t){return vN(t)&&II(t)}function vN(t){for(let e of t.filters)if(e instanceof jt)return!1;return!0}function Uf(t){if(t instanceof ge)return t.field.canonicalString()+t.op.toString()+hi(t.value);if(DI(t))return t.filters.map(e=>Uf(e)).join(",");{let e=t.filters.map(n=>Uf(n)).join(",");return`${t.op}(${e})`}}function CI(t,e){return t instanceof ge?function(r,i){return i instanceof ge&&r.op===i.op&&r.field.isEqual(i.field)&&Vt(r.value,i.value)}(t,e):t instanceof jt?function(r,i){return i instanceof jt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&CI(s,i.filters[a]),!0):!1}(t,e):void x()}function TI(t){return t instanceof ge?function(n){return`${n.field.canonicalString()} ${n.op} ${hi(n.value)}`}(t):t instanceof jt?function(n){return n.op.toString()+" {"+n.getFilters().map(TI).join(" ,")+"}"}(t):"Filter"}var $f=class extends ge{constructor(e,n,r){super(e,n,r),this.key=S.fromName(r.referenceValue)}matches(e){let n=S.comparator(e.key,this.key);return this.matchesComparison(n)}},Hf=class extends ge{constructor(e,n){super(e,"in",n),this.keys=bI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},zf=class extends ge{constructor(e,n){super(e,"not-in",n),this.keys=bI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function bI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>S.fromName(r.referenceValue))}var qf=class extends ge{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ag(n)&&ns(n.arrayValue,this.value)}},Gf=class extends ge{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ns(this.value.arrayValue,n)}},Wf=class extends ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(ns(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ns(this.value.arrayValue,n)}},Kf=class extends ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ag(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ns(this.value.arrayValue,r))}};var Qf=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function XE(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Qf(t,e,n,r,i,o,s)}function ug(t){let e=F(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),hc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>hi(r)).join(",")),e.ce=n}return e.ce}function cg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ZE(t.startAt,e.startAt)&&ZE(t.endAt,e.endAt)}function Yf(t){return S.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var gi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function wN(t,e,n,r,i,o,s,a){return new gi(t,e,n,r,i,o,s,a)}function lg(t){return new gi(t)}function JE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _N(t){return t.collectionGroup!==null}function Zo(t){let e=F(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ne(Ge.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new pi(o,r))}),n.has(Ge.keyField().canonicalString())||e.le.push(new pi(Ge.keyField(),r))}return e.le}function kt(t){let e=F(t);return e.he||(e.he=EN(e,Zo(t))),e.he}function EN(t,e){if(t.limitType==="F")return XE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new pi(i.field,o)});let n=t.endAt?new fi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fi(t.startAt.position,t.startAt.inclusive):null;return XE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zf(t,e,n){return new gi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fc(t,e){return cg(kt(t),kt(e))&&t.limitType===e.limitType}function SI(t){return`${ug(kt(t))}|lt:${t.limitType}`}function ri(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>TI(i)).join(", ")}]`),hc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>hi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>hi(i)).join(",")),`Target(${r})`}(kt(t))}; limitType=${t.limitType})`}function pc(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):S.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Zo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let c=YE(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,Zo(r),i)||r.endAt&&!function(s,a,u){let c=YE(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,Zo(r),i))}(t,e)}function IN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AI(t){return(e,n)=>{let r=!1;for(let i of Zo(t)){let o=DN(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function DN(t,e,n){let r=t.field.isKeyField()?S.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?di(u,c):x()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return x()}}var An=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return wI(this.inner)}size(){return this.innerSize}};var CN=new ae(S.comparator);function Xt(){return CN}var xI=new ae(S.comparator);function Qo(...t){let e=xI;for(let n of t)e=e.insert(n.key,n);return e}function MI(t){let e=xI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xn(){return Xo()}function RI(){return Xo()}function Xo(){return new An(t=>t.toString(),(t,e)=>t.isEqual(e))}var TN=new ae(S.comparator),bN=new Ne(S.comparator);function B(...t){let e=bN;for(let n of t)e=e.add(n);return e}var SN=new Ne(K);function AN(){return SN}function NI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:es(e)?"-0":e}}function PI(t){return{integerValue:""+t}}function xN(t,e){return hN(e)?PI(e):NI(t,e)}var mi=class{constructor(){this._=void 0}};function MN(t,e,n){return t instanceof yi?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&og(o)&&(o=sg(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof or?kI(t,e):t instanceof sr?FI(t,e):function(i,o){let s=OI(i,o),a=eI(s)+eI(i.Ie);return Bf(s)&&Bf(i.Ie)?PI(a):NI(i.serializer,a)}(t,e)}function RN(t,e,n){return t instanceof or?kI(t,e):t instanceof sr?FI(t,e):n}function OI(t,e){return t instanceof vi?function(r){return Bf(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var yi=class extends mi{},or=class extends mi{constructor(e){super(),this.elements=e}};function kI(t,e){let n=LI(e);for(let r of t.elements)n.some(i=>Vt(i,r))||n.push(r);return{arrayValue:{values:n}}}var sr=class extends mi{constructor(e){super(),this.elements=e}};function FI(t,e){let n=LI(e);for(let r of t.elements)n=n.filter(i=>!Vt(i,r));return{arrayValue:{values:n}}}var vi=class extends mi{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function eI(t){return oe(t.integerValue||t.doubleValue)}function LI(t){return ag(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function NN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof or&&i instanceof or||r instanceof sr&&i instanceof sr?li(r.elements,i.elements,Vt):r instanceof vi&&i instanceof vi?Vt(r.Ie,i.Ie):r instanceof yi&&i instanceof yi}(t.transform,e.transform)}var Xf=class{constructor(e,n){this.version=e,this.transformResults=n}},Cn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var wi=class{};function VI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rs(t.key,Cn.none()):new ar(t.key,t.data,Cn.none());{let n=t.data,r=pt.empty(),i=new Ne(Ge.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Jt(t.key,r,new Pt(i.toArray()),Cn.none())}}function PN(t,e,n){t instanceof ar?function(i,o,s){let a=i.value.clone(),u=nI(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Jt?function(i,o,s){if(!Nu(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=nI(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(jI(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Jo(t,e,n,r){return t instanceof ar?function(o,s,a,u){if(!Nu(o.precondition,s))return a;let c=o.value.clone(),l=rI(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Jt?function(o,s,a,u){if(!Nu(o.precondition,s))return a;let c=rI(o.fieldTransforms,u,s),l=s.data;return l.setAll(jI(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return Nu(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function ON(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=OI(r.transform,i||null);o!=null&&(n===null&&(n=pt.empty()),n.set(r.field,o))}return n||null}function tI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&li(r,i,(o,s)=>NN(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ar=class extends wi{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Jt=class extends wi{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function jI(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function nI(t,e,n){let r=new Map;te(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,RN(s,a,n[i]))}return r}function rI(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,MN(o,s,e))}return r}var rs=class extends wi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Jf=class extends wi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ep=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&PN(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=RI();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=VI(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(k.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),B())}isEqual(e){return this.batchId===e.batchId&&li(this.mutations,e.mutations,(n,r)=>tI(n,r))&&li(this.baseMutations,e.baseMutations,(n,r)=>tI(n,r))}},tp=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){te(e.mutations.length===r.length);let i=function(){return TN}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var np=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var rp=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var he,q;function kN(t){switch(t){default:return x();case p.CANCELLED:case p.UNKNOWN:case p.DEADLINE_EXCEEDED:case p.RESOURCE_EXHAUSTED:case p.INTERNAL:case p.UNAVAILABLE:case p.UNAUTHENTICATED:return!1;case p.INVALID_ARGUMENT:case p.NOT_FOUND:case p.ALREADY_EXISTS:case p.PERMISSION_DENIED:case p.FAILED_PRECONDITION:case p.ABORTED:case p.OUT_OF_RANGE:case p.UNIMPLEMENTED:case p.DATA_LOSS:return!0}}function BI(t){if(t===void 0)return Lt("GRPC error has no .code"),p.UNKNOWN;switch(t){case he.OK:return p.OK;case he.CANCELLED:return p.CANCELLED;case he.UNKNOWN:return p.UNKNOWN;case he.DEADLINE_EXCEEDED:return p.DEADLINE_EXCEEDED;case he.RESOURCE_EXHAUSTED:return p.RESOURCE_EXHAUSTED;case he.INTERNAL:return p.INTERNAL;case he.UNAVAILABLE:return p.UNAVAILABLE;case he.UNAUTHENTICATED:return p.UNAUTHENTICATED;case he.INVALID_ARGUMENT:return p.INVALID_ARGUMENT;case he.NOT_FOUND:return p.NOT_FOUND;case he.ALREADY_EXISTS:return p.ALREADY_EXISTS;case he.PERMISSION_DENIED:return p.PERMISSION_DENIED;case he.FAILED_PRECONDITION:return p.FAILED_PRECONDITION;case he.ABORTED:return p.ABORTED;case he.OUT_OF_RANGE:return p.OUT_OF_RANGE;case he.UNIMPLEMENTED:return p.UNIMPLEMENTED;case he.DATA_LOSS:return p.DATA_LOSS;default:return x()}}(q=he||(he={}))[q.OK=0]="OK",q[q.CANCELLED=1]="CANCELLED",q[q.UNKNOWN=2]="UNKNOWN",q[q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",q[q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",q[q.NOT_FOUND=5]="NOT_FOUND",q[q.ALREADY_EXISTS=6]="ALREADY_EXISTS",q[q.PERMISSION_DENIED=7]="PERMISSION_DENIED",q[q.UNAUTHENTICATED=16]="UNAUTHENTICATED",q[q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",q[q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",q[q.ABORTED=10]="ABORTED",q[q.OUT_OF_RANGE=11]="OUT_OF_RANGE",q[q.UNIMPLEMENTED=12]="UNIMPLEMENTED",q[q.INTERNAL=13]="INTERNAL",q[q.UNAVAILABLE=14]="UNAVAILABLE",q[q.DATA_LOSS=15]="DATA_LOSS";var iI=null;function FN(){return new TextEncoder}var LN=new Yn([4294967295,4294967295],0);function oI(t){let e=FN().encode(t),n=new HE;return n.update(e),new Uint8Array(n.digest())}function sI(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Yn([n,r],0),new Yn([i,o],0)]}var ip=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jn(`Invalid padding: ${n}`);if(r<0)throw new Jn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jn(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jn(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Yn.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Yn.fromNumber(r)));return i.compare(LN)===1&&(i=new Yn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=oI(e),[r,i]=sI(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=oI(e),[r,i]=sI(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Jn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Uu=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,is.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(k.min(),i,new ae(K),Xt(),B())}},is=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,B(),B(),B())}};var ai=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},$u=class{constructor(e,n){this.targetId=e,this.fe=n}},Hu=class{constructor(e,n,r=Fe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},zu=class{constructor(){this.ge=0,this.pe=uI(),this.ye=Fe.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=B(),n=B(),r=B();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:x()}}),new is(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=uI()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,te(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},op=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Xt(),this.Qe=aI(),this.Ke=new ae(K)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:x()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Yf(o))if(r===0){let s=new S(o.path);this.We(n,s,gt.newNoDocument(s,k.min()))}else te(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}iI?.tt(function(l,d,h,f,w){var E,C,M,W,le,me;let Se={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},ue=d.unchangedNames;return ue&&(Se.bloomFilter={applied:w===0,hashCount:(E=ue?.hashCount)!==null&&E!==void 0?E:0,bitmapLength:(W=(M=(C=ue?.bits)===null||C===void 0?void 0:C.bitmap)===null||M===void 0?void 0:M.length)!==null&&W!==void 0?W:0,padding:(me=(le=ue?.bits)===null||le===void 0?void 0:le.padding)!==null&&me!==void 0?me:0,mightContain:mt=>{var dr;return(dr=f?.mightContain(mt))!==null&&dr!==void 0&&dr}}),Se}(s,e.fe,this.Le.nt(),a,u))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Sn(r).toUint8Array()}catch(u){if(u instanceof Vu)return ci("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ip(s,i,o)}catch(u){return ci(u instanceof Jn?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Yf(a.target)){let u=new S(a.target.path);this.qe.get(u)!==null||this.st(s,u)||this.We(s,u,gt.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=B();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new Uu(e,n,this.Ke,this.qe,r);return this.qe=Xt(),this.Qe=aI(),this.Ke=new ae(K),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new zu,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ne(K),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||v("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new zu),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function aI(){return new ae(S.comparator)}function uI(){return new ae(S.comparator)}var VN={asc:"ASCENDING",desc:"DESCENDING"},jN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BN={and:"AND",or:"OR"},sp=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function ap(t,e){return t.useProto3Json||hc(e)?e:{value:e}}function qu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UN(t,e){return qu(t,e.toTimestamp())}function Ft(t){return te(!!t),k.fromTimestamp(function(n){let r=bn(n);return new be(r.seconds,r.nanos)}(t))}function dg(t,e){return up(t,e).canonicalString()}function up(t,e){let n=function(i){return new se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $I(t){let e=se.fromString(t);return te(WI(e)),e}function cp(t,e){return dg(t.databaseId,e.path)}function If(t,e){let n=$I(e);if(n.get(1)!==t.databaseId.projectId)throw new D(p.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new D(p.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new S(zI(n))}function HI(t,e){return dg(t.databaseId,e)}function $N(t){let e=$I(t);return e.length===4?se.emptyPath():zI(e)}function lp(t){return new se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zI(t){return te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cI(t,e,n){return{name:cp(t,e),fields:n.value.mapValue.fields}}function HN(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:x()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(te(l===void 0||typeof l=="string"),Fe.fromBase64String(l||"")):(te(l===void 0||l instanceof Uint8Array),Fe.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){let l=c.code===void 0?p.UNKNOWN:BI(c.code);return new D(l,c.message||"")}(s);n=new Hu(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=If(t,r.document.name),o=Ft(r.document.updateTime),s=r.document.createTime?Ft(r.document.createTime):k.min(),a=new pt({mapValue:{fields:r.document.fields}}),u=gt.newFoundDocument(i,o,s,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new ai(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=If(t,r.document),o=r.readTime?Ft(r.readTime):k.min(),s=gt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ai([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=If(t,r.document),o=r.removedTargetIds||[];n=new ai([],o,i,null)}else{if(!("filter"in e))return x();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new rp(i,o),a=r.targetId;n=new $u(a,s)}}return n}function zN(t,e){let n;if(e instanceof ar)n={update:cI(t,e.key,e.value)};else if(e instanceof rs)n={delete:cp(t,e.key)};else if(e instanceof Jt)n={update:cI(t,e.key,e.data),updateMask:JN(e.fieldMask)};else{if(!(e instanceof Jf))return x();n={verify:cp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof yi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof or)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof sr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vi)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw x()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:UN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:x()}(t,e.precondition)),n}function qN(t,e){return t&&t.length>0?(te(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ft(i.updateTime):Ft(o);return s.isEqual(k.min())&&(s=Ft(o)),new Xf(s,i.transformResults||[])}(n,e))):[]}function GN(t,e){return{documents:[HI(t,e.path)]}}function WN(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HI(t,i);let o=function(c){if(c.length!==0)return GI(jt.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(c){if(c.length!==0)return c.map(l=>function(h){return{field:ii(h.field),direction:YN(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=ap(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function KN(t){let e=$N(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){te(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=qI(d);return h instanceof jt&&DI(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(w){return new pi(oi(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,hc(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){let h=!!d.before,f=d.values||[];return new fi(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new fi(f,h)}(n.endAt)),wN(e,i,s,o,a,"F",u,c)}function QN(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return x()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=oi(n.unaryFilter.field);return ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=oi(n.unaryFilter.field);return ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=oi(n.unaryFilter.field);return ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=oi(n.unaryFilter.field);return ge.create(s,"!=",{nullValue:"NULL_VALUE"});default:return x()}}(t):t.fieldFilter!==void 0?function(n){return ge.create(oi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return x()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jt.create(n.compositeFilter.filters.map(r=>qI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return x()}}(n.compositeFilter.op))}(t):x()}function YN(t){return VN[t]}function ZN(t){return jN[t]}function XN(t){return BN[t]}function ii(t){return{fieldPath:t.canonicalString()}}function oi(t){return Ge.fromServerFormat(t.fieldPath)}function GI(t){return t instanceof ge?function(n){if(n.op==="=="){if(QE(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NAN"}};if(KE(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(QE(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NOT_NAN"}};if(KE(n.value))return{unaryFilter:{field:ii(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ii(n.field),op:ZN(n.op),value:n.value}}}(t):t instanceof jt?function(n){let r=n.getFilters().map(i=>GI(i));return r.length===1?r[0]:{compositeFilter:{op:XN(n.op),filters:r}}}(t):x()}function JN(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function WI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var os=class t{constructor(e,n,r,i,o=k.min(),s=k.min(),a=Fe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var dp=class{constructor(e){this.ct=e}};function eP(t){let e=KN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zf(e,e.limit,"L"):e}var Gu=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(oe(e.integerValue));else if("doubleValue"in e){let r=oe(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),es(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Sn(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?_I(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):x()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),S.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Gu.bt=new Gu;var hp=class{constructor(){this._n=new fp}addToCollectionParentIndex(e,n){return this._n.add(n),g.resolve()}getCollectionParents(e,n){return g.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return g.resolve()}deleteFieldIndex(e,n){return g.resolve()}deleteAllFieldIndexes(e){return g.resolve()}createTargetIndexes(e,n){return g.resolve()}getDocumentsMatchingTarget(e,n){return g.resolve(null)}getIndexType(e,n){return g.resolve(0)}getFieldIndexes(e,n){return g.resolve([])}getNextCollectionGroupToUpdate(e){return g.resolve(null)}getMinOffset(e,n){return g.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return g.resolve(rr.min())}updateCollectionGroup(e,n,r){return g.resolve()}updateIndexEntries(e,n){return g.resolve()}},fp=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ne(se.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ne(se.comparator)).toArray()}};var Kj=new Uint8Array(0);var Nt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(41943040,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);var ss=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var pp=class{constructor(){this.changes=new An(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?g.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var gp=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var mp=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Jo(r.mutation,i,Pt.empty(),be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,B()).next(()=>r))}getLocalViewOfDocuments(e,n,r=B()){let i=Xn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Qo();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Xn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,B()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Xt(),s=Xo(),a=function(){return Xo()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof Jt)?o=o.insert(c.key,c):l!==void 0?(s.set(c.key,l.mutation.getFieldMask()),Jo(l.mutation,c,l.mutation.getFieldMask(),be.now())):s.set(c.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new gp(l,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Xo(),i=new ae((s,a)=>s-a),o=B();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Pt.empty();l=a.applyToLocalView(c,l),r.set(u,l);let d=(i.get(a.batchId)||B()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,d=RI();l.forEach(h=>{if(!o.has(h)){let f=VI(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return g.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return S.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_N(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):g.resolve(Xn()),a=-1,u=o;return s.next(c=>g.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?g.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,B())).next(l=>({batchId:a,changes:MI(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new S(n)).next(r=>{let i=Qo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Qo();return this.indexManager.getCollectionParents(e,o).next(a=>g.forEach(a,u=>{let c=function(d,h){return new gi(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{let l=c.getKey();s.get(l)===null&&(s=s.insert(l,gt.newInvalidDocument(l)))});let a=Qo();return s.forEach((u,c)=>{let l=o.get(u);l!==void 0&&Jo(l.mutation,c,Pt.empty(),be.now()),pc(n,c)&&(a=a.insert(u,c))}),a})}};var yp=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return g.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ft(i.createTime)}}(n)),g.resolve()}getNamedQuery(e,n){return g.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:eP(i.bundledQuery),readTime:Ft(i.readTime)}}(n)),g.resolve()}};var vp=class{constructor(){this.overlays=new ae(S.comparator),this.hr=new Map}getOverlay(e,n){return g.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Xn();return g.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),g.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),g.resolve()}getOverlaysForCollection(e,n,r){let i=Xn(),o=n.length+1,s=new S(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return g.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ae((c,l)=>c-l),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=o.get(c.largestBatchId);l===null&&(l=Xn(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=Xn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return g.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new np(n,r));let o=this.hr.get(n);o===void 0&&(o=B(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var as=class{constructor(){this.Pr=new Ne(fe.Ir),this.Tr=new Ne(fe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new fe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new fe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new S(new se([])),r=new fe(n,e),i=new fe(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new S(new se([])),r=new fe(n,e),i=new fe(n,e+1),o=B();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new fe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},fe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return S.comparator(e.key,n.key)||K(e.pr,n.pr)}static Er(e,n){return K(e.pr,n.pr)||S.comparator(e.key,n.key)}};var wp=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ne(fe.Ir)}checkEmpty(e){return g.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ep(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new fe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return g.resolve(s)}lookupMutationBatch(e,n){return g.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return g.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return g.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return g.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new fe(n,0),i=new fe(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),g.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ne(K);return n.forEach(i=>{let o=new fe(i,0),s=new fe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),g.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;S.isDocumentKey(o)||(o=o.child(""));let s=new fe(new S(o),0),a=new Ne(K);return this.wr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),g.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){te(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return g.forEach(n.mutations,i=>{let o=new fe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new fe(n,0),i=this.wr.firstAfterOrEqual(r);return g.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,g.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var _p=class{constructor(e){this.vr=e,this.docs=function(){return new ae(S.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return g.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=Xt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():gt.newInvalidDocument(i))}),g.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Xt(),s=n.path,a=new S(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||lN(cN(l),r)<=0||(i.has(l.key)||pc(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return g.resolve(o)}getAllFromCollectionGroup(e,n,r,i){x()}Fr(e,n){return g.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ep(this)}getSize(e){return g.resolve(this.size)}},Ep=class extends pp{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),g.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Ip=class{constructor(e){this.persistence=e,this.Mr=new An(n=>ug(n),cg),this.lastRemoteSnapshotVersion=k.min(),this.highestTargetId=0,this.Or=0,this.Nr=new as,this.targetCount=0,this.Br=ss.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),g.resolve()}getLastRemoteSnapshotVersion(e){return g.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return g.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),g.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),g.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new ss(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,g.resolve()}updateTargetData(e,n){return this.qn(n),g.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,g.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),g.waitFor(o).next(()=>i)}getTargetCount(e){return g.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return g.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),g.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),g.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),g.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return g.resolve(r)}containsKey(e,n){return g.resolve(this.Nr.containsKey(n))}};var Dp=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new vI(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ip(this),this.indexManager=new hp,this.remoteDocumentCache=function(i){return new _p(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new dp(n),this.$r=new yp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new wp(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){v("MemoryPersistence","Starting transaction:",e);let i=new Cp(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return g.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},Cp=class extends Of{constructor(e){super(),this.currentSequenceNumber=e}},Tp=class t{constructor(e){this.persistence=e,this.zr=new as,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw x()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),g.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),g.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),g.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return g.forEach(this.Jr,r=>{let i=S.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,k.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return g.or([()=>g.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var bp=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=B(),i=B();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Sp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ap=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return o_()?8:Fu.v(Eo())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Sp;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Ko()<=G.DEBUG&&v("QueryEngine","SDK will not create cache indexes for query:",ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),g.resolve()):(Ko()<=G.DEBUG&&v("QueryEngine","Query:",ri(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ko()<=G.DEBUG&&v("QueryEngine","The SDK decides to create cache indexes for query:",ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kt(n))):g.resolve())}ji(e,n){if(JE(n))return g.resolve(null);let r=kt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Zf(n,null,"F"),r=kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=B(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Zi(n,a);return this.Xi(n,c,s,u.readTime)?this.ji(e,Zf(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return JE(n)||i.isEqual(k.min())?g.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?g.resolve(null):(Ko()<=G.DEBUG&&v("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ri(n)),this.es(e,s,n,uN(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ne(AI(e));return n.forEach((i,o)=>{pc(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Ko()<=G.DEBUG&&v("QueryEngine","Using full collection scan to execute query:",ri(n)),this.zi.getDocumentsMatchingQuery(e,n,rr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var xp=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new ae(K),this.rs=new An(o=>ug(o),cg),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function tP(t,e,n,r){return new xp(t,e,n,r)}function KI(t,e){return m(this,null,function*(){let n=F(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=B();for(let c of i){s.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of o){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})})}function nP(t,e){let n=F(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let d=c.batch,h=d.keys(),f=g.resolve();return h.forEach(w=>{f=f.next(()=>l.getEntry(u,w)).next(E=>{let C=c.docVersions.get(w);te(C!==null),E.version.compareTo(C)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),l.addEntry(E)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=B();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function QI(t){let e=F(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function rP(t,e){let n=F(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Fe.EMPTY_BYTE_STRING,k.min()).withLastLimboFreeSnapshotVersion(k.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(E,C,M){return E.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(o,f))});let u=Xt(),c=B();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(iP(o,s,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(k.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return g.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.ns=i,o))}function iP(t,e,n){let r=B(),i=B();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Xt();return n.forEach((a,u)=>{let c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(k.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):v("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}function oP(t,e){let n=F(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sP(t,e){let n=F(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,g.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new os(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Mp(t,e,n){return m(this,null,function*(){let r=F(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!hs(s))throw s;v("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function lI(t,e,n){let r=F(t),i=k.min(),o=B();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){let d=F(u),h=d.rs.get(l);return h!==void 0?g.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,s,kt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:k.min(),n?o:B())).next(a=>(aP(r,IN(e),a),{documents:a,hs:o})))}function aP(t,e,n){let r=t.ss.get(e)||k.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}var Wu=class{constructor(){this.activeTargetIds=AN()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Rp=class{constructor(){this.no=new Wu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Wu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Np=class{io(e){}shutdown(){}};var Ku=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){v("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){v("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Mu=null;function Df(){return Mu===null?Mu=function(){return 268435456+Math.round(2147483648*Math.random())}():Mu++,"0x"+Mu.toString(16)}var uP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Pp=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Re="WebChannelConnection",Op=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=Df(),u=this.bo(n,r.toUriEncodedString());v("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,u,c,i).then(l=>(v("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw ci("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ii}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=uP[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=Df();return new Promise((s,a)=>{let u=new $E;u.setWithCredentials(!0),u.listenOnce(BE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Au.NO_ERROR:let l=u.getResponseJson();v(Re,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case Au.TIMEOUT:v(Re,`RPC '${e}' ${o} timed out`),a(new D(p.DEADLINE_EXCEEDED,"Request time out"));break;case Au.HTTP_ERROR:let d=u.getStatus();if(v(Re,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let w=function(C){let M=C.toLowerCase().replace(/_/g,"-");return Object.values(p).indexOf(M)>=0?M:p.UNKNOWN}(f.status);a(new D(w,f.message))}else a(new D(p.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new D(p.UNAVAILABLE,"Connection failed."));break;default:x()}}finally{v(Re,`RPC '${e}' ${o} completed.`)}});let c=JSON.stringify(i);v(Re,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}Fo(e,n,r){let i=Df(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=VE(),a=jE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=o.join("");v(Re,`Creating RPC '${e}' stream ${i}: ${l}`,u);let d=s.createWebChannel(l,u),h=!1,f=!1,w=new Pp({lo:C=>{f?v(Re,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(h||(v(Re,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),v(Re,`RPC '${e}' stream ${i} sending:`,C),d.send(C))},ho:()=>d.close()}),E=(C,M,W)=>{C.listen(M,le=>{try{W(le)}catch(me){setTimeout(()=>{throw me},0)}})};return E(d,Wo.EventType.OPEN,()=>{f||v(Re,`RPC '${e}' stream ${i} transport opened.`)}),E(d,Wo.EventType.CLOSE,()=>{f||(f=!0,v(Re,`RPC '${e}' stream ${i} transport closed`),w.Vo())}),E(d,Wo.EventType.ERROR,C=>{f||(f=!0,ci(Re,`RPC '${e}' stream ${i} transport errored:`,C),w.Vo(new D(p.UNAVAILABLE,"The operation could not be completed")))}),E(d,Wo.EventType.MESSAGE,C=>{var M;if(!f){let W=C.data[0];te(!!W);let le=W,me=le.error||((M=le[0])===null||M===void 0?void 0:M.error);if(me){v(Re,`RPC '${e}' stream ${i} received error:`,me);let Se=me.status,ue=function(_c){let Eg=he[_c];if(Eg!==void 0)return BI(Eg)}(Se),mt=me.message;ue===void 0&&(ue=p.INTERNAL,mt="Unknown error status: "+Se+" with message "+me.message),f=!0,w.Vo(new D(ue,mt)),d.close()}else v(Re,`RPC '${e}' stream ${i} received:`,W),w.mo(W)}}),E(a,UE.STAT_EVENT,C=>{C.stat===Ef.PROXY?v(Re,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Ef.NOPROXY&&v(Re,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.Ro()},0),w}};function Cf(){return typeof document<"u"?document:null}function gc(t){return new sp(t,!0)}var Qu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&v("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Yu=class{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Qu(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return m(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return m(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return m(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===p.RESOURCE_EXHAUSTED?(Lt(n.toString()),Lt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===p.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new D(p.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>m(this,null,function*(){this.state=0,this.start()}))}__(e){return v("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(v("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},kp=class extends Yu{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=HN(this.serializer,e),r=function(o){if(!("targetChange"in o))return k.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?k.min():s.readTime?Ft(s.readTime):k.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=lp(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=Yf(u)?{documents:GN(o,u)}:{query:WN(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=UI(o,s.resumeToken);let c=ap(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(k.min())>0){a.readTime=qu(o,s.snapshotVersion.toTimestamp());let c=ap(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=QN(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=lp(this.serializer),n.removeTarget=e,this.t_(n)}},Fp=class extends Yu{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=qN(e.writeResults,e.commitTime),r=Ft(e.commitTime);return this.listener.T_(r,n)}return te(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=lp(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>zN(this.serializer,r))};this.t_(n)}};var Lp=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new D(p.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,up(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new D(p.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,up(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(p.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Vp=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Lt(n),this.g_=!1):v("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var jp=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>m(this,null,function*(){lr(this)&&(v("RemoteStore","Restarting streams for network reachability change."),yield function(u){return m(this,null,function*(){let c=F(u);c.v_.add(4),yield fs(c),c.x_.set("Unknown"),c.v_.delete(4),yield mc(c)})}(this))}))}),this.x_=new Vp(r,i)}};function mc(t){return m(this,null,function*(){if(lr(t))for(let e of t.F_)yield e(!0)})}function fs(t){return m(this,null,function*(){for(let e of t.F_)yield e(!1)})}function YI(t,e){let n=F(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),pg(n)?fg(n):Ci(n).Jo()&&hg(n,e))}function ZI(t,e){let n=F(t),r=Ci(n);n.C_.delete(e),r.Jo()&&XI(n,e),n.C_.size===0&&(r.Jo()?r.Xo():lr(n)&&n.x_.set("Unknown"))}function hg(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(k.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ci(t).c_(e)}function XI(t,e){t.O_.Oe(e),Ci(t).l_(e)}function fg(t){t.O_=new op({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ci(t).start(),t.x_.p_()}function pg(t){return lr(t)&&!Ci(t).Ho()&&t.C_.size>0}function lr(t){return F(t).v_.size===0}function JI(t){t.O_=void 0}function cP(t){return m(this,null,function*(){t.C_.forEach((e,n)=>{hg(t,e)})})}function lP(t,e){return m(this,null,function*(){JI(t),pg(t)?(t.x_.S_(e),fg(t)):t.x_.set("Unknown")})}function dP(t,e,n){return m(this,null,function*(){if(t.x_.set("Online"),e instanceof Hu&&e.state===2&&e.cause)try{yield function(i,o){return m(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){v("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zu(t,r)}else if(e instanceof ai?t.O_.$e(e):e instanceof $u?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(k.min()))try{let r=yield QI(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=o.C_.get(c);l&&o.C_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{let l=o.C_.get(u);if(!l)return;o.C_.set(u,l.withResumeToken(Fe.EMPTY_BYTE_STRING,l.snapshotVersion)),XI(o,u);let d=new os(l.target,u,c,l.sequenceNumber);hg(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){v("RemoteStore","Failed to raise snapshot:",r),yield Zu(t,r)}})}function Zu(t,e,n){return m(this,null,function*(){if(!hs(e))throw e;t.v_.add(1),yield fs(t),t.x_.set("Offline"),n||(n=()=>QI(t.localStore)),t.asyncQueue.enqueueRetryable(()=>m(this,null,function*(){v("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield mc(t)}))})}function eD(t,e){return e().catch(n=>Zu(t,n,e))}function yc(t){return m(this,null,function*(){let e=F(t),n=xn(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;hP(e);)try{let i=yield oP(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,fP(e,i)}catch(i){yield Zu(e,i)}tD(e)&&nD(e)})}function hP(t){return lr(t)&&t.D_.length<10}function fP(t,e){t.D_.push(e);let n=xn(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function tD(t){return lr(t)&&!xn(t).Ho()&&t.D_.length>0}function nD(t){xn(t).start()}function pP(t){return m(this,null,function*(){xn(t).d_()})}function gP(t){return m(this,null,function*(){let e=xn(t);for(let n of t.D_)e.I_(n.mutations)})}function mP(t,e,n){return m(this,null,function*(){let r=t.D_.shift(),i=tp.from(r,e,n);yield eD(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield yc(t)})}function yP(t,e){return m(this,null,function*(){e&&xn(t).P_&&(yield function(r,i){return m(this,null,function*(){if(function(s){return kN(s)&&s!==p.ABORTED}(i.code)){let o=r.D_.shift();xn(r).Zo(),yield eD(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield yc(r)}})}(t,e)),tD(t)&&nD(t)})}function dI(t,e){return m(this,null,function*(){let n=F(t);n.asyncQueue.verifyOperationInProgress(),v("RemoteStore","RemoteStore received new credentials");let r=lr(n);n.v_.add(3),yield fs(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield mc(n)})}function vP(t,e){return m(this,null,function*(){let n=F(t);e?(n.v_.delete(2),yield mc(n)):e||(n.v_.add(2),yield fs(n),n.x_.set("Unknown"))})}function Ci(t){return t.N_||(t.N_=function(n,r,i){let o=F(n);return o.R_(),new kp(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:cP.bind(null,t),To:lP.bind(null,t),u_:dP.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.N_.Zo(),pg(t)?fg(t):t.x_.set("Unknown")):(yield t.N_.stop(),JI(t))}))),t.N_}function xn(t){return t.B_||(t.B_=function(n,r,i){let o=F(n);return o.R_(),new Fp(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:pP.bind(null,t),To:yP.bind(null,t),E_:gP.bind(null,t),T_:mP.bind(null,t)}),t.F_.push(e=>m(this,null,function*(){e?(t.B_.Zo(),yield yc(t)):(yield t.B_.stop(),t.D_.length>0&&(v("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var Bp=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new D(p.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function gg(t,e){if(Lt("AsyncQueue",`${e}: ${t}`),hs(t))return new D(p.UNAVAILABLE,`${e}: ${t}`);throw t}var Xu=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||S.comparator(n.key,r.key):(n,r)=>S.comparator(n.key,r.key),this.keyedMap=Qo(),this.sortedSet=new ae(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ju=class{constructor(){this.L_=new ae(S.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):x():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},_i=class t{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Xu.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Up=class{constructor(){this.q_=void 0,this.Q_=[]}},$p=class{constructor(){this.queries=new An(e=>SI(e),fc),this.onlineState="Unknown",this.K_=new Set}};function rD(t,e){return m(this,null,function*(){let n=F(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Up),i)try{o.q_=yield n.onListen(r)}catch(s){let a=gg(s,`Initialization of query '${ri(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&mg(n)})}function iD(t,e){return m(this,null,function*(){let n=F(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function wP(t,e){let n=F(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&mg(n)}function _P(t,e,n){let r=F(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function mg(t){t.K_.forEach(e=>{e.next()})}var ec=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=_i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var tc=class{constructor(e){this.key=e}},nc=class{constructor(e){this.key=e}},Hp=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=B(),this.mutatedKeys=B(),this.ua=AI(e),this.ca=new Xu(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new Ju,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=pc(this.query,d)?d:null,w=!!h&&this.mutatedKeys.has(h.key),E=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),C=!1;h&&f?h.data.isEqual(f.data)?w!==E&&(r.track({type:3,doc:f}),C=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),C=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),C=!0):h&&!f&&(r.track({type:1,doc:h}),C=!0,(u||c)&&(a=!0)),C&&(f?(s=s.add(f),o=E?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((l,d)=>function(f,w){let E=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return x()}};return E(f)-E(w)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],u=this.aa.size===0&&this.current&&!i?1:0,c=u!==this._a;return this._a=u,s.length!==0||c?{snapshot:new _i(this.query,e.ca,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ju,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=B(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new nc(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new tc(r))}),n}Ra(e){this.oa=e.hs,this.aa=B();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return _i.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},zp=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},qp=class{constructor(e){this.key=e,this.ma=!1}},Gp=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new An(a=>SI(a),fc),this.pa=new Map,this.ya=new Set,this.wa=new ae(S.comparator),this.Sa=new Map,this.ba=new as,this.Da={},this.Ca=new Map,this.va=ss.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function EP(t,e){return m(this,null,function*(){let n=RP(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield sP(n.localStore,kt(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield IP(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&YI(n.remoteStore,s)}return i})}function IP(t,e,n,r,i){return m(this,null,function*(){t.Ma=(d,h,f)=>function(E,C,M,W){return m(this,null,function*(){let le=C.view.ha(M);le.Xi&&(le=yield lI(E.localStore,C.query,!1).then(({documents:mt})=>C.view.ha(mt,le)));let me=W&&W.targetChanges.get(C.targetId),Se=W&&W.targetMismatches.get(C.targetId)!=null,ue=C.view.applyChanges(le,E.isPrimaryClient,me,Se);return fI(E,C.targetId,ue.da),ue.snapshot})}(t,d,h,f);let o=yield lI(t.localStore,e,!0),s=new Hp(e,o.hs),a=s.ha(o.documents),u=is.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);fI(t,n,c.da);let l=new zp(e,n,s);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot})}function DP(t,e){return m(this,null,function*(){let n=F(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!fc(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Mp(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),ZI(n.remoteStore,r.targetId),Wp(n,r.targetId)}).catch(ds))):(Wp(n,r.targetId),yield Mp(n.localStore,r.targetId,!0))})}function CP(t,e,n){return m(this,null,function*(){let r=NP(t);try{let i=yield function(s,a){let u=F(s),c=be.now(),l=a.reduce((f,w)=>f.add(w.key),B()),d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let w=Xt(),E=B();return u.os.getEntries(f,l).next(C=>{w=C,w.forEach((M,W)=>{W.isValidDocument()||(E=E.add(M))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,w)).next(C=>{d=C;let M=[];for(let W of a){let le=ON(W,d.get(W.key).overlayedDocument);le!=null&&M.push(new Jt(W.key,le,EI(le.value.mapValue),Cn.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,M,a)}).next(C=>{h=C;let M=C.applyToLocalDocumentSet(d,E);return u.documentOverlayCache.saveOverlays(f,C.batchId,M)})}).then(()=>({batchId:h.batchId,changes:MI(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Da[s.currentUser.toKey()];c||(c=new ae(K)),c=c.insert(a,u),s.Da[s.currentUser.toKey()]=c}(r,i.batchId,n),yield ps(r,i.changes),yield yc(r.remoteStore)}catch(i){let o=gg(i,"Failed to persist write");n.reject(o)}})}function oD(t,e){return m(this,null,function*(){let n=F(t);try{let r=yield rP(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?te(s.ma):i.removedDocuments.size>0&&(te(s.ma),s.ma=!1))}),yield ps(n,r,e)}catch(r){yield ds(r)}})}function hI(t,e,n){let r=F(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=F(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(c=!0)}),c&&mg(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TP(t,e,n){return m(this,null,function*(){let r=F(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new ae(S.comparator);s=s.insert(o,gt.newNoDocument(o,k.min()));let a=B().add(o),u=new Uu(k.min(),new Map,new ae(K),s,a);yield oD(r,u),r.wa=r.wa.remove(o),r.Sa.delete(e),yg(r)}else yield Mp(r.localStore,e,!1).then(()=>Wp(r,e,n)).catch(ds)})}function bP(t,e){return m(this,null,function*(){let n=F(t),r=e.batch.batchId;try{let i=yield nP(n.localStore,e);aD(n,r,null),sD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ps(n,i)}catch(i){yield ds(i)}})}function SP(t,e,n){return m(this,null,function*(){let r=F(t);try{let i=yield function(s,a){let u=F(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(te(d!==null),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);aD(r,e,n),sD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ps(r,i)}catch(i){yield ds(i)}})}function sD(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function aD(t,e,n){let r=F(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function Wp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||uD(t,r)})}function uD(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(ZI(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),yg(t))}function fI(t,e,n){for(let r of n)r instanceof tc?(t.ba.addReference(r.key,e),AP(t,r)):r instanceof nc?(v("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||uD(t,r.key)):x()}function AP(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(v("SyncEngine","New document in limbo: "+n),t.ya.add(r),yg(t))}function yg(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new S(se.fromString(e)),r=t.va.next();t.Sa.set(r,new qp(n)),t.wa=t.wa.insert(n,r),YI(t.remoteStore,new os(kt(lg(n.path)),r,"TargetPurposeLimboResolution",vI._e))}}function ps(t,e,n){return m(this,null,function*(){let r=F(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,u)=>{s.push(r.Ma(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=bp.Ki(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(u,c){return m(this,null,function*(){let l=F(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>g.forEach(c,h=>g.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>g.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!hs(d))throw d;v("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),w=f.snapshotVersion,E=f.withLastLimboFreeSnapshotVersion(w);l.ns=l.ns.insert(h,E)}}})}(r.localStore,o))})}function xP(t,e){return m(this,null,function*(){let n=F(t);if(!n.currentUser.isEqual(e)){v("SyncEngine","User change. New user:",e.toKey());let r=yield KI(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(u=>{u.reject(new D(p.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ps(n,r.us)}})}function MP(t,e){let n=F(t),r=n.Sa.get(e);if(r&&r.ma)return B().add(r.key);{let i=B(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function RP(t){let e=F(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TP.bind(null,e),e.fa.u_=wP.bind(null,e.eventManager),e.fa.xa=_P.bind(null,e.eventManager),e}function NP(t){let e=F(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SP.bind(null,e),e}var rc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return m(this,null,function*(){this.serializer=gc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return tP(this.persistence,new Ap,e.initialUser,this.serializer)}createPersistence(e){return new Dp(Tp.Hr,this.serializer)}createSharedClientState(e){return new Rp}terminate(){return m(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Kp=class{initialize(e,n){return m(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xP.bind(null,this.syncEngine),yield vP(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new $p}()}createDatastore(e){let n=gc(e.databaseInfo.databaseId),r=function(o){return new Op(o)}(e.databaseInfo);return function(o,s,a,u){return new Lp(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new jp(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hI(this.syncEngine,n,0),function(){return Ku.D()?new Ku:new Np}())}createSyncEngine(e,n){return function(i,o,s,a,u,c,l){let d=new Gp(i,o,s,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return m(this,null,function*(){var e;yield function(r){return m(this,null,function*(){let i=F(r);v("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield fs(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var ic=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Lt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Qp=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ie.UNAUTHENTICATED,this.clientId=Ou.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>m(this,null,function*(){v("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(v("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(p.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>m(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=gg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Tf(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),v("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>m(this,null,function*(){r.isEqual(i)||(yield KI(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function pI(t,e){return m(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield OP(t);v("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dI(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dI(e.remoteStore,i)),t._onlineComponents=e})}function PP(t){return t.name==="FirebaseError"?t.code===p.FAILED_PRECONDITION||t.code===p.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function OP(t){return m(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){v("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!PP(n))throw n;ci("Error using user provided cache. Falling back to memory cache: "+n),yield Tf(t,new rc)}}else v("FirestoreClient","Using default OfflineComponentProvider"),yield Tf(t,new rc);return t._offlineComponents})}function cD(t){return m(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(v("FirestoreClient","Using user provided OnlineComponentProvider"),yield pI(t,t._uninitializedComponentsProvider._online)):(v("FirestoreClient","Using default OnlineComponentProvider"),yield pI(t,new Kp))),t._onlineComponents})}function kP(t){return cD(t).then(e=>e.syncEngine)}function lD(t){return m(this,null,function*(){let e=yield cD(t),n=e.eventManager;return n.onListen=EP.bind(null,e.syncEngine),n.onUnlisten=DP.bind(null,e.syncEngine),n})}function FP(t,e,n={}){let r=new nt;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,u,c){let l=new ic({next:h=>{s.enqueueAndForget(()=>iD(o,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new D(p.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new D(p.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new ec(lg(a.path),l,{includeMetadataChanges:!0,Z_:!0});return rD(o,d)}(yield lD(t),t.asyncQueue,e,n,r)})),r.promise}function LP(t,e,n={}){let r=new nt;return t.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return function(o,s,a,u,c){let l=new ic({next:h=>{s.enqueueAndForget(()=>iD(o,d)),h.fromCache&&u.source==="server"?c.reject(new D(p.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new ec(a,l,{includeMetadataChanges:!0,Z_:!0});return rD(o,d)}(yield lD(t),t.asyncQueue,e,n,r)})),r.promise}function dD(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var gI=new Map;function hD(t,e,n){if(!n)throw new D(p.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VP(t,e,n,r){if(e===!0&&r===!0)throw new D(p.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mI(t){if(!S.isDocumentKey(t))throw new D(p.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yI(t){if(S.isDocumentKey(t))throw new D(p.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":x()}function ur(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(p.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=vg(t);throw new D(p.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var oc=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new D(p.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new D(p.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dD((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new D(p.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new D(p.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new D(p.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ei=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(p.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new D(p.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bf;switch(r.type){case"firstParty":return new Mf(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new D(p.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=gI.get(n);r&&(v("ComponentProvider","Removing Datastore"),gI.delete(n),r.terminate())}(this),Promise.resolve()}};function jP(t,e,n,r={}){var i;let o=(t=ur(t,Ei))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ie.MOCK_USER;else{a=i_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new D(p.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ie(c)}t._authCredentials=new Sf(new Pu(a,u))}}var sc=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},rt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Tn=class t extends sc{constructor(e,n,r){super(e,n,lg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new S(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function wg(t,e,...n){if(t=Qr(t),hD("collection","path",e),t instanceof Ei){let r=se.fromString(e,...n);return yI(r),new Tn(t,null,r)}{if(!(t instanceof rt||t instanceof Tn))throw new D(p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(se.fromString(e,...n));return yI(r),new Tn(t.firestore,null,r)}}function vc(t,e,...n){if(t=Qr(t),arguments.length===1&&(e=Ou.newId()),hD("doc","path",e),t instanceof Ei){let r=se.fromString(e,...n);return mI(r),new rt(t,null,new S(r))}{if(!(t instanceof rt||t instanceof Tn))throw new D(p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(se.fromString(e,...n));return mI(r),new rt(t.firestore,t instanceof Tn?t.converter:null,new S(r))}}var Yp=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Qu(this,"async_queue_retry"),this._u=()=>{let n=Cf();n&&v("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Cf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=Cf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new nt;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return m(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!hs(e))throw e;v("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Lt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=Bp.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&x()}verifyOperationInProgress(){}hu(){return m(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};var cr=class extends Ei{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Yp}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||pD(this),this._firestoreClient.terminate()}};function fD(t,e){let n=typeof t=="object"?t:__(),r=typeof t=="string"?t:e||"(default)",i=v_(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=r_("firestore");o&&jP(i,...o)}return i}function _g(t){return t._firestoreClient||pD(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function pD(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,c,l){return new Vf(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,dD(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Qp(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var us=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Fe.fromBase64String(e))}catch(n){throw new D(p.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Fe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var cs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new D(p.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ac=class{constructor(e){this._methodName=e}};var ls=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(p.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(p.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}};var BP=/^__.*__$/,Zp=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jt(e,this.data,this.fieldMask,n,this.fieldTransforms):new ar(e,this.data,n,this.fieldTransforms)}};function gD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw x()}}var Xp=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return uc(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(gD(this.du)&&BP.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},Jp=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gc(e)}Su(e,n,r,i=!1){return new Xp({du:e,methodName:n,wu:r,path:Ge.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function UP(t){let e=t._freezeSettings(),n=gc(t._databaseId);return new Jp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $P(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);wD("Data must be an object, but it was:",s,r);let a=yD(r,s),u,c;if(o.merge)u=new Pt(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=HP(e,d,n);if(!s.contains(h))throw new D(p.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);qP(l,h)||l.push(h)}u=new Pt(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new Zp(new pt(a),u,c)}function mD(t,e){if(vD(t=Qr(t)))return wD("Unsupported field value:",e,t),yD(t,e);if(t instanceof ac)return function(r,i){if(!gD(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=mD(a,i.gu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Qr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=be.fromDate(r);return{timestampValue:qu(i.serializer,o)}}if(r instanceof be){let o=new be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qu(i.serializer,o)}}if(r instanceof ls)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof us)return{bytesValue:UI(i.serializer,r._byteString)};if(r instanceof rt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dg(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${vg(r)}`)}(t,e)}function yD(t,e){let n={};return wI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(t,(r,i)=>{let o=mD(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function vD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof be||t instanceof ls||t instanceof us||t instanceof rt||t instanceof ac)}function wD(t,e,n){if(!vD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=vg(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function HP(t,e,n){if((e=Qr(e))instanceof cs)return e._internalPath;if(typeof e=="string")return _D(t,e);throw uc("Field path arguments must be of type string or ",t,!1,void 0,n)}var zP=new RegExp("[~\\*/\\[\\]]");function _D(t,e,n){if(e.search(zP)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cs(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uc(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new D(p.INVALID_ARGUMENT,a+t+u)}function qP(t,e){return t.some(n=>n.isEqual(e))}var cc=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new eg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(ED("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},eg=class extends cc{data(){return super.data()}};function ED(t,e){return typeof e=="string"?_D(t,e):e instanceof cs?e._internalPath:e._delegate._internalPath}function GP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new D(p.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var tg=class{convertValue(e,n="none"){switch(ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw x()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Di(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new ls(oe(e.latitude),oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=sg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ts(e));default:return null}}convertTimestamp(e){let n=bn(e);return new be(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=se.fromString(e);te(WI(r));let i=new ju(r.get(1),r.get(3)),o=new S(r.popFirst(5));return i.isEqual(n)||Lt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function WP(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var er=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},lc=class extends cc{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ui(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(ED("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ui=class extends lc{data(e={}){return super.data(e)}},ng=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new er(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ui(this._firestore,this._userDataWriter,r.key,r,new er(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new D(p.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ui(i._firestore,i._userDataWriter,a.doc.key,a.doc,new er(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ui(i._firestore,i._userDataWriter,a.doc.key,a.doc,new er(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:KP(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function KP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return x()}}function ID(t){t=ur(t,rt);let e=ur(t.firestore,cr);return FP(_g(e),t._key).then(n=>QP(e,t,n))}var dc=class extends tg{constructor(e){super(),this.firestore=e}convertBytes(e){return new us(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}};function DD(t){t=ur(t,sc);let e=ur(t.firestore,cr),n=_g(e),r=new dc(e);return GP(t._query),LP(n,t._query).then(i=>new ng(e,r,t,i))}function CD(t){return bD(ur(t.firestore,cr),[new rs(t._key,Cn.none())])}function TD(t,e){let n=ur(t.firestore,cr),r=vc(t),i=WP(t.converter,e);return bD(n,[$P(UP(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}function bD(t,e){return function(r,i){let o=new nt;return r.asyncQueue.enqueueAndForget(()=>m(this,null,function*(){return CP(yield kP(r),i,o)})),o.promise}(_g(t),e)}function QP(t,e,n){let r=n.docs.get(e._key),i=new dc(t);return new lc(t,i,e._key,r,new er(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ii=i})(w_),Do(new Qt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new cr(new Af(r.getProvider("auth-internal")),new Nf(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new D(p.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),En(zE,"4.4.2",e),En(zE,"4.4.2","esm2017")})();var gs={toFirestore:t=>({pasos:t.pasos,nombre:t.nombre,ingredientes:t.ingredientes.map(e=>({unidad:e.unidad,cantidad:e.cantidad,nombre:e.nombre,icono:e.icono})),imagenes:t.imagenes}),fromFirestore:t=>{let e=t.data();return{id:t.id,pasos:e.pasos,nombre:e.nombre,ingredientes:e.ingredientes.map(n=>({unidad:n.unidad,cantidad:n.cantidad,nombre:n.nombre,icono:n.icono})),imagenes:e.imagenes}}};var wc=(()=>{let e=class e{constructor(){let r={apiKey:"AIzaSyBbEu6Xmj7uqCUvg7KiSuczU0DXvOm8YRI",authDomain:"recetario-de-la-mama.firebaseapp.com",projectId:"recetario-de-la-mama",storageBucket:"recetario-de-la-mama.appspot.com",messagingSenderId:"674687883908",appId:"1:674687883908:web:f8fed4b9131bdf823a40d1",measurementId:"G-82Y1H8QSXQ"};this.app=Mh(r),this.firestore=fD(this.app)}getAllRecipes(){return m(this,null,function*(){let r=wg(this.firestore,"recetas").withConverter(gs);return(yield DD(r)).docs.map(s=>{let a=s.data();return re(I({},a),{id:s.id})})})}addRecipe(r){return m(this,null,function*(){let i=wg(this.firestore,"recetas").withConverter(gs);return yield TD(i,r)})}deleteRecipe(r){return m(this,null,function*(){let i=vc(this.firestore,"recetas",r).withConverter(gs);return yield CD(i)})}getRecipeById(r){return m(this,null,function*(){let i=vc(this.firestore,"recetas",r).withConverter(gs),o=yield ID(i);if(o.exists())return o.data();throw new Error("No se ha encontrado la receta solicitada")})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var SD=(()=>{let e=class e{constructor(r){this.firestoreService=r}ngOnInit(){return m(this,null,function*(){let r=yield this.firestoreService.getAllRecipes();r.length>0&&(console.log((yield this.firestoreService.addRecipe(r[0])).id),console.log(yield this.firestoreService.getRecipeById(r[0].id))),setTimeout(()=>{r.forEach(i=>{this.firestoreService.deleteRecipe(i.id)})},1e4)})}};e.\u0275fac=function(i){return new(i||e)(qi(wc))},e.\u0275cmp=Ct({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,o){i&1&&dt(0,"router-outlet")},dependencies:[oh]});let t=e;return t})();var AD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=ut({type:e,bootstrap:[SD]}),e.\u0275inj=at({providers:[wc],imports:[sw,Jw]});let t=e;return t})();ow().bootstrapModule(AD).catch(t=>console.error(t));
